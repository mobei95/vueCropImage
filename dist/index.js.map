{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 3a1d81ba3404bc66b152","webpack:///index.js","webpack:///./node_modules/css-loader/lib/css-base.js","webpack:///./node_modules/vue-style-loader/lib/addStylesClient.js","webpack:///src/components/crop/index.vue","webpack:///./src/index.js","webpack:///./src/components/crop/index.vue","webpack:///./src/components/crop/index.vue?2002","webpack:///./src/components/crop/index.vue?21b2","webpack:///./node_modules/vue-style-loader/lib/listToStyles.js","webpack:///./node_modules/vue-loader/lib/component-normalizer.js","webpack:///./node_modules/cropperjs/dist/cropper.js","webpack:///./node_modules/cropperjs/dist/cropper.min.css?3bca","webpack:///./node_modules/cropperjs/dist/cropper.min.css","webpack:///./src/components/crop/index.vue?6a0f"],"names":["root","factory","exports","module","define","amd","a","i","self","this","__webpack_require__","moduleId","installedModules","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","cssWithMappingToString","item","useSourceMap","content","cssMapping","btoa","sourceMapping","toComment","concat","sources","map","source","sourceRoot","join","sourceMap","unescape","encodeURIComponent","JSON","stringify","list","toString","mediaQuery","alreadyImportedModules","length","id","push","addStylesToDom","styles","domStyle","stylesInDom","refs","j","parts","addStyle","createStyleElement","styleElement","document","createElement","type","head","appendChild","obj","update","remove","querySelector","ssrIdKey","isProduction","noop","parentNode","removeChild","isOldIE","styleIndex","singletonCounter","singletonElement","applyToSingletonTag","bind","applyToTag","newObj","css","media","index","styleSheet","cssText","replaceText","cssNode","createTextNode","childNodes","insertBefore","setAttribute","options","ssrId","firstChild","hasDocument","DEBUG","Error","listToStyles","getElementsByTagName","navigator","test","userAgent","toLowerCase","parentId","_isProduction","_options","newList","mayRemove","textStore","replacement","filter","Boolean","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0_cropperjs__","__WEBPACK_IMPORTED_MODULE_0_cropperjs___default","__WEBPACK_IMPORTED_MODULE_1_cropperjs_dist_cropper_min_css__","props","src","String","default","aspectRatio","Number","modal","cropBoxResizable","getImg","Function","data","canvasImg","mounted","initCopper","methods","viewMode","dragMode","toggleDragModeOnDblclick","checkCrossOrigin","autoCropArea","rotatable","ready","cropend","copper","callback","cropEnd","createCanvas","canvas","width","height","img","onload","canvasCover","dirtyCanvas","dirtyContext","drawImage","ctx","putImageData","imagedata","toDataURL","$emit","vueCrop","injectStyle","ssrContext","normalizeComponent","__vue_styles__","Component","locals","newStyles","part","rawScriptExports","compiledTemplate","functionalTemplate","injectStyles","scopeId","moduleIdentifier","esModule","scriptExports","render","staticRenderFns","_compiled","functional","_scopeId","hook","context","$vnode","parent","__VUE_SSR_CONTEXT__","_registeredComponents","add","_ssrRegister","existing","beforeCreate","_injectStyles","h","global","_typeof","Symbol","iterator","constructor","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","descriptor","writable","key","_createClass","protoProps","staticProps","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","Array","isArray","arr2","iter","from","isNumber","value","isNaN","isUndefined","isObject","isPlainObject","_constructor","error","isFunction","toArray","slice","forEach","keys","normalizeDecimalNumber","times","arguments","undefined","REGEXP_DECIMALS","Math","round","setStyle","element","style","REGEXP_SUFFIX","hasClass","classList","contains","className","indexOf","addClass","elem","trim","removeClass","replace","toggleClass","added","toParamCase","REGEXP_CAMEL_CASE","getData","dataset","getAttribute","setData","removeData","removeAttribute","removeListener","listener","handler","split","REGEXP_SPACES","event","onceSupported","listeners","removeEventListener","addListener","_handler","once","_element$listeners","_len2","args","_key2","apply","addEventListener","dispatchEvent","Event","CustomEvent","detail","bubbles","cancelable","createEvent","initCustomEvent","getOffset","box","getBoundingClientRect","left","window","pageXOffset","documentElement","clientLeft","top","pageYOffset","clientTop","isCrossOriginURL","url","match","REGEXP_ORIGINS","location","protocol","hostname","port","addTimestamp","timestamp","Date","getTime","getTransforms","_ref","rotate","scaleX","scaleY","translateX","translateY","values","transform","WebkitTransform","msTransform","getMaxZoomRatio","pointers","pointers2","assign","ratios","pointer","pointerId","pointer2","x1","abs","startX","y1","startY","x2","endX","y2","endY","z1","sqrt","z2","ratio","sort","b","getPointer","_ref2","endOnly","pageX","pageY","end","getPointersCenter","count","_ref3","getAdjustedSizes","_ref4","isValidWidth","isPositiveNumber","isValidHeight","adjustedWidth","getRotatedSizes","_ref5","degree","arc","PI","sinArc","sin","cosArc","cos","newWidth","newHeight","getSourceCanvas","image","_ref6","_ref7","_ref8","imageAspectRatio","imageNaturalWidth","naturalWidth","imageNaturalHeight","naturalHeight","_ref6$rotate","_ref6$scaleX","_ref6$scaleY","_ref8$fillColor","fillColor","_ref8$imageSmoothingE","imageSmoothingEnabled","_ref8$imageSmoothingQ","imageSmoothingQuality","_ref8$maxWidth","maxWidth","Infinity","_ref8$maxHeight","maxHeight","_ref8$minWidth","minWidth","_ref8$minHeight","minHeight","getContext","maxSizes","minSizes","min","max","destMaxSizes","destMinSizes","destWidth","destHeight","params","fillStyle","fillRect","save","translate","scale","param","floor","restore","getStringFromCharCode","dataView","start","str","fromCharCode","getUint8","dataURLToArrayBuffer","dataURL","base64","REGEXP_DATA_URL_HEAD","binary","atob","arrayBuffer","ArrayBuffer","uint8","Uint8Array","charCodeAt","arrayBufferToDataURL","mimeType","chunks","subarray","resetAndGetOrientation","orientation","DataView","littleEndian","app1Start","ifdStart","byteLength","offset","exifIDCode","tiffOffset","endianness","getUint16","firstIFDOffset","getUint32","_offset","_length","setUint16","parseOrientation","IS_BROWSER","WINDOW","IS_TOUCH_DEVICE","HAS_POINTER_EVENT","CLASS_CROP","CLASS_DISABLED","CLASS_HIDDEN","CLASS_HIDE","CLASS_INVISIBLE","CLASS_MODAL","CLASS_MOVE","DATA_ACTION","DATA_PREVIEW","EVENT_TOUCH_START","EVENT_TOUCH_MOVE","EVENT_TOUCH_END","EVENT_POINTER_DOWN","EVENT_POINTER_MOVE","EVENT_POINTER_UP","REGEXP_ACTIONS","REGEXP_DATA_URL","REGEXP_DATA_URL_JPEG","REGEXP_TAG_NAME","DEFAULTS","initialAspectRatio","NaN","preview","responsive","checkOrientation","guides","center","highlight","background","autoCrop","movable","scalable","zoomable","zoomOnTouch","zoomOnWheel","wheelZoomRatio","cropBoxMovable","minCanvasWidth","minCanvasHeight","minCropBoxWidth","minCropBoxHeight","minContainerWidth","minContainerHeight","cropstart","cropmove","crop","zoom","_len","_key","arg","supported","set","initContainer","initCanvas","initCropBox","renderCanvas","cropped","renderCropBox","container","cropper","containerData","offsetWidth","offsetHeight","imageData","rotated","canvasWidth","canvasHeight","canvasData","oldLeft","oldTop","limited","limitCanvas","initialImageData","initialCanvasData","sizeLimited","positionLimited","cropBoxData","_getAdjustedSizes","newCanvasLeft","newCanvasTop","minLeft","minTop","maxLeft","maxTop","changed","transformed","_getRotatedSizes","renderImage","limitCropBox","output","initialCropBoxData","maxCropBoxWidth","maxCropBoxHeight","face","cropBox","disabled","initPreview","crossOrigin","crossOriginUrl","alt","viewBox","viewBoxImage","previews","ownerDocument","querySelectorAll","el","html","innerHTML","resetPreview","cropBoxWidth","cropBoxHeight","originalWidth","originalHeight","events","onCropStart","cropStart","onWheel","wheel","passive","capture","onDblclick","dblclick","onCropMove","cropMove","onCropEnd","onResize","resize","unbind","handlers","getCanvasData","getCropBoxData","setCanvasData","setCropBoxData","setDragMode","dragBox","_this","delta","preventDefault","wheeling","setTimeout","deltaY","wheelDelta","buttons","button","ctrlKey","action","changedTouches","touch","identifier","originalEvent","cropping","change","right","bottom","renderable","shiftKey","range","x","y","check","side","move","reset","clear","hasSameSize","isImg","replaced","uncreate","load","enable","disable","destroy","originalUrl","offsetX","offsetY","_this$canvasData","moveTo","_originalEvent","zoomTo","pivot","oldRatio","rotateTo","_scaleX","_scaleY","rounded","getContainerData","getImageData","sized","widthChanged","heightChanged","getCroppedCanvas","HTMLCanvasElement","_this$getData","initialX","initialY","initialWidth","initialHeight","_options$imageSmoothi","srcWidth","srcHeight","dstX","dstY","dstWidth","dstHeight","sourceWidth","sourceHeight","srcX","srcY","setAspectRatio","mode","croppable","AnotherCropper","Cropper","tagName","reloading","sizing","init","clone","read","xhr","XMLHttpRequest","onabort","onerror","ontimeout","onprogress","getResponseHeader","abort","response","onloadend","open","responseType","withCredentials","send","_parseOrientation","stop","nextSibling","_this2","isIOSWebKit","done","build","sizingImage","body","template","getElementsByClassName","unbuild","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","esExports"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3a1d81ba3404bc66b152","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/dist/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 3);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n  Modified by Evan You @yyx990803\n*/\n\nvar hasDocument = typeof document !== 'undefined'\n\nif (typeof DEBUG !== 'undefined' && DEBUG) {\n  if (!hasDocument) {\n    throw new Error(\n    'vue-style-loader cannot be used in a non-browser environment. ' +\n    \"Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.\"\n  ) }\n}\n\nvar listToStyles = __webpack_require__(7)\n\n/*\ntype StyleObject = {\n  id: number;\n  parts: Array<StyleObjectPart>\n}\n\ntype StyleObjectPart = {\n  css: string;\n  media: string;\n  sourceMap: ?string\n}\n*/\n\nvar stylesInDom = {/*\n  [id: number]: {\n    id: number,\n    refs: number,\n    parts: Array<(obj?: StyleObjectPart) => void>\n  }\n*/}\n\nvar head = hasDocument && (document.head || document.getElementsByTagName('head')[0])\nvar singletonElement = null\nvar singletonCounter = 0\nvar isProduction = false\nvar noop = function () {}\nvar options = null\nvar ssrIdKey = 'data-vue-ssr-id'\n\n// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n// tags it will allow on a page\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase())\n\nmodule.exports = function (parentId, list, _isProduction, _options) {\n  isProduction = _isProduction\n\n  options = _options || {}\n\n  var styles = listToStyles(parentId, list)\n  addStylesToDom(styles)\n\n  return function update (newList) {\n    var mayRemove = []\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i]\n      var domStyle = stylesInDom[item.id]\n      domStyle.refs--\n      mayRemove.push(domStyle)\n    }\n    if (newList) {\n      styles = listToStyles(parentId, newList)\n      addStylesToDom(styles)\n    } else {\n      styles = []\n    }\n    for (var i = 0; i < mayRemove.length; i++) {\n      var domStyle = mayRemove[i]\n      if (domStyle.refs === 0) {\n        for (var j = 0; j < domStyle.parts.length; j++) {\n          domStyle.parts[j]()\n        }\n        delete stylesInDom[domStyle.id]\n      }\n    }\n  }\n}\n\nfunction addStylesToDom (styles /* Array<StyleObject> */) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i]\n    var domStyle = stylesInDom[item.id]\n    if (domStyle) {\n      domStyle.refs++\n      for (var j = 0; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j])\n      }\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j]))\n      }\n      if (domStyle.parts.length > item.parts.length) {\n        domStyle.parts.length = item.parts.length\n      }\n    } else {\n      var parts = []\n      for (var j = 0; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j]))\n      }\n      stylesInDom[item.id] = { id: item.id, refs: 1, parts: parts }\n    }\n  }\n}\n\nfunction createStyleElement () {\n  var styleElement = document.createElement('style')\n  styleElement.type = 'text/css'\n  head.appendChild(styleElement)\n  return styleElement\n}\n\nfunction addStyle (obj /* StyleObjectPart */) {\n  var update, remove\n  var styleElement = document.querySelector('style[' + ssrIdKey + '~=\"' + obj.id + '\"]')\n\n  if (styleElement) {\n    if (isProduction) {\n      // has SSR styles and in production mode.\n      // simply do nothing.\n      return noop\n    } else {\n      // has SSR styles but in dev mode.\n      // for some reason Chrome can't handle source map in server-rendered\n      // style tags - source maps in <style> only works if the style tag is\n      // created and inserted dynamically. So we remove the server rendered\n      // styles and inject new ones.\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  if (isOldIE) {\n    // use singleton mode for IE9.\n    var styleIndex = singletonCounter++\n    styleElement = singletonElement || (singletonElement = createStyleElement())\n    update = applyToSingletonTag.bind(null, styleElement, styleIndex, false)\n    remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true)\n  } else {\n    // use multi-style-tag mode in all other cases\n    styleElement = createStyleElement()\n    update = applyToTag.bind(null, styleElement)\n    remove = function () {\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  update(obj)\n\n  return function updateStyle (newObj /* StyleObjectPart */) {\n    if (newObj) {\n      if (newObj.css === obj.css &&\n          newObj.media === obj.media &&\n          newObj.sourceMap === obj.sourceMap) {\n        return\n      }\n      update(obj = newObj)\n    } else {\n      remove()\n    }\n  }\n}\n\nvar replaceText = (function () {\n  var textStore = []\n\n  return function (index, replacement) {\n    textStore[index] = replacement\n    return textStore.filter(Boolean).join('\\n')\n  }\n})()\n\nfunction applyToSingletonTag (styleElement, index, remove, obj) {\n  var css = remove ? '' : obj.css\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = replaceText(index, css)\n  } else {\n    var cssNode = document.createTextNode(css)\n    var childNodes = styleElement.childNodes\n    if (childNodes[index]) styleElement.removeChild(childNodes[index])\n    if (childNodes.length) {\n      styleElement.insertBefore(cssNode, childNodes[index])\n    } else {\n      styleElement.appendChild(cssNode)\n    }\n  }\n}\n\nfunction applyToTag (styleElement, obj) {\n  var css = obj.css\n  var media = obj.media\n  var sourceMap = obj.sourceMap\n\n  if (media) {\n    styleElement.setAttribute('media', media)\n  }\n  if (options.ssrId) {\n    styleElement.setAttribute(ssrIdKey, obj.id)\n  }\n\n  if (sourceMap) {\n    // https://developer.chrome.com/devtools/docs/javascript-debugging\n    // this makes source maps inside style tags work properly in Chrome\n    css += '\\n/*# sourceURL=' + sourceMap.sources[0] + ' */'\n    // http://stackoverflow.com/a/26603875\n    css += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + ' */'\n  }\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild)\n    }\n    styleElement.appendChild(document.createTextNode(css))\n  }\n}\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_cropperjs__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_cropperjs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_cropperjs__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_cropperjs_dist_cropper_min_css__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_cropperjs_dist_cropper_min_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_cropperjs_dist_cropper_min_css__);\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'vue-crop',\n  props: {\n    src: {\n      type: String,\n      default: 'https://lh-static.playhudong.com/forever/image/funCoverDefault1.pngtapd_23436241_base64_1542093035_53%281%29.png'\n    },\n    aspectRatio: { // 裁剪框的比例\n      type: Number,\n      default: null\n    },\n    modal: {\n      type: Boolean,\n      default: true\n    },\n    cropBoxResizable: { // 是否允许拖动调整裁剪框的大小\n      type: Boolean,\n      default: true\n    },\n    getImg: {\n      type: Function,\n      default: function _default() {\n        return null;\n      }\n    }\n  },\n  data: function data() {\n    return {\n      canvasImg: null\n    };\n  },\n  mounted: function mounted() {\n    this.initCopper();\n  },\n\n  methods: {\n    /**\n     * 初始化\n     * */\n    initCopper: function initCopper() {\n      var _this = this;\n\n      var copper = new __WEBPACK_IMPORTED_MODULE_0_cropperjs___default.a(this.$refs.img, {\n        viewMode: 1,\n        // 定义裁剪器的拖动模式\n        dragMode: 'none',\n        // 裁剪框比例\n        aspectRatio: this.aspectRatio,\n        modal: this.modal,\n        // 裁剪框单击两次，切换裁剪和拖动模式\n        toggleDragModeOnDblclick: false,\n        // 允许通过拖动调整裁剪框的大小\n        cropBoxResizable: this.cropBoxResizable,\n        checkCrossOrigin: false,\n        // 定义自动裁剪区域的大小\n        autoCropArea: 1,\n        // 不允许旋转\n        rotatable: false,\n        ready: function ready() {\n          _this.callback();\n        },\n        cropend: function cropend() {\n          _this.callback();\n        }\n      });\n      this.copper = copper;\n    },\n\n\n    /**\n     * ready和cropend的callback\n     * */\n    callback: function callback() {\n      this.cropEnd();\n      /*if (this.getImg) {\n        this.getImg(this.canvasImg)\n      }*/\n    },\n\n\n    /**\n     * 裁剪框移动结束\n     * */\n    cropEnd: function cropEnd() {\n      var data = this.copper.getData();\n      this.createCanvas(data);\n    },\n\n\n    /**\n     * 创建canvas\n     * data: 裁剪区域的数据\n     * */\n    createCanvas: function createCanvas(data) {\n      var _this2 = this;\n\n      var canvas = document.createElement('canvas');\n      var ctx = canvas.getContext('2d');\n      canvas.width = data.width;\n      canvas.height = data.height;\n      var img = new Image();\n      img.setAttribute('crossOrigin', 'Anonymous');\n      img.src = this.src;\n      img.onload = function () {\n        // ctx.drawImage(img, 0, 0, data.width, data.height)\n        _this2.canvasCover(canvas, ctx, data.width, data.height, data.x, data.y, img);\n      };\n    },\n\n\n    /**\n     * canvas覆盖\n     * */\n    canvasCover: function canvasCover(canvas, ctx, width, height, x, y, img) {\n      var dirtyCanvas = document.createElement('canvas');\n      var dirtyContext = dirtyCanvas.getContext('2d');\n      dirtyCanvas.width = img.width;\n      dirtyCanvas.height = img.height;\n      dirtyContext.drawImage(img, 0, 0, img.width, img.height);\n      var imagedata = dirtyContext.getImageData(x, y, img.width, img.height);\n      ctx.putImageData(imagedata, 0, 0, 0, 0, width, height);\n      this.canvasImg = canvas.toDataURL('image/png', 1);\n      this.$emit('copperImg', this.canvasImg);\n    }\n  }\n});\n\n/***/ }),\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_crop_index__ = __webpack_require__(4);\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (__WEBPACK_IMPORTED_MODULE_0__components_crop_index__[\"a\" /* default */]);\n\n/***/ }),\n/* 4 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_index_vue__ = __webpack_require__(2);\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_fe98b570_hasScoped_true_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_index_vue__ = __webpack_require__(12);\nfunction injectStyle (ssrContext) {\n  __webpack_require__(5)\n}\nvar normalizeComponent = __webpack_require__(8)\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-fe98b570\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_index_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_fe98b570_hasScoped_true_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_index_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(6);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(1)(\"d66653a8\", content, true, {});\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(0)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".copper[data-v-fe98b570]{width:100%;height:100%;position:relative}.canvas[data-v-fe98b570]{position:absolute;top:0;left:0;width:100%;height:100%}.copper-box[data-v-fe98b570]{width:100%;height:100%}.copper-img[data-v-fe98b570]{width:100%;height:auto}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n/**\n * Translates the list format produced by css-loader into something\n * easier to manipulate.\n */\nmodule.exports = function listToStyles (parentId, list) {\n  var styles = []\n  var newStyles = {}\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i]\n    var id = item[0]\n    var css = item[1]\n    var media = item[2]\n    var sourceMap = item[3]\n    var part = {\n      id: parentId + ':' + i,\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    }\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = { id: id, parts: [part] })\n    } else {\n      newStyles[id].parts.push(part)\n    }\n  }\n  return styles\n}\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports) {\n\n/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file.\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nmodule.exports = function normalizeComponent (\n  rawScriptExports,\n  compiledTemplate,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier /* server only */\n) {\n  var esModule\n  var scriptExports = rawScriptExports = rawScriptExports || {}\n\n  // ES6 modules interop\n  var type = typeof rawScriptExports.default\n  if (type === 'object' || type === 'function') {\n    esModule = rawScriptExports\n    scriptExports = rawScriptExports.default\n  }\n\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (compiledTemplate) {\n    options.render = compiledTemplate.render\n    options.staticRenderFns = compiledTemplate.staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = injectStyles\n  }\n\n  if (hook) {\n    var functional = options.functional\n    var existing = functional\n      ? options.render\n      : options.beforeCreate\n\n    if (!functional) {\n      // inject component registration as beforeCreate hook\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    } else {\n      // for template-only hot-reload because in that case the render fn doesn't\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functioal component in vue file\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return existing(h, context)\n      }\n    }\n  }\n\n  return {\n    esModule: esModule,\n    exports: scriptExports,\n    options: options\n  }\n}\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*!\n * Cropper.js v1.5.4\n * https://fengyuanchen.github.io/cropperjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2019-08-03T08:38:42.128Z\n */\n\n(function (global, factory) {\n   true ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global.Cropper = factory());\n}(this, function () { 'use strict';\n\n  function _typeof(obj) {\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      _typeof = function (obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _toConsumableArray(arr) {\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n  }\n\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) {\n      for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n      return arr2;\n    }\n  }\n\n  function _iterableToArray(iter) {\n    if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n  }\n\n  function _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n  }\n\n  var IS_BROWSER = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  var WINDOW = IS_BROWSER ? window : {};\n  var IS_TOUCH_DEVICE = IS_BROWSER ? 'ontouchstart' in WINDOW.document.documentElement : false;\n  var HAS_POINTER_EVENT = IS_BROWSER ? 'PointerEvent' in WINDOW : false;\n  var NAMESPACE = 'cropper'; // Actions\n\n  var ACTION_ALL = 'all';\n  var ACTION_CROP = 'crop';\n  var ACTION_MOVE = 'move';\n  var ACTION_ZOOM = 'zoom';\n  var ACTION_EAST = 'e';\n  var ACTION_WEST = 'w';\n  var ACTION_SOUTH = 's';\n  var ACTION_NORTH = 'n';\n  var ACTION_NORTH_EAST = 'ne';\n  var ACTION_NORTH_WEST = 'nw';\n  var ACTION_SOUTH_EAST = 'se';\n  var ACTION_SOUTH_WEST = 'sw'; // Classes\n\n  var CLASS_CROP = \"\".concat(NAMESPACE, \"-crop\");\n  var CLASS_DISABLED = \"\".concat(NAMESPACE, \"-disabled\");\n  var CLASS_HIDDEN = \"\".concat(NAMESPACE, \"-hidden\");\n  var CLASS_HIDE = \"\".concat(NAMESPACE, \"-hide\");\n  var CLASS_INVISIBLE = \"\".concat(NAMESPACE, \"-invisible\");\n  var CLASS_MODAL = \"\".concat(NAMESPACE, \"-modal\");\n  var CLASS_MOVE = \"\".concat(NAMESPACE, \"-move\"); // Data keys\n\n  var DATA_ACTION = \"\".concat(NAMESPACE, \"Action\");\n  var DATA_PREVIEW = \"\".concat(NAMESPACE, \"Preview\"); // Drag modes\n\n  var DRAG_MODE_CROP = 'crop';\n  var DRAG_MODE_MOVE = 'move';\n  var DRAG_MODE_NONE = 'none'; // Events\n\n  var EVENT_CROP = 'crop';\n  var EVENT_CROP_END = 'cropend';\n  var EVENT_CROP_MOVE = 'cropmove';\n  var EVENT_CROP_START = 'cropstart';\n  var EVENT_DBLCLICK = 'dblclick';\n  var EVENT_TOUCH_START = IS_TOUCH_DEVICE ? 'touchstart' : 'mousedown';\n  var EVENT_TOUCH_MOVE = IS_TOUCH_DEVICE ? 'touchmove' : 'mousemove';\n  var EVENT_TOUCH_END = IS_TOUCH_DEVICE ? 'touchend touchcancel' : 'mouseup';\n  var EVENT_POINTER_DOWN = HAS_POINTER_EVENT ? 'pointerdown' : EVENT_TOUCH_START;\n  var EVENT_POINTER_MOVE = HAS_POINTER_EVENT ? 'pointermove' : EVENT_TOUCH_MOVE;\n  var EVENT_POINTER_UP = HAS_POINTER_EVENT ? 'pointerup pointercancel' : EVENT_TOUCH_END;\n  var EVENT_READY = 'ready';\n  var EVENT_RESIZE = 'resize';\n  var EVENT_WHEEL = 'wheel';\n  var EVENT_ZOOM = 'zoom'; // Mime types\n\n  var MIME_TYPE_JPEG = 'image/jpeg'; // RegExps\n\n  var REGEXP_ACTIONS = /^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/;\n  var REGEXP_DATA_URL = /^data:/;\n  var REGEXP_DATA_URL_JPEG = /^data:image\\/jpeg;base64,/;\n  var REGEXP_TAG_NAME = /^img|canvas$/i; // Misc\n  // Inspired by the default width and height of a canvas element.\n\n  var MIN_CONTAINER_WIDTH = 200;\n  var MIN_CONTAINER_HEIGHT = 100;\n\n  var DEFAULTS = {\n    // Define the view mode of the cropper\n    viewMode: 0,\n    // 0, 1, 2, 3\n    // Define the dragging mode of the cropper\n    dragMode: DRAG_MODE_CROP,\n    // 'crop', 'move' or 'none'\n    // Define the initial aspect ratio of the crop box\n    initialAspectRatio: NaN,\n    // Define the aspect ratio of the crop box\n    aspectRatio: NaN,\n    // An object with the previous cropping result data\n    data: null,\n    // A selector for adding extra containers to preview\n    preview: '',\n    // Re-render the cropper when resize the window\n    responsive: true,\n    // Restore the cropped area after resize the window\n    restore: true,\n    // Check if the current image is a cross-origin image\n    checkCrossOrigin: true,\n    // Check the current image's Exif Orientation information\n    checkOrientation: true,\n    // Show the black modal\n    modal: true,\n    // Show the dashed lines for guiding\n    guides: true,\n    // Show the center indicator for guiding\n    center: true,\n    // Show the white modal to highlight the crop box\n    highlight: true,\n    // Show the grid background\n    background: true,\n    // Enable to crop the image automatically when initialize\n    autoCrop: true,\n    // Define the percentage of automatic cropping area when initializes\n    autoCropArea: 0.8,\n    // Enable to move the image\n    movable: true,\n    // Enable to rotate the image\n    rotatable: true,\n    // Enable to scale the image\n    scalable: true,\n    // Enable to zoom the image\n    zoomable: true,\n    // Enable to zoom the image by dragging touch\n    zoomOnTouch: true,\n    // Enable to zoom the image by wheeling mouse\n    zoomOnWheel: true,\n    // Define zoom ratio when zoom the image by wheeling mouse\n    wheelZoomRatio: 0.1,\n    // Enable to move the crop box\n    cropBoxMovable: true,\n    // Enable to resize the crop box\n    cropBoxResizable: true,\n    // Toggle drag mode between \"crop\" and \"move\" when click twice on the cropper\n    toggleDragModeOnDblclick: true,\n    // Size limitation\n    minCanvasWidth: 0,\n    minCanvasHeight: 0,\n    minCropBoxWidth: 0,\n    minCropBoxHeight: 0,\n    minContainerWidth: 200,\n    minContainerHeight: 100,\n    // Shortcuts of events\n    ready: null,\n    cropstart: null,\n    cropmove: null,\n    cropend: null,\n    crop: null,\n    zoom: null\n  };\n\n  var TEMPLATE = '<div class=\"cropper-container\" touch-action=\"none\">' + '<div class=\"cropper-wrap-box\">' + '<div class=\"cropper-canvas\"></div>' + '</div>' + '<div class=\"cropper-drag-box\"></div>' + '<div class=\"cropper-crop-box\">' + '<span class=\"cropper-view-box\"></span>' + '<span class=\"cropper-dashed dashed-h\"></span>' + '<span class=\"cropper-dashed dashed-v\"></span>' + '<span class=\"cropper-center\"></span>' + '<span class=\"cropper-face\"></span>' + '<span class=\"cropper-line line-e\" data-cropper-action=\"e\"></span>' + '<span class=\"cropper-line line-n\" data-cropper-action=\"n\"></span>' + '<span class=\"cropper-line line-w\" data-cropper-action=\"w\"></span>' + '<span class=\"cropper-line line-s\" data-cropper-action=\"s\"></span>' + '<span class=\"cropper-point point-e\" data-cropper-action=\"e\"></span>' + '<span class=\"cropper-point point-n\" data-cropper-action=\"n\"></span>' + '<span class=\"cropper-point point-w\" data-cropper-action=\"w\"></span>' + '<span class=\"cropper-point point-s\" data-cropper-action=\"s\"></span>' + '<span class=\"cropper-point point-ne\" data-cropper-action=\"ne\"></span>' + '<span class=\"cropper-point point-nw\" data-cropper-action=\"nw\"></span>' + '<span class=\"cropper-point point-sw\" data-cropper-action=\"sw\"></span>' + '<span class=\"cropper-point point-se\" data-cropper-action=\"se\"></span>' + '</div>' + '</div>';\n\n  /**\n   * Check if the given value is not a number.\n   */\n\n  var isNaN = Number.isNaN || WINDOW.isNaN;\n  /**\n   * Check if the given value is a number.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a number, else `false`.\n   */\n\n  function isNumber(value) {\n    return typeof value === 'number' && !isNaN(value);\n  }\n  /**\n   * Check if the given value is a positive number.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a positive number, else `false`.\n   */\n\n  var isPositiveNumber = function isPositiveNumber(value) {\n    return value > 0 && value < Infinity;\n  };\n  /**\n   * Check if the given value is undefined.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is undefined, else `false`.\n   */\n\n  function isUndefined(value) {\n    return typeof value === 'undefined';\n  }\n  /**\n   * Check if the given value is an object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is an object, else `false`.\n   */\n\n  function isObject(value) {\n    return _typeof(value) === 'object' && value !== null;\n  }\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\n  /**\n   * Check if the given value is a plain object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a plain object, else `false`.\n   */\n\n  function isPlainObject(value) {\n    if (!isObject(value)) {\n      return false;\n    }\n\n    try {\n      var _constructor = value.constructor;\n      var prototype = _constructor.prototype;\n      return _constructor && prototype && hasOwnProperty.call(prototype, 'isPrototypeOf');\n    } catch (error) {\n      return false;\n    }\n  }\n  /**\n   * Check if the given value is a function.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a function, else `false`.\n   */\n\n  function isFunction(value) {\n    return typeof value === 'function';\n  }\n  var slice = Array.prototype.slice;\n  /**\n   * Convert array-like or iterable object to an array.\n   * @param {*} value - The value to convert.\n   * @returns {Array} Returns a new array.\n   */\n\n  function toArray(value) {\n    return Array.from ? Array.from(value) : slice.call(value);\n  }\n  /**\n   * Iterate the given data.\n   * @param {*} data - The data to iterate.\n   * @param {Function} callback - The process function for each element.\n   * @returns {*} The original data.\n   */\n\n  function forEach(data, callback) {\n    if (data && isFunction(callback)) {\n      if (Array.isArray(data) || isNumber(data.length)\n      /* array-like */\n      ) {\n          toArray(data).forEach(function (value, key) {\n            callback.call(data, value, key, data);\n          });\n        } else if (isObject(data)) {\n        Object.keys(data).forEach(function (key) {\n          callback.call(data, data[key], key, data);\n        });\n      }\n    }\n\n    return data;\n  }\n  /**\n   * Extend the given object.\n   * @param {*} target - The target object to extend.\n   * @param {*} args - The rest objects for merging to the target object.\n   * @returns {Object} The extended object.\n   */\n\n  var assign = Object.assign || function assign(target) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    if (isObject(target) && args.length > 0) {\n      args.forEach(function (arg) {\n        if (isObject(arg)) {\n          Object.keys(arg).forEach(function (key) {\n            target[key] = arg[key];\n          });\n        }\n      });\n    }\n\n    return target;\n  };\n  var REGEXP_DECIMALS = /\\.\\d*(?:0|9){12}\\d*$/;\n  /**\n   * Normalize decimal number.\n   * Check out {@link http://0.30000000000000004.com/}\n   * @param {number} value - The value to normalize.\n   * @param {number} [times=100000000000] - The times for normalizing.\n   * @returns {number} Returns the normalized number.\n   */\n\n  function normalizeDecimalNumber(value) {\n    var times = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100000000000;\n    return REGEXP_DECIMALS.test(value) ? Math.round(value * times) / times : value;\n  }\n  var REGEXP_SUFFIX = /^width|height|left|top|marginLeft|marginTop$/;\n  /**\n   * Apply styles to the given element.\n   * @param {Element} element - The target element.\n   * @param {Object} styles - The styles for applying.\n   */\n\n  function setStyle(element, styles) {\n    var style = element.style;\n    forEach(styles, function (value, property) {\n      if (REGEXP_SUFFIX.test(property) && isNumber(value)) {\n        value = \"\".concat(value, \"px\");\n      }\n\n      style[property] = value;\n    });\n  }\n  /**\n   * Check if the given element has a special class.\n   * @param {Element} element - The element to check.\n   * @param {string} value - The class to search.\n   * @returns {boolean} Returns `true` if the special class was found.\n   */\n\n  function hasClass(element, value) {\n    return element.classList ? element.classList.contains(value) : element.className.indexOf(value) > -1;\n  }\n  /**\n   * Add classes to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be added.\n   */\n\n  function addClass(element, value) {\n    if (!value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        addClass(elem, value);\n      });\n      return;\n    }\n\n    if (element.classList) {\n      element.classList.add(value);\n      return;\n    }\n\n    var className = element.className.trim();\n\n    if (!className) {\n      element.className = value;\n    } else if (className.indexOf(value) < 0) {\n      element.className = \"\".concat(className, \" \").concat(value);\n    }\n  }\n  /**\n   * Remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be removed.\n   */\n\n  function removeClass(element, value) {\n    if (!value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        removeClass(elem, value);\n      });\n      return;\n    }\n\n    if (element.classList) {\n      element.classList.remove(value);\n      return;\n    }\n\n    if (element.className.indexOf(value) >= 0) {\n      element.className = element.className.replace(value, '');\n    }\n  }\n  /**\n   * Add or remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be toggled.\n   * @param {boolean} added - Add only.\n   */\n\n  function toggleClass(element, value, added) {\n    if (!value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        toggleClass(elem, value, added);\n      });\n      return;\n    } // IE10-11 doesn't support the second parameter of `classList.toggle`\n\n\n    if (added) {\n      addClass(element, value);\n    } else {\n      removeClass(element, value);\n    }\n  }\n  var REGEXP_CAMEL_CASE = /([a-z\\d])([A-Z])/g;\n  /**\n   * Transform the given string from camelCase to kebab-case\n   * @param {string} value - The value to transform.\n   * @returns {string} The transformed value.\n   */\n\n  function toParamCase(value) {\n    return value.replace(REGEXP_CAMEL_CASE, '$1-$2').toLowerCase();\n  }\n  /**\n   * Get data from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to get.\n   * @returns {string} The data value.\n   */\n\n  function getData(element, name) {\n    if (isObject(element[name])) {\n      return element[name];\n    }\n\n    if (element.dataset) {\n      return element.dataset[name];\n    }\n\n    return element.getAttribute(\"data-\".concat(toParamCase(name)));\n  }\n  /**\n   * Set data to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to set.\n   * @param {string} data - The data value.\n   */\n\n  function setData(element, name, data) {\n    if (isObject(data)) {\n      element[name] = data;\n    } else if (element.dataset) {\n      element.dataset[name] = data;\n    } else {\n      element.setAttribute(\"data-\".concat(toParamCase(name)), data);\n    }\n  }\n  /**\n   * Remove data from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to remove.\n   */\n\n  function removeData(element, name) {\n    if (isObject(element[name])) {\n      try {\n        delete element[name];\n      } catch (error) {\n        element[name] = undefined;\n      }\n    } else if (element.dataset) {\n      // #128 Safari not allows to delete dataset property\n      try {\n        delete element.dataset[name];\n      } catch (error) {\n        element.dataset[name] = undefined;\n      }\n    } else {\n      element.removeAttribute(\"data-\".concat(toParamCase(name)));\n    }\n  }\n  var REGEXP_SPACES = /\\s\\s*/;\n\n  var onceSupported = function () {\n    var supported = false;\n\n    if (IS_BROWSER) {\n      var once = false;\n\n      var listener = function listener() {};\n\n      var options = Object.defineProperty({}, 'once', {\n        get: function get() {\n          supported = true;\n          return once;\n        },\n\n        /**\n         * This setter can fix a `TypeError` in strict mode\n         * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Getter_only}\n         * @param {boolean} value - The value to set\n         */\n        set: function set(value) {\n          once = value;\n        }\n      });\n      WINDOW.addEventListener('test', listener, options);\n      WINDOW.removeEventListener('test', listener, options);\n    }\n\n    return supported;\n  }();\n  /**\n   * Remove event listener from the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n\n\n  function removeListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (!onceSupported) {\n        var listeners = element.listeners;\n\n        if (listeners && listeners[event] && listeners[event][listener]) {\n          handler = listeners[event][listener];\n          delete listeners[event][listener];\n\n          if (Object.keys(listeners[event]).length === 0) {\n            delete listeners[event];\n          }\n\n          if (Object.keys(listeners).length === 0) {\n            delete element.listeners;\n          }\n        }\n      }\n\n      element.removeEventListener(event, handler, options);\n    });\n  }\n  /**\n   * Add event listener to the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n\n  function addListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var _handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (options.once && !onceSupported) {\n        var _element$listeners = element.listeners,\n            listeners = _element$listeners === void 0 ? {} : _element$listeners;\n\n        _handler = function handler() {\n          delete listeners[event][listener];\n          element.removeEventListener(event, _handler, options);\n\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n\n          listener.apply(element, args);\n        };\n\n        if (!listeners[event]) {\n          listeners[event] = {};\n        }\n\n        if (listeners[event][listener]) {\n          element.removeEventListener(event, listeners[event][listener], options);\n        }\n\n        listeners[event][listener] = _handler;\n        element.listeners = listeners;\n      }\n\n      element.addEventListener(event, _handler, options);\n    });\n  }\n  /**\n   * Dispatch event on the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Object} data - The additional event data.\n   * @returns {boolean} Indicate if the event is default prevented or not.\n   */\n\n  function dispatchEvent(element, type, data) {\n    var event; // Event and CustomEvent on IE9-11 are global objects, not constructors\n\n    if (isFunction(Event) && isFunction(CustomEvent)) {\n      event = new CustomEvent(type, {\n        detail: data,\n        bubbles: true,\n        cancelable: true\n      });\n    } else {\n      event = document.createEvent('CustomEvent');\n      event.initCustomEvent(type, true, true, data);\n    }\n\n    return element.dispatchEvent(event);\n  }\n  /**\n   * Get the offset base on the document.\n   * @param {Element} element - The target element.\n   * @returns {Object} The offset data.\n   */\n\n  function getOffset(element) {\n    var box = element.getBoundingClientRect();\n    return {\n      left: box.left + (window.pageXOffset - document.documentElement.clientLeft),\n      top: box.top + (window.pageYOffset - document.documentElement.clientTop)\n    };\n  }\n  var location = WINDOW.location;\n  var REGEXP_ORIGINS = /^(\\w+:)\\/\\/([^:/?#]*):?(\\d*)/i;\n  /**\n   * Check if the given URL is a cross origin URL.\n   * @param {string} url - The target URL.\n   * @returns {boolean} Returns `true` if the given URL is a cross origin URL, else `false`.\n   */\n\n  function isCrossOriginURL(url) {\n    var parts = url.match(REGEXP_ORIGINS);\n    return parts !== null && (parts[1] !== location.protocol || parts[2] !== location.hostname || parts[3] !== location.port);\n  }\n  /**\n   * Add timestamp to the given URL.\n   * @param {string} url - The target URL.\n   * @returns {string} The result URL.\n   */\n\n  function addTimestamp(url) {\n    var timestamp = \"timestamp=\".concat(new Date().getTime());\n    return url + (url.indexOf('?') === -1 ? '?' : '&') + timestamp;\n  }\n  /**\n   * Get transforms base on the given object.\n   * @param {Object} obj - The target object.\n   * @returns {string} A string contains transform values.\n   */\n\n  function getTransforms(_ref) {\n    var rotate = _ref.rotate,\n        scaleX = _ref.scaleX,\n        scaleY = _ref.scaleY,\n        translateX = _ref.translateX,\n        translateY = _ref.translateY;\n    var values = [];\n\n    if (isNumber(translateX) && translateX !== 0) {\n      values.push(\"translateX(\".concat(translateX, \"px)\"));\n    }\n\n    if (isNumber(translateY) && translateY !== 0) {\n      values.push(\"translateY(\".concat(translateY, \"px)\"));\n    } // Rotate should come first before scale to match orientation transform\n\n\n    if (isNumber(rotate) && rotate !== 0) {\n      values.push(\"rotate(\".concat(rotate, \"deg)\"));\n    }\n\n    if (isNumber(scaleX) && scaleX !== 1) {\n      values.push(\"scaleX(\".concat(scaleX, \")\"));\n    }\n\n    if (isNumber(scaleY) && scaleY !== 1) {\n      values.push(\"scaleY(\".concat(scaleY, \")\"));\n    }\n\n    var transform = values.length ? values.join(' ') : 'none';\n    return {\n      WebkitTransform: transform,\n      msTransform: transform,\n      transform: transform\n    };\n  }\n  /**\n   * Get the max ratio of a group of pointers.\n   * @param {string} pointers - The target pointers.\n   * @returns {number} The result ratio.\n   */\n\n  function getMaxZoomRatio(pointers) {\n    var pointers2 = assign({}, pointers);\n    var ratios = [];\n    forEach(pointers, function (pointer, pointerId) {\n      delete pointers2[pointerId];\n      forEach(pointers2, function (pointer2) {\n        var x1 = Math.abs(pointer.startX - pointer2.startX);\n        var y1 = Math.abs(pointer.startY - pointer2.startY);\n        var x2 = Math.abs(pointer.endX - pointer2.endX);\n        var y2 = Math.abs(pointer.endY - pointer2.endY);\n        var z1 = Math.sqrt(x1 * x1 + y1 * y1);\n        var z2 = Math.sqrt(x2 * x2 + y2 * y2);\n        var ratio = (z2 - z1) / z1;\n        ratios.push(ratio);\n      });\n    });\n    ratios.sort(function (a, b) {\n      return Math.abs(a) < Math.abs(b);\n    });\n    return ratios[0];\n  }\n  /**\n   * Get a pointer from an event object.\n   * @param {Object} event - The target event object.\n   * @param {boolean} endOnly - Indicates if only returns the end point coordinate or not.\n   * @returns {Object} The result pointer contains start and/or end point coordinates.\n   */\n\n  function getPointer(_ref2, endOnly) {\n    var pageX = _ref2.pageX,\n        pageY = _ref2.pageY;\n    var end = {\n      endX: pageX,\n      endY: pageY\n    };\n    return endOnly ? end : assign({\n      startX: pageX,\n      startY: pageY\n    }, end);\n  }\n  /**\n   * Get the center point coordinate of a group of pointers.\n   * @param {Object} pointers - The target pointers.\n   * @returns {Object} The center point coordinate.\n   */\n\n  function getPointersCenter(pointers) {\n    var pageX = 0;\n    var pageY = 0;\n    var count = 0;\n    forEach(pointers, function (_ref3) {\n      var startX = _ref3.startX,\n          startY = _ref3.startY;\n      pageX += startX;\n      pageY += startY;\n      count += 1;\n    });\n    pageX /= count;\n    pageY /= count;\n    return {\n      pageX: pageX,\n      pageY: pageY\n    };\n  }\n  /**\n   * Get the max sizes in a rectangle under the given aspect ratio.\n   * @param {Object} data - The original sizes.\n   * @param {string} [type='contain'] - The adjust type.\n   * @returns {Object} The result sizes.\n   */\n\n  function getAdjustedSizes(_ref4) // or 'cover'\n  {\n    var aspectRatio = _ref4.aspectRatio,\n        height = _ref4.height,\n        width = _ref4.width;\n    var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'contain';\n    var isValidWidth = isPositiveNumber(width);\n    var isValidHeight = isPositiveNumber(height);\n\n    if (isValidWidth && isValidHeight) {\n      var adjustedWidth = height * aspectRatio;\n\n      if (type === 'contain' && adjustedWidth > width || type === 'cover' && adjustedWidth < width) {\n        height = width / aspectRatio;\n      } else {\n        width = height * aspectRatio;\n      }\n    } else if (isValidWidth) {\n      height = width / aspectRatio;\n    } else if (isValidHeight) {\n      width = height * aspectRatio;\n    }\n\n    return {\n      width: width,\n      height: height\n    };\n  }\n  /**\n   * Get the new sizes of a rectangle after rotated.\n   * @param {Object} data - The original sizes.\n   * @returns {Object} The result sizes.\n   */\n\n  function getRotatedSizes(_ref5) {\n    var width = _ref5.width,\n        height = _ref5.height,\n        degree = _ref5.degree;\n    degree = Math.abs(degree) % 180;\n\n    if (degree === 90) {\n      return {\n        width: height,\n        height: width\n      };\n    }\n\n    var arc = degree % 90 * Math.PI / 180;\n    var sinArc = Math.sin(arc);\n    var cosArc = Math.cos(arc);\n    var newWidth = width * cosArc + height * sinArc;\n    var newHeight = width * sinArc + height * cosArc;\n    return degree > 90 ? {\n      width: newHeight,\n      height: newWidth\n    } : {\n      width: newWidth,\n      height: newHeight\n    };\n  }\n  /**\n   * Get a canvas which drew the given image.\n   * @param {HTMLImageElement} image - The image for drawing.\n   * @param {Object} imageData - The image data.\n   * @param {Object} canvasData - The canvas data.\n   * @param {Object} options - The options.\n   * @returns {HTMLCanvasElement} The result canvas.\n   */\n\n  function getSourceCanvas(image, _ref6, _ref7, _ref8) {\n    var imageAspectRatio = _ref6.aspectRatio,\n        imageNaturalWidth = _ref6.naturalWidth,\n        imageNaturalHeight = _ref6.naturalHeight,\n        _ref6$rotate = _ref6.rotate,\n        rotate = _ref6$rotate === void 0 ? 0 : _ref6$rotate,\n        _ref6$scaleX = _ref6.scaleX,\n        scaleX = _ref6$scaleX === void 0 ? 1 : _ref6$scaleX,\n        _ref6$scaleY = _ref6.scaleY,\n        scaleY = _ref6$scaleY === void 0 ? 1 : _ref6$scaleY;\n    var aspectRatio = _ref7.aspectRatio,\n        naturalWidth = _ref7.naturalWidth,\n        naturalHeight = _ref7.naturalHeight;\n    var _ref8$fillColor = _ref8.fillColor,\n        fillColor = _ref8$fillColor === void 0 ? 'transparent' : _ref8$fillColor,\n        _ref8$imageSmoothingE = _ref8.imageSmoothingEnabled,\n        imageSmoothingEnabled = _ref8$imageSmoothingE === void 0 ? true : _ref8$imageSmoothingE,\n        _ref8$imageSmoothingQ = _ref8.imageSmoothingQuality,\n        imageSmoothingQuality = _ref8$imageSmoothingQ === void 0 ? 'low' : _ref8$imageSmoothingQ,\n        _ref8$maxWidth = _ref8.maxWidth,\n        maxWidth = _ref8$maxWidth === void 0 ? Infinity : _ref8$maxWidth,\n        _ref8$maxHeight = _ref8.maxHeight,\n        maxHeight = _ref8$maxHeight === void 0 ? Infinity : _ref8$maxHeight,\n        _ref8$minWidth = _ref8.minWidth,\n        minWidth = _ref8$minWidth === void 0 ? 0 : _ref8$minWidth,\n        _ref8$minHeight = _ref8.minHeight,\n        minHeight = _ref8$minHeight === void 0 ? 0 : _ref8$minHeight;\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d');\n    var maxSizes = getAdjustedSizes({\n      aspectRatio: aspectRatio,\n      width: maxWidth,\n      height: maxHeight\n    });\n    var minSizes = getAdjustedSizes({\n      aspectRatio: aspectRatio,\n      width: minWidth,\n      height: minHeight\n    }, 'cover');\n    var width = Math.min(maxSizes.width, Math.max(minSizes.width, naturalWidth));\n    var height = Math.min(maxSizes.height, Math.max(minSizes.height, naturalHeight)); // Note: should always use image's natural sizes for drawing as\n    // imageData.naturalWidth === canvasData.naturalHeight when rotate % 180 === 90\n\n    var destMaxSizes = getAdjustedSizes({\n      aspectRatio: imageAspectRatio,\n      width: maxWidth,\n      height: maxHeight\n    });\n    var destMinSizes = getAdjustedSizes({\n      aspectRatio: imageAspectRatio,\n      width: minWidth,\n      height: minHeight\n    }, 'cover');\n    var destWidth = Math.min(destMaxSizes.width, Math.max(destMinSizes.width, imageNaturalWidth));\n    var destHeight = Math.min(destMaxSizes.height, Math.max(destMinSizes.height, imageNaturalHeight));\n    var params = [-destWidth / 2, -destHeight / 2, destWidth, destHeight];\n    canvas.width = normalizeDecimalNumber(width);\n    canvas.height = normalizeDecimalNumber(height);\n    context.fillStyle = fillColor;\n    context.fillRect(0, 0, width, height);\n    context.save();\n    context.translate(width / 2, height / 2);\n    context.rotate(rotate * Math.PI / 180);\n    context.scale(scaleX, scaleY);\n    context.imageSmoothingEnabled = imageSmoothingEnabled;\n    context.imageSmoothingQuality = imageSmoothingQuality;\n    context.drawImage.apply(context, [image].concat(_toConsumableArray(params.map(function (param) {\n      return Math.floor(normalizeDecimalNumber(param));\n    }))));\n    context.restore();\n    return canvas;\n  }\n  var fromCharCode = String.fromCharCode;\n  /**\n   * Get string from char code in data view.\n   * @param {DataView} dataView - The data view for read.\n   * @param {number} start - The start index.\n   * @param {number} length - The read length.\n   * @returns {string} The read result.\n   */\n\n  function getStringFromCharCode(dataView, start, length) {\n    var str = '';\n    length += start;\n\n    for (var i = start; i < length; i += 1) {\n      str += fromCharCode(dataView.getUint8(i));\n    }\n\n    return str;\n  }\n  var REGEXP_DATA_URL_HEAD = /^data:.*,/;\n  /**\n   * Transform Data URL to array buffer.\n   * @param {string} dataURL - The Data URL to transform.\n   * @returns {ArrayBuffer} The result array buffer.\n   */\n\n  function dataURLToArrayBuffer(dataURL) {\n    var base64 = dataURL.replace(REGEXP_DATA_URL_HEAD, '');\n    var binary = atob(base64);\n    var arrayBuffer = new ArrayBuffer(binary.length);\n    var uint8 = new Uint8Array(arrayBuffer);\n    forEach(uint8, function (value, i) {\n      uint8[i] = binary.charCodeAt(i);\n    });\n    return arrayBuffer;\n  }\n  /**\n   * Transform array buffer to Data URL.\n   * @param {ArrayBuffer} arrayBuffer - The array buffer to transform.\n   * @param {string} mimeType - The mime type of the Data URL.\n   * @returns {string} The result Data URL.\n   */\n\n  function arrayBufferToDataURL(arrayBuffer, mimeType) {\n    var chunks = []; // Chunk Typed Array for better performance (#435)\n\n    var chunkSize = 8192;\n    var uint8 = new Uint8Array(arrayBuffer);\n\n    while (uint8.length > 0) {\n      // XXX: Babel's `toConsumableArray` helper will throw error in IE or Safari 9\n      // eslint-disable-next-line prefer-spread\n      chunks.push(fromCharCode.apply(null, toArray(uint8.subarray(0, chunkSize))));\n      uint8 = uint8.subarray(chunkSize);\n    }\n\n    return \"data:\".concat(mimeType, \";base64,\").concat(btoa(chunks.join('')));\n  }\n  /**\n   * Get orientation value from given array buffer.\n   * @param {ArrayBuffer} arrayBuffer - The array buffer to read.\n   * @returns {number} The read orientation value.\n   */\n\n  function resetAndGetOrientation(arrayBuffer) {\n    var dataView = new DataView(arrayBuffer);\n    var orientation; // Ignores range error when the image does not have correct Exif information\n\n    try {\n      var littleEndian;\n      var app1Start;\n      var ifdStart; // Only handle JPEG image (start by 0xFFD8)\n\n      if (dataView.getUint8(0) === 0xFF && dataView.getUint8(1) === 0xD8) {\n        var length = dataView.byteLength;\n        var offset = 2;\n\n        while (offset + 1 < length) {\n          if (dataView.getUint8(offset) === 0xFF && dataView.getUint8(offset + 1) === 0xE1) {\n            app1Start = offset;\n            break;\n          }\n\n          offset += 1;\n        }\n      }\n\n      if (app1Start) {\n        var exifIDCode = app1Start + 4;\n        var tiffOffset = app1Start + 10;\n\n        if (getStringFromCharCode(dataView, exifIDCode, 4) === 'Exif') {\n          var endianness = dataView.getUint16(tiffOffset);\n          littleEndian = endianness === 0x4949;\n\n          if (littleEndian || endianness === 0x4D4D\n          /* bigEndian */\n          ) {\n              if (dataView.getUint16(tiffOffset + 2, littleEndian) === 0x002A) {\n                var firstIFDOffset = dataView.getUint32(tiffOffset + 4, littleEndian);\n\n                if (firstIFDOffset >= 0x00000008) {\n                  ifdStart = tiffOffset + firstIFDOffset;\n                }\n              }\n            }\n        }\n      }\n\n      if (ifdStart) {\n        var _length = dataView.getUint16(ifdStart, littleEndian);\n\n        var _offset;\n\n        var i;\n\n        for (i = 0; i < _length; i += 1) {\n          _offset = ifdStart + i * 12 + 2;\n\n          if (dataView.getUint16(_offset, littleEndian) === 0x0112\n          /* Orientation */\n          ) {\n              // 8 is the offset of the current tag's value\n              _offset += 8; // Get the original orientation value\n\n              orientation = dataView.getUint16(_offset, littleEndian); // Override the orientation with its default value\n\n              dataView.setUint16(_offset, 1, littleEndian);\n              break;\n            }\n        }\n      }\n    } catch (error) {\n      orientation = 1;\n    }\n\n    return orientation;\n  }\n  /**\n   * Parse Exif Orientation value.\n   * @param {number} orientation - The orientation to parse.\n   * @returns {Object} The parsed result.\n   */\n\n  function parseOrientation(orientation) {\n    var rotate = 0;\n    var scaleX = 1;\n    var scaleY = 1;\n\n    switch (orientation) {\n      // Flip horizontal\n      case 2:\n        scaleX = -1;\n        break;\n      // Rotate left 180°\n\n      case 3:\n        rotate = -180;\n        break;\n      // Flip vertical\n\n      case 4:\n        scaleY = -1;\n        break;\n      // Flip vertical and rotate right 90°\n\n      case 5:\n        rotate = 90;\n        scaleY = -1;\n        break;\n      // Rotate right 90°\n\n      case 6:\n        rotate = 90;\n        break;\n      // Flip horizontal and rotate right 90°\n\n      case 7:\n        rotate = 90;\n        scaleX = -1;\n        break;\n      // Rotate left 90°\n\n      case 8:\n        rotate = -90;\n        break;\n\n      default:\n    }\n\n    return {\n      rotate: rotate,\n      scaleX: scaleX,\n      scaleY: scaleY\n    };\n  }\n\n  var render = {\n    render: function render() {\n      this.initContainer();\n      this.initCanvas();\n      this.initCropBox();\n      this.renderCanvas();\n\n      if (this.cropped) {\n        this.renderCropBox();\n      }\n    },\n    initContainer: function initContainer() {\n      var element = this.element,\n          options = this.options,\n          container = this.container,\n          cropper = this.cropper;\n      addClass(cropper, CLASS_HIDDEN);\n      removeClass(element, CLASS_HIDDEN);\n      var containerData = {\n        width: Math.max(container.offsetWidth, Number(options.minContainerWidth) || 200),\n        height: Math.max(container.offsetHeight, Number(options.minContainerHeight) || 100)\n      };\n      this.containerData = containerData;\n      setStyle(cropper, {\n        width: containerData.width,\n        height: containerData.height\n      });\n      addClass(element, CLASS_HIDDEN);\n      removeClass(cropper, CLASS_HIDDEN);\n    },\n    // Canvas (image wrapper)\n    initCanvas: function initCanvas() {\n      var containerData = this.containerData,\n          imageData = this.imageData;\n      var viewMode = this.options.viewMode;\n      var rotated = Math.abs(imageData.rotate) % 180 === 90;\n      var naturalWidth = rotated ? imageData.naturalHeight : imageData.naturalWidth;\n      var naturalHeight = rotated ? imageData.naturalWidth : imageData.naturalHeight;\n      var aspectRatio = naturalWidth / naturalHeight;\n      var canvasWidth = containerData.width;\n      var canvasHeight = containerData.height;\n\n      if (containerData.height * aspectRatio > containerData.width) {\n        if (viewMode === 3) {\n          canvasWidth = containerData.height * aspectRatio;\n        } else {\n          canvasHeight = containerData.width / aspectRatio;\n        }\n      } else if (viewMode === 3) {\n        canvasHeight = containerData.width / aspectRatio;\n      } else {\n        canvasWidth = containerData.height * aspectRatio;\n      }\n\n      var canvasData = {\n        aspectRatio: aspectRatio,\n        naturalWidth: naturalWidth,\n        naturalHeight: naturalHeight,\n        width: canvasWidth,\n        height: canvasHeight\n      };\n      canvasData.left = (containerData.width - canvasWidth) / 2;\n      canvasData.top = (containerData.height - canvasHeight) / 2;\n      canvasData.oldLeft = canvasData.left;\n      canvasData.oldTop = canvasData.top;\n      this.canvasData = canvasData;\n      this.limited = viewMode === 1 || viewMode === 2;\n      this.limitCanvas(true, true);\n      this.initialImageData = assign({}, imageData);\n      this.initialCanvasData = assign({}, canvasData);\n    },\n    limitCanvas: function limitCanvas(sizeLimited, positionLimited) {\n      var options = this.options,\n          containerData = this.containerData,\n          canvasData = this.canvasData,\n          cropBoxData = this.cropBoxData;\n      var viewMode = options.viewMode;\n      var aspectRatio = canvasData.aspectRatio;\n      var cropped = this.cropped && cropBoxData;\n\n      if (sizeLimited) {\n        var minCanvasWidth = Number(options.minCanvasWidth) || 0;\n        var minCanvasHeight = Number(options.minCanvasHeight) || 0;\n\n        if (viewMode > 1) {\n          minCanvasWidth = Math.max(minCanvasWidth, containerData.width);\n          minCanvasHeight = Math.max(minCanvasHeight, containerData.height);\n\n          if (viewMode === 3) {\n            if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n              minCanvasWidth = minCanvasHeight * aspectRatio;\n            } else {\n              minCanvasHeight = minCanvasWidth / aspectRatio;\n            }\n          }\n        } else if (viewMode > 0) {\n          if (minCanvasWidth) {\n            minCanvasWidth = Math.max(minCanvasWidth, cropped ? cropBoxData.width : 0);\n          } else if (minCanvasHeight) {\n            minCanvasHeight = Math.max(minCanvasHeight, cropped ? cropBoxData.height : 0);\n          } else if (cropped) {\n            minCanvasWidth = cropBoxData.width;\n            minCanvasHeight = cropBoxData.height;\n\n            if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n              minCanvasWidth = minCanvasHeight * aspectRatio;\n            } else {\n              minCanvasHeight = minCanvasWidth / aspectRatio;\n            }\n          }\n        }\n\n        var _getAdjustedSizes = getAdjustedSizes({\n          aspectRatio: aspectRatio,\n          width: minCanvasWidth,\n          height: minCanvasHeight\n        });\n\n        minCanvasWidth = _getAdjustedSizes.width;\n        minCanvasHeight = _getAdjustedSizes.height;\n        canvasData.minWidth = minCanvasWidth;\n        canvasData.minHeight = minCanvasHeight;\n        canvasData.maxWidth = Infinity;\n        canvasData.maxHeight = Infinity;\n      }\n\n      if (positionLimited) {\n        if (viewMode > (cropped ? 0 : 1)) {\n          var newCanvasLeft = containerData.width - canvasData.width;\n          var newCanvasTop = containerData.height - canvasData.height;\n          canvasData.minLeft = Math.min(0, newCanvasLeft);\n          canvasData.minTop = Math.min(0, newCanvasTop);\n          canvasData.maxLeft = Math.max(0, newCanvasLeft);\n          canvasData.maxTop = Math.max(0, newCanvasTop);\n\n          if (cropped && this.limited) {\n            canvasData.minLeft = Math.min(cropBoxData.left, cropBoxData.left + (cropBoxData.width - canvasData.width));\n            canvasData.minTop = Math.min(cropBoxData.top, cropBoxData.top + (cropBoxData.height - canvasData.height));\n            canvasData.maxLeft = cropBoxData.left;\n            canvasData.maxTop = cropBoxData.top;\n\n            if (viewMode === 2) {\n              if (canvasData.width >= containerData.width) {\n                canvasData.minLeft = Math.min(0, newCanvasLeft);\n                canvasData.maxLeft = Math.max(0, newCanvasLeft);\n              }\n\n              if (canvasData.height >= containerData.height) {\n                canvasData.minTop = Math.min(0, newCanvasTop);\n                canvasData.maxTop = Math.max(0, newCanvasTop);\n              }\n            }\n          }\n        } else {\n          canvasData.minLeft = -canvasData.width;\n          canvasData.minTop = -canvasData.height;\n          canvasData.maxLeft = containerData.width;\n          canvasData.maxTop = containerData.height;\n        }\n      }\n    },\n    renderCanvas: function renderCanvas(changed, transformed) {\n      var canvasData = this.canvasData,\n          imageData = this.imageData;\n\n      if (transformed) {\n        var _getRotatedSizes = getRotatedSizes({\n          width: imageData.naturalWidth * Math.abs(imageData.scaleX || 1),\n          height: imageData.naturalHeight * Math.abs(imageData.scaleY || 1),\n          degree: imageData.rotate || 0\n        }),\n            naturalWidth = _getRotatedSizes.width,\n            naturalHeight = _getRotatedSizes.height;\n\n        var width = canvasData.width * (naturalWidth / canvasData.naturalWidth);\n        var height = canvasData.height * (naturalHeight / canvasData.naturalHeight);\n        canvasData.left -= (width - canvasData.width) / 2;\n        canvasData.top -= (height - canvasData.height) / 2;\n        canvasData.width = width;\n        canvasData.height = height;\n        canvasData.aspectRatio = naturalWidth / naturalHeight;\n        canvasData.naturalWidth = naturalWidth;\n        canvasData.naturalHeight = naturalHeight;\n        this.limitCanvas(true, false);\n      }\n\n      if (canvasData.width > canvasData.maxWidth || canvasData.width < canvasData.minWidth) {\n        canvasData.left = canvasData.oldLeft;\n      }\n\n      if (canvasData.height > canvasData.maxHeight || canvasData.height < canvasData.minHeight) {\n        canvasData.top = canvasData.oldTop;\n      }\n\n      canvasData.width = Math.min(Math.max(canvasData.width, canvasData.minWidth), canvasData.maxWidth);\n      canvasData.height = Math.min(Math.max(canvasData.height, canvasData.minHeight), canvasData.maxHeight);\n      this.limitCanvas(false, true);\n      canvasData.left = Math.min(Math.max(canvasData.left, canvasData.minLeft), canvasData.maxLeft);\n      canvasData.top = Math.min(Math.max(canvasData.top, canvasData.minTop), canvasData.maxTop);\n      canvasData.oldLeft = canvasData.left;\n      canvasData.oldTop = canvasData.top;\n      setStyle(this.canvas, assign({\n        width: canvasData.width,\n        height: canvasData.height\n      }, getTransforms({\n        translateX: canvasData.left,\n        translateY: canvasData.top\n      })));\n      this.renderImage(changed);\n\n      if (this.cropped && this.limited) {\n        this.limitCropBox(true, true);\n      }\n    },\n    renderImage: function renderImage(changed) {\n      var canvasData = this.canvasData,\n          imageData = this.imageData;\n      var width = imageData.naturalWidth * (canvasData.width / canvasData.naturalWidth);\n      var height = imageData.naturalHeight * (canvasData.height / canvasData.naturalHeight);\n      assign(imageData, {\n        width: width,\n        height: height,\n        left: (canvasData.width - width) / 2,\n        top: (canvasData.height - height) / 2\n      });\n      setStyle(this.image, assign({\n        width: imageData.width,\n        height: imageData.height\n      }, getTransforms(assign({\n        translateX: imageData.left,\n        translateY: imageData.top\n      }, imageData))));\n\n      if (changed) {\n        this.output();\n      }\n    },\n    initCropBox: function initCropBox() {\n      var options = this.options,\n          canvasData = this.canvasData;\n      var aspectRatio = options.aspectRatio || options.initialAspectRatio;\n      var autoCropArea = Number(options.autoCropArea) || 0.8;\n      var cropBoxData = {\n        width: canvasData.width,\n        height: canvasData.height\n      };\n\n      if (aspectRatio) {\n        if (canvasData.height * aspectRatio > canvasData.width) {\n          cropBoxData.height = cropBoxData.width / aspectRatio;\n        } else {\n          cropBoxData.width = cropBoxData.height * aspectRatio;\n        }\n      }\n\n      this.cropBoxData = cropBoxData;\n      this.limitCropBox(true, true); // Initialize auto crop area\n\n      cropBoxData.width = Math.min(Math.max(cropBoxData.width, cropBoxData.minWidth), cropBoxData.maxWidth);\n      cropBoxData.height = Math.min(Math.max(cropBoxData.height, cropBoxData.minHeight), cropBoxData.maxHeight); // The width/height of auto crop area must large than \"minWidth/Height\"\n\n      cropBoxData.width = Math.max(cropBoxData.minWidth, cropBoxData.width * autoCropArea);\n      cropBoxData.height = Math.max(cropBoxData.minHeight, cropBoxData.height * autoCropArea);\n      cropBoxData.left = canvasData.left + (canvasData.width - cropBoxData.width) / 2;\n      cropBoxData.top = canvasData.top + (canvasData.height - cropBoxData.height) / 2;\n      cropBoxData.oldLeft = cropBoxData.left;\n      cropBoxData.oldTop = cropBoxData.top;\n      this.initialCropBoxData = assign({}, cropBoxData);\n    },\n    limitCropBox: function limitCropBox(sizeLimited, positionLimited) {\n      var options = this.options,\n          containerData = this.containerData,\n          canvasData = this.canvasData,\n          cropBoxData = this.cropBoxData,\n          limited = this.limited;\n      var aspectRatio = options.aspectRatio;\n\n      if (sizeLimited) {\n        var minCropBoxWidth = Number(options.minCropBoxWidth) || 0;\n        var minCropBoxHeight = Number(options.minCropBoxHeight) || 0;\n        var maxCropBoxWidth = limited ? Math.min(containerData.width, canvasData.width, canvasData.width + canvasData.left, containerData.width - canvasData.left) : containerData.width;\n        var maxCropBoxHeight = limited ? Math.min(containerData.height, canvasData.height, canvasData.height + canvasData.top, containerData.height - canvasData.top) : containerData.height; // The min/maxCropBoxWidth/Height must be less than container's width/height\n\n        minCropBoxWidth = Math.min(minCropBoxWidth, containerData.width);\n        minCropBoxHeight = Math.min(minCropBoxHeight, containerData.height);\n\n        if (aspectRatio) {\n          if (minCropBoxWidth && minCropBoxHeight) {\n            if (minCropBoxHeight * aspectRatio > minCropBoxWidth) {\n              minCropBoxHeight = minCropBoxWidth / aspectRatio;\n            } else {\n              minCropBoxWidth = minCropBoxHeight * aspectRatio;\n            }\n          } else if (minCropBoxWidth) {\n            minCropBoxHeight = minCropBoxWidth / aspectRatio;\n          } else if (minCropBoxHeight) {\n            minCropBoxWidth = minCropBoxHeight * aspectRatio;\n          }\n\n          if (maxCropBoxHeight * aspectRatio > maxCropBoxWidth) {\n            maxCropBoxHeight = maxCropBoxWidth / aspectRatio;\n          } else {\n            maxCropBoxWidth = maxCropBoxHeight * aspectRatio;\n          }\n        } // The minWidth/Height must be less than maxWidth/Height\n\n\n        cropBoxData.minWidth = Math.min(minCropBoxWidth, maxCropBoxWidth);\n        cropBoxData.minHeight = Math.min(minCropBoxHeight, maxCropBoxHeight);\n        cropBoxData.maxWidth = maxCropBoxWidth;\n        cropBoxData.maxHeight = maxCropBoxHeight;\n      }\n\n      if (positionLimited) {\n        if (limited) {\n          cropBoxData.minLeft = Math.max(0, canvasData.left);\n          cropBoxData.minTop = Math.max(0, canvasData.top);\n          cropBoxData.maxLeft = Math.min(containerData.width, canvasData.left + canvasData.width) - cropBoxData.width;\n          cropBoxData.maxTop = Math.min(containerData.height, canvasData.top + canvasData.height) - cropBoxData.height;\n        } else {\n          cropBoxData.minLeft = 0;\n          cropBoxData.minTop = 0;\n          cropBoxData.maxLeft = containerData.width - cropBoxData.width;\n          cropBoxData.maxTop = containerData.height - cropBoxData.height;\n        }\n      }\n    },\n    renderCropBox: function renderCropBox() {\n      var options = this.options,\n          containerData = this.containerData,\n          cropBoxData = this.cropBoxData;\n\n      if (cropBoxData.width > cropBoxData.maxWidth || cropBoxData.width < cropBoxData.minWidth) {\n        cropBoxData.left = cropBoxData.oldLeft;\n      }\n\n      if (cropBoxData.height > cropBoxData.maxHeight || cropBoxData.height < cropBoxData.minHeight) {\n        cropBoxData.top = cropBoxData.oldTop;\n      }\n\n      cropBoxData.width = Math.min(Math.max(cropBoxData.width, cropBoxData.minWidth), cropBoxData.maxWidth);\n      cropBoxData.height = Math.min(Math.max(cropBoxData.height, cropBoxData.minHeight), cropBoxData.maxHeight);\n      this.limitCropBox(false, true);\n      cropBoxData.left = Math.min(Math.max(cropBoxData.left, cropBoxData.minLeft), cropBoxData.maxLeft);\n      cropBoxData.top = Math.min(Math.max(cropBoxData.top, cropBoxData.minTop), cropBoxData.maxTop);\n      cropBoxData.oldLeft = cropBoxData.left;\n      cropBoxData.oldTop = cropBoxData.top;\n\n      if (options.movable && options.cropBoxMovable) {\n        // Turn to move the canvas when the crop box is equal to the container\n        setData(this.face, DATA_ACTION, cropBoxData.width >= containerData.width && cropBoxData.height >= containerData.height ? ACTION_MOVE : ACTION_ALL);\n      }\n\n      setStyle(this.cropBox, assign({\n        width: cropBoxData.width,\n        height: cropBoxData.height\n      }, getTransforms({\n        translateX: cropBoxData.left,\n        translateY: cropBoxData.top\n      })));\n\n      if (this.cropped && this.limited) {\n        this.limitCanvas(true, true);\n      }\n\n      if (!this.disabled) {\n        this.output();\n      }\n    },\n    output: function output() {\n      this.preview();\n      dispatchEvent(this.element, EVENT_CROP, this.getData());\n    }\n  };\n\n  var preview = {\n    initPreview: function initPreview() {\n      var element = this.element,\n          crossOrigin = this.crossOrigin;\n      var preview = this.options.preview;\n      var url = crossOrigin ? this.crossOriginUrl : this.url;\n      var alt = element.alt || 'The image to preview';\n      var image = document.createElement('img');\n\n      if (crossOrigin) {\n        image.crossOrigin = crossOrigin;\n      }\n\n      image.src = url;\n      image.alt = alt;\n      this.viewBox.appendChild(image);\n      this.viewBoxImage = image;\n\n      if (!preview) {\n        return;\n      }\n\n      var previews = preview;\n\n      if (typeof preview === 'string') {\n        previews = element.ownerDocument.querySelectorAll(preview);\n      } else if (preview.querySelector) {\n        previews = [preview];\n      }\n\n      this.previews = previews;\n      forEach(previews, function (el) {\n        var img = document.createElement('img'); // Save the original size for recover\n\n        setData(el, DATA_PREVIEW, {\n          width: el.offsetWidth,\n          height: el.offsetHeight,\n          html: el.innerHTML\n        });\n\n        if (crossOrigin) {\n          img.crossOrigin = crossOrigin;\n        }\n\n        img.src = url;\n        img.alt = alt;\n        /**\n         * Override img element styles\n         * Add `display:block` to avoid margin top issue\n         * Add `height:auto` to override `height` attribute on IE8\n         * (Occur only when margin-top <= -height)\n         */\n\n        img.style.cssText = 'display:block;' + 'width:100%;' + 'height:auto;' + 'min-width:0!important;' + 'min-height:0!important;' + 'max-width:none!important;' + 'max-height:none!important;' + 'image-orientation:0deg!important;\"';\n        el.innerHTML = '';\n        el.appendChild(img);\n      });\n    },\n    resetPreview: function resetPreview() {\n      forEach(this.previews, function (element) {\n        var data = getData(element, DATA_PREVIEW);\n        setStyle(element, {\n          width: data.width,\n          height: data.height\n        });\n        element.innerHTML = data.html;\n        removeData(element, DATA_PREVIEW);\n      });\n    },\n    preview: function preview() {\n      var imageData = this.imageData,\n          canvasData = this.canvasData,\n          cropBoxData = this.cropBoxData;\n      var cropBoxWidth = cropBoxData.width,\n          cropBoxHeight = cropBoxData.height;\n      var width = imageData.width,\n          height = imageData.height;\n      var left = cropBoxData.left - canvasData.left - imageData.left;\n      var top = cropBoxData.top - canvasData.top - imageData.top;\n\n      if (!this.cropped || this.disabled) {\n        return;\n      }\n\n      setStyle(this.viewBoxImage, assign({\n        width: width,\n        height: height\n      }, getTransforms(assign({\n        translateX: -left,\n        translateY: -top\n      }, imageData))));\n      forEach(this.previews, function (element) {\n        var data = getData(element, DATA_PREVIEW);\n        var originalWidth = data.width;\n        var originalHeight = data.height;\n        var newWidth = originalWidth;\n        var newHeight = originalHeight;\n        var ratio = 1;\n\n        if (cropBoxWidth) {\n          ratio = originalWidth / cropBoxWidth;\n          newHeight = cropBoxHeight * ratio;\n        }\n\n        if (cropBoxHeight && newHeight > originalHeight) {\n          ratio = originalHeight / cropBoxHeight;\n          newWidth = cropBoxWidth * ratio;\n          newHeight = originalHeight;\n        }\n\n        setStyle(element, {\n          width: newWidth,\n          height: newHeight\n        });\n        setStyle(element.getElementsByTagName('img')[0], assign({\n          width: width * ratio,\n          height: height * ratio\n        }, getTransforms(assign({\n          translateX: -left * ratio,\n          translateY: -top * ratio\n        }, imageData))));\n      });\n    }\n  };\n\n  var events = {\n    bind: function bind() {\n      var element = this.element,\n          options = this.options,\n          cropper = this.cropper;\n\n      if (isFunction(options.cropstart)) {\n        addListener(element, EVENT_CROP_START, options.cropstart);\n      }\n\n      if (isFunction(options.cropmove)) {\n        addListener(element, EVENT_CROP_MOVE, options.cropmove);\n      }\n\n      if (isFunction(options.cropend)) {\n        addListener(element, EVENT_CROP_END, options.cropend);\n      }\n\n      if (isFunction(options.crop)) {\n        addListener(element, EVENT_CROP, options.crop);\n      }\n\n      if (isFunction(options.zoom)) {\n        addListener(element, EVENT_ZOOM, options.zoom);\n      }\n\n      addListener(cropper, EVENT_POINTER_DOWN, this.onCropStart = this.cropStart.bind(this));\n\n      if (options.zoomable && options.zoomOnWheel) {\n        addListener(cropper, EVENT_WHEEL, this.onWheel = this.wheel.bind(this), {\n          passive: false,\n          capture: true\n        });\n      }\n\n      if (options.toggleDragModeOnDblclick) {\n        addListener(cropper, EVENT_DBLCLICK, this.onDblclick = this.dblclick.bind(this));\n      }\n\n      addListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onCropMove = this.cropMove.bind(this));\n      addListener(element.ownerDocument, EVENT_POINTER_UP, this.onCropEnd = this.cropEnd.bind(this));\n\n      if (options.responsive) {\n        addListener(window, EVENT_RESIZE, this.onResize = this.resize.bind(this));\n      }\n    },\n    unbind: function unbind() {\n      var element = this.element,\n          options = this.options,\n          cropper = this.cropper;\n\n      if (isFunction(options.cropstart)) {\n        removeListener(element, EVENT_CROP_START, options.cropstart);\n      }\n\n      if (isFunction(options.cropmove)) {\n        removeListener(element, EVENT_CROP_MOVE, options.cropmove);\n      }\n\n      if (isFunction(options.cropend)) {\n        removeListener(element, EVENT_CROP_END, options.cropend);\n      }\n\n      if (isFunction(options.crop)) {\n        removeListener(element, EVENT_CROP, options.crop);\n      }\n\n      if (isFunction(options.zoom)) {\n        removeListener(element, EVENT_ZOOM, options.zoom);\n      }\n\n      removeListener(cropper, EVENT_POINTER_DOWN, this.onCropStart);\n\n      if (options.zoomable && options.zoomOnWheel) {\n        removeListener(cropper, EVENT_WHEEL, this.onWheel, {\n          passive: false,\n          capture: true\n        });\n      }\n\n      if (options.toggleDragModeOnDblclick) {\n        removeListener(cropper, EVENT_DBLCLICK, this.onDblclick);\n      }\n\n      removeListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onCropMove);\n      removeListener(element.ownerDocument, EVENT_POINTER_UP, this.onCropEnd);\n\n      if (options.responsive) {\n        removeListener(window, EVENT_RESIZE, this.onResize);\n      }\n    }\n  };\n\n  var handlers = {\n    resize: function resize() {\n      var options = this.options,\n          container = this.container,\n          containerData = this.containerData;\n      var minContainerWidth = Number(options.minContainerWidth) || MIN_CONTAINER_WIDTH;\n      var minContainerHeight = Number(options.minContainerHeight) || MIN_CONTAINER_HEIGHT;\n\n      if (this.disabled || containerData.width <= minContainerWidth || containerData.height <= minContainerHeight) {\n        return;\n      }\n\n      var ratio = container.offsetWidth / containerData.width; // Resize when width changed or height changed\n\n      if (ratio !== 1 || container.offsetHeight !== containerData.height) {\n        var canvasData;\n        var cropBoxData;\n\n        if (options.restore) {\n          canvasData = this.getCanvasData();\n          cropBoxData = this.getCropBoxData();\n        }\n\n        this.render();\n\n        if (options.restore) {\n          this.setCanvasData(forEach(canvasData, function (n, i) {\n            canvasData[i] = n * ratio;\n          }));\n          this.setCropBoxData(forEach(cropBoxData, function (n, i) {\n            cropBoxData[i] = n * ratio;\n          }));\n        }\n      }\n    },\n    dblclick: function dblclick() {\n      if (this.disabled || this.options.dragMode === DRAG_MODE_NONE) {\n        return;\n      }\n\n      this.setDragMode(hasClass(this.dragBox, CLASS_CROP) ? DRAG_MODE_MOVE : DRAG_MODE_CROP);\n    },\n    wheel: function wheel(event) {\n      var _this = this;\n\n      var ratio = Number(this.options.wheelZoomRatio) || 0.1;\n      var delta = 1;\n\n      if (this.disabled) {\n        return;\n      }\n\n      event.preventDefault(); // Limit wheel speed to prevent zoom too fast (#21)\n\n      if (this.wheeling) {\n        return;\n      }\n\n      this.wheeling = true;\n      setTimeout(function () {\n        _this.wheeling = false;\n      }, 50);\n\n      if (event.deltaY) {\n        delta = event.deltaY > 0 ? 1 : -1;\n      } else if (event.wheelDelta) {\n        delta = -event.wheelDelta / 120;\n      } else if (event.detail) {\n        delta = event.detail > 0 ? 1 : -1;\n      }\n\n      this.zoom(-delta * ratio, event);\n    },\n    cropStart: function cropStart(event) {\n      var buttons = event.buttons,\n          button = event.button;\n\n      if (this.disabled // No primary button (Usually the left button)\n      // Note that touch events have no `buttons` or `button` property\n      || isNumber(buttons) && buttons !== 1 || isNumber(button) && button !== 0 // Open context menu\n      || event.ctrlKey) {\n        return;\n      }\n\n      var options = this.options,\n          pointers = this.pointers;\n      var action;\n\n      if (event.changedTouches) {\n        // Handle touch event\n        forEach(event.changedTouches, function (touch) {\n          pointers[touch.identifier] = getPointer(touch);\n        });\n      } else {\n        // Handle mouse event and pointer event\n        pointers[event.pointerId || 0] = getPointer(event);\n      }\n\n      if (Object.keys(pointers).length > 1 && options.zoomable && options.zoomOnTouch) {\n        action = ACTION_ZOOM;\n      } else {\n        action = getData(event.target, DATA_ACTION);\n      }\n\n      if (!REGEXP_ACTIONS.test(action)) {\n        return;\n      }\n\n      if (dispatchEvent(this.element, EVENT_CROP_START, {\n        originalEvent: event,\n        action: action\n      }) === false) {\n        return;\n      } // This line is required for preventing page zooming in iOS browsers\n\n\n      event.preventDefault();\n      this.action = action;\n      this.cropping = false;\n\n      if (action === ACTION_CROP) {\n        this.cropping = true;\n        addClass(this.dragBox, CLASS_MODAL);\n      }\n    },\n    cropMove: function cropMove(event) {\n      var action = this.action;\n\n      if (this.disabled || !action) {\n        return;\n      }\n\n      var pointers = this.pointers;\n      event.preventDefault();\n\n      if (dispatchEvent(this.element, EVENT_CROP_MOVE, {\n        originalEvent: event,\n        action: action\n      }) === false) {\n        return;\n      }\n\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          // The first parameter should not be undefined (#432)\n          assign(pointers[touch.identifier] || {}, getPointer(touch, true));\n        });\n      } else {\n        assign(pointers[event.pointerId || 0] || {}, getPointer(event, true));\n      }\n\n      this.change(event);\n    },\n    cropEnd: function cropEnd(event) {\n      if (this.disabled) {\n        return;\n      }\n\n      var action = this.action,\n          pointers = this.pointers;\n\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          delete pointers[touch.identifier];\n        });\n      } else {\n        delete pointers[event.pointerId || 0];\n      }\n\n      if (!action) {\n        return;\n      }\n\n      event.preventDefault();\n\n      if (!Object.keys(pointers).length) {\n        this.action = '';\n      }\n\n      if (this.cropping) {\n        this.cropping = false;\n        toggleClass(this.dragBox, CLASS_MODAL, this.cropped && this.options.modal);\n      }\n\n      dispatchEvent(this.element, EVENT_CROP_END, {\n        originalEvent: event,\n        action: action\n      });\n    }\n  };\n\n  var change = {\n    change: function change(event) {\n      var options = this.options,\n          canvasData = this.canvasData,\n          containerData = this.containerData,\n          cropBoxData = this.cropBoxData,\n          pointers = this.pointers;\n      var action = this.action;\n      var aspectRatio = options.aspectRatio;\n      var left = cropBoxData.left,\n          top = cropBoxData.top,\n          width = cropBoxData.width,\n          height = cropBoxData.height;\n      var right = left + width;\n      var bottom = top + height;\n      var minLeft = 0;\n      var minTop = 0;\n      var maxWidth = containerData.width;\n      var maxHeight = containerData.height;\n      var renderable = true;\n      var offset; // Locking aspect ratio in \"free mode\" by holding shift key\n\n      if (!aspectRatio && event.shiftKey) {\n        aspectRatio = width && height ? width / height : 1;\n      }\n\n      if (this.limited) {\n        minLeft = cropBoxData.minLeft;\n        minTop = cropBoxData.minTop;\n        maxWidth = minLeft + Math.min(containerData.width, canvasData.width, canvasData.left + canvasData.width);\n        maxHeight = minTop + Math.min(containerData.height, canvasData.height, canvasData.top + canvasData.height);\n      }\n\n      var pointer = pointers[Object.keys(pointers)[0]];\n      var range = {\n        x: pointer.endX - pointer.startX,\n        y: pointer.endY - pointer.startY\n      };\n\n      var check = function check(side) {\n        switch (side) {\n          case ACTION_EAST:\n            if (right + range.x > maxWidth) {\n              range.x = maxWidth - right;\n            }\n\n            break;\n\n          case ACTION_WEST:\n            if (left + range.x < minLeft) {\n              range.x = minLeft - left;\n            }\n\n            break;\n\n          case ACTION_NORTH:\n            if (top + range.y < minTop) {\n              range.y = minTop - top;\n            }\n\n            break;\n\n          case ACTION_SOUTH:\n            if (bottom + range.y > maxHeight) {\n              range.y = maxHeight - bottom;\n            }\n\n            break;\n\n          default:\n        }\n      };\n\n      switch (action) {\n        // Move crop box\n        case ACTION_ALL:\n          left += range.x;\n          top += range.y;\n          break;\n        // Resize crop box\n\n        case ACTION_EAST:\n          if (range.x >= 0 && (right >= maxWidth || aspectRatio && (top <= minTop || bottom >= maxHeight))) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_EAST);\n          width += range.x;\n\n          if (width < 0) {\n            action = ACTION_WEST;\n            width = -width;\n            left -= width;\n          }\n\n          if (aspectRatio) {\n            height = width / aspectRatio;\n            top += (cropBoxData.height - height) / 2;\n          }\n\n          break;\n\n        case ACTION_NORTH:\n          if (range.y <= 0 && (top <= minTop || aspectRatio && (left <= minLeft || right >= maxWidth))) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_NORTH);\n          height -= range.y;\n          top += range.y;\n\n          if (height < 0) {\n            action = ACTION_SOUTH;\n            height = -height;\n            top -= height;\n          }\n\n          if (aspectRatio) {\n            width = height * aspectRatio;\n            left += (cropBoxData.width - width) / 2;\n          }\n\n          break;\n\n        case ACTION_WEST:\n          if (range.x <= 0 && (left <= minLeft || aspectRatio && (top <= minTop || bottom >= maxHeight))) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_WEST);\n          width -= range.x;\n          left += range.x;\n\n          if (width < 0) {\n            action = ACTION_EAST;\n            width = -width;\n            left -= width;\n          }\n\n          if (aspectRatio) {\n            height = width / aspectRatio;\n            top += (cropBoxData.height - height) / 2;\n          }\n\n          break;\n\n        case ACTION_SOUTH:\n          if (range.y >= 0 && (bottom >= maxHeight || aspectRatio && (left <= minLeft || right >= maxWidth))) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_SOUTH);\n          height += range.y;\n\n          if (height < 0) {\n            action = ACTION_NORTH;\n            height = -height;\n            top -= height;\n          }\n\n          if (aspectRatio) {\n            width = height * aspectRatio;\n            left += (cropBoxData.width - width) / 2;\n          }\n\n          break;\n\n        case ACTION_NORTH_EAST:\n          if (aspectRatio) {\n            if (range.y <= 0 && (top <= minTop || right >= maxWidth)) {\n              renderable = false;\n              break;\n            }\n\n            check(ACTION_NORTH);\n            height -= range.y;\n            top += range.y;\n            width = height * aspectRatio;\n          } else {\n            check(ACTION_NORTH);\n            check(ACTION_EAST);\n\n            if (range.x >= 0) {\n              if (right < maxWidth) {\n                width += range.x;\n              } else if (range.y <= 0 && top <= minTop) {\n                renderable = false;\n              }\n            } else {\n              width += range.x;\n            }\n\n            if (range.y <= 0) {\n              if (top > minTop) {\n                height -= range.y;\n                top += range.y;\n              }\n            } else {\n              height -= range.y;\n              top += range.y;\n            }\n          }\n\n          if (width < 0 && height < 0) {\n            action = ACTION_SOUTH_WEST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_NORTH_WEST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_SOUTH_EAST;\n            height = -height;\n            top -= height;\n          }\n\n          break;\n\n        case ACTION_NORTH_WEST:\n          if (aspectRatio) {\n            if (range.y <= 0 && (top <= minTop || left <= minLeft)) {\n              renderable = false;\n              break;\n            }\n\n            check(ACTION_NORTH);\n            height -= range.y;\n            top += range.y;\n            width = height * aspectRatio;\n            left += cropBoxData.width - width;\n          } else {\n            check(ACTION_NORTH);\n            check(ACTION_WEST);\n\n            if (range.x <= 0) {\n              if (left > minLeft) {\n                width -= range.x;\n                left += range.x;\n              } else if (range.y <= 0 && top <= minTop) {\n                renderable = false;\n              }\n            } else {\n              width -= range.x;\n              left += range.x;\n            }\n\n            if (range.y <= 0) {\n              if (top > minTop) {\n                height -= range.y;\n                top += range.y;\n              }\n            } else {\n              height -= range.y;\n              top += range.y;\n            }\n          }\n\n          if (width < 0 && height < 0) {\n            action = ACTION_SOUTH_EAST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_NORTH_EAST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_SOUTH_WEST;\n            height = -height;\n            top -= height;\n          }\n\n          break;\n\n        case ACTION_SOUTH_WEST:\n          if (aspectRatio) {\n            if (range.x <= 0 && (left <= minLeft || bottom >= maxHeight)) {\n              renderable = false;\n              break;\n            }\n\n            check(ACTION_WEST);\n            width -= range.x;\n            left += range.x;\n            height = width / aspectRatio;\n          } else {\n            check(ACTION_SOUTH);\n            check(ACTION_WEST);\n\n            if (range.x <= 0) {\n              if (left > minLeft) {\n                width -= range.x;\n                left += range.x;\n              } else if (range.y >= 0 && bottom >= maxHeight) {\n                renderable = false;\n              }\n            } else {\n              width -= range.x;\n              left += range.x;\n            }\n\n            if (range.y >= 0) {\n              if (bottom < maxHeight) {\n                height += range.y;\n              }\n            } else {\n              height += range.y;\n            }\n          }\n\n          if (width < 0 && height < 0) {\n            action = ACTION_NORTH_EAST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_SOUTH_EAST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_NORTH_WEST;\n            height = -height;\n            top -= height;\n          }\n\n          break;\n\n        case ACTION_SOUTH_EAST:\n          if (aspectRatio) {\n            if (range.x >= 0 && (right >= maxWidth || bottom >= maxHeight)) {\n              renderable = false;\n              break;\n            }\n\n            check(ACTION_EAST);\n            width += range.x;\n            height = width / aspectRatio;\n          } else {\n            check(ACTION_SOUTH);\n            check(ACTION_EAST);\n\n            if (range.x >= 0) {\n              if (right < maxWidth) {\n                width += range.x;\n              } else if (range.y >= 0 && bottom >= maxHeight) {\n                renderable = false;\n              }\n            } else {\n              width += range.x;\n            }\n\n            if (range.y >= 0) {\n              if (bottom < maxHeight) {\n                height += range.y;\n              }\n            } else {\n              height += range.y;\n            }\n          }\n\n          if (width < 0 && height < 0) {\n            action = ACTION_NORTH_WEST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_SOUTH_WEST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_NORTH_EAST;\n            height = -height;\n            top -= height;\n          }\n\n          break;\n        // Move canvas\n\n        case ACTION_MOVE:\n          this.move(range.x, range.y);\n          renderable = false;\n          break;\n        // Zoom canvas\n\n        case ACTION_ZOOM:\n          this.zoom(getMaxZoomRatio(pointers), event);\n          renderable = false;\n          break;\n        // Create crop box\n\n        case ACTION_CROP:\n          if (!range.x || !range.y) {\n            renderable = false;\n            break;\n          }\n\n          offset = getOffset(this.cropper);\n          left = pointer.startX - offset.left;\n          top = pointer.startY - offset.top;\n          width = cropBoxData.minWidth;\n          height = cropBoxData.minHeight;\n\n          if (range.x > 0) {\n            action = range.y > 0 ? ACTION_SOUTH_EAST : ACTION_NORTH_EAST;\n          } else if (range.x < 0) {\n            left -= width;\n            action = range.y > 0 ? ACTION_SOUTH_WEST : ACTION_NORTH_WEST;\n          }\n\n          if (range.y < 0) {\n            top -= height;\n          } // Show the crop box if is hidden\n\n\n          if (!this.cropped) {\n            removeClass(this.cropBox, CLASS_HIDDEN);\n            this.cropped = true;\n\n            if (this.limited) {\n              this.limitCropBox(true, true);\n            }\n          }\n\n          break;\n\n        default:\n      }\n\n      if (renderable) {\n        cropBoxData.width = width;\n        cropBoxData.height = height;\n        cropBoxData.left = left;\n        cropBoxData.top = top;\n        this.action = action;\n        this.renderCropBox();\n      } // Override\n\n\n      forEach(pointers, function (p) {\n        p.startX = p.endX;\n        p.startY = p.endY;\n      });\n    }\n  };\n\n  var methods = {\n    // Show the crop box manually\n    crop: function crop() {\n      if (this.ready && !this.cropped && !this.disabled) {\n        this.cropped = true;\n        this.limitCropBox(true, true);\n\n        if (this.options.modal) {\n          addClass(this.dragBox, CLASS_MODAL);\n        }\n\n        removeClass(this.cropBox, CLASS_HIDDEN);\n        this.setCropBoxData(this.initialCropBoxData);\n      }\n\n      return this;\n    },\n    // Reset the image and crop box to their initial states\n    reset: function reset() {\n      if (this.ready && !this.disabled) {\n        this.imageData = assign({}, this.initialImageData);\n        this.canvasData = assign({}, this.initialCanvasData);\n        this.cropBoxData = assign({}, this.initialCropBoxData);\n        this.renderCanvas();\n\n        if (this.cropped) {\n          this.renderCropBox();\n        }\n      }\n\n      return this;\n    },\n    // Clear the crop box\n    clear: function clear() {\n      if (this.cropped && !this.disabled) {\n        assign(this.cropBoxData, {\n          left: 0,\n          top: 0,\n          width: 0,\n          height: 0\n        });\n        this.cropped = false;\n        this.renderCropBox();\n        this.limitCanvas(true, true); // Render canvas after crop box rendered\n\n        this.renderCanvas();\n        removeClass(this.dragBox, CLASS_MODAL);\n        addClass(this.cropBox, CLASS_HIDDEN);\n      }\n\n      return this;\n    },\n\n    /**\n     * Replace the image's src and rebuild the cropper\n     * @param {string} url - The new URL.\n     * @param {boolean} [hasSameSize] - Indicate if the new image has the same size as the old one.\n     * @returns {Cropper} this\n     */\n    replace: function replace(url) {\n      var hasSameSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (!this.disabled && url) {\n        if (this.isImg) {\n          this.element.src = url;\n        }\n\n        if (hasSameSize) {\n          this.url = url;\n          this.image.src = url;\n\n          if (this.ready) {\n            this.viewBoxImage.src = url;\n            forEach(this.previews, function (element) {\n              element.getElementsByTagName('img')[0].src = url;\n            });\n          }\n        } else {\n          if (this.isImg) {\n            this.replaced = true;\n          }\n\n          this.options.data = null;\n          this.uncreate();\n          this.load(url);\n        }\n      }\n\n      return this;\n    },\n    // Enable (unfreeze) the cropper\n    enable: function enable() {\n      if (this.ready && this.disabled) {\n        this.disabled = false;\n        removeClass(this.cropper, CLASS_DISABLED);\n      }\n\n      return this;\n    },\n    // Disable (freeze) the cropper\n    disable: function disable() {\n      if (this.ready && !this.disabled) {\n        this.disabled = true;\n        addClass(this.cropper, CLASS_DISABLED);\n      }\n\n      return this;\n    },\n\n    /**\n     * Destroy the cropper and remove the instance from the image\n     * @returns {Cropper} this\n     */\n    destroy: function destroy() {\n      var element = this.element;\n\n      if (!element[NAMESPACE]) {\n        return this;\n      }\n\n      element[NAMESPACE] = undefined;\n\n      if (this.isImg && this.replaced) {\n        element.src = this.originalUrl;\n      }\n\n      this.uncreate();\n      return this;\n    },\n\n    /**\n     * Move the canvas with relative offsets\n     * @param {number} offsetX - The relative offset distance on the x-axis.\n     * @param {number} [offsetY=offsetX] - The relative offset distance on the y-axis.\n     * @returns {Cropper} this\n     */\n    move: function move(offsetX) {\n      var offsetY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : offsetX;\n      var _this$canvasData = this.canvasData,\n          left = _this$canvasData.left,\n          top = _this$canvasData.top;\n      return this.moveTo(isUndefined(offsetX) ? offsetX : left + Number(offsetX), isUndefined(offsetY) ? offsetY : top + Number(offsetY));\n    },\n\n    /**\n     * Move the canvas to an absolute point\n     * @param {number} x - The x-axis coordinate.\n     * @param {number} [y=x] - The y-axis coordinate.\n     * @returns {Cropper} this\n     */\n    moveTo: function moveTo(x) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x;\n      var canvasData = this.canvasData;\n      var changed = false;\n      x = Number(x);\n      y = Number(y);\n\n      if (this.ready && !this.disabled && this.options.movable) {\n        if (isNumber(x)) {\n          canvasData.left = x;\n          changed = true;\n        }\n\n        if (isNumber(y)) {\n          canvasData.top = y;\n          changed = true;\n        }\n\n        if (changed) {\n          this.renderCanvas(true);\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Zoom the canvas with a relative ratio\n     * @param {number} ratio - The target ratio.\n     * @param {Event} _originalEvent - The original event if any.\n     * @returns {Cropper} this\n     */\n    zoom: function zoom(ratio, _originalEvent) {\n      var canvasData = this.canvasData;\n      ratio = Number(ratio);\n\n      if (ratio < 0) {\n        ratio = 1 / (1 - ratio);\n      } else {\n        ratio = 1 + ratio;\n      }\n\n      return this.zoomTo(canvasData.width * ratio / canvasData.naturalWidth, null, _originalEvent);\n    },\n\n    /**\n     * Zoom the canvas to an absolute ratio\n     * @param {number} ratio - The target ratio.\n     * @param {Object} pivot - The zoom pivot point coordinate.\n     * @param {Event} _originalEvent - The original event if any.\n     * @returns {Cropper} this\n     */\n    zoomTo: function zoomTo(ratio, pivot, _originalEvent) {\n      var options = this.options,\n          canvasData = this.canvasData;\n      var width = canvasData.width,\n          height = canvasData.height,\n          naturalWidth = canvasData.naturalWidth,\n          naturalHeight = canvasData.naturalHeight;\n      ratio = Number(ratio);\n\n      if (ratio >= 0 && this.ready && !this.disabled && options.zoomable) {\n        var newWidth = naturalWidth * ratio;\n        var newHeight = naturalHeight * ratio;\n\n        if (dispatchEvent(this.element, EVENT_ZOOM, {\n          ratio: ratio,\n          oldRatio: width / naturalWidth,\n          originalEvent: _originalEvent\n        }) === false) {\n          return this;\n        }\n\n        if (_originalEvent) {\n          var pointers = this.pointers;\n          var offset = getOffset(this.cropper);\n          var center = pointers && Object.keys(pointers).length ? getPointersCenter(pointers) : {\n            pageX: _originalEvent.pageX,\n            pageY: _originalEvent.pageY\n          }; // Zoom from the triggering point of the event\n\n          canvasData.left -= (newWidth - width) * ((center.pageX - offset.left - canvasData.left) / width);\n          canvasData.top -= (newHeight - height) * ((center.pageY - offset.top - canvasData.top) / height);\n        } else if (isPlainObject(pivot) && isNumber(pivot.x) && isNumber(pivot.y)) {\n          canvasData.left -= (newWidth - width) * ((pivot.x - canvasData.left) / width);\n          canvasData.top -= (newHeight - height) * ((pivot.y - canvasData.top) / height);\n        } else {\n          // Zoom from the center of the canvas\n          canvasData.left -= (newWidth - width) / 2;\n          canvasData.top -= (newHeight - height) / 2;\n        }\n\n        canvasData.width = newWidth;\n        canvasData.height = newHeight;\n        this.renderCanvas(true);\n      }\n\n      return this;\n    },\n\n    /**\n     * Rotate the canvas with a relative degree\n     * @param {number} degree - The rotate degree.\n     * @returns {Cropper} this\n     */\n    rotate: function rotate(degree) {\n      return this.rotateTo((this.imageData.rotate || 0) + Number(degree));\n    },\n\n    /**\n     * Rotate the canvas to an absolute degree\n     * @param {number} degree - The rotate degree.\n     * @returns {Cropper} this\n     */\n    rotateTo: function rotateTo(degree) {\n      degree = Number(degree);\n\n      if (isNumber(degree) && this.ready && !this.disabled && this.options.rotatable) {\n        this.imageData.rotate = degree % 360;\n        this.renderCanvas(true, true);\n      }\n\n      return this;\n    },\n\n    /**\n     * Scale the image on the x-axis.\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @returns {Cropper} this\n     */\n    scaleX: function scaleX(_scaleX) {\n      var scaleY = this.imageData.scaleY;\n      return this.scale(_scaleX, isNumber(scaleY) ? scaleY : 1);\n    },\n\n    /**\n     * Scale the image on the y-axis.\n     * @param {number} scaleY - The scale ratio on the y-axis.\n     * @returns {Cropper} this\n     */\n    scaleY: function scaleY(_scaleY) {\n      var scaleX = this.imageData.scaleX;\n      return this.scale(isNumber(scaleX) ? scaleX : 1, _scaleY);\n    },\n\n    /**\n     * Scale the image\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @param {number} [scaleY=scaleX] - The scale ratio on the y-axis.\n     * @returns {Cropper} this\n     */\n    scale: function scale(scaleX) {\n      var scaleY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : scaleX;\n      var imageData = this.imageData;\n      var transformed = false;\n      scaleX = Number(scaleX);\n      scaleY = Number(scaleY);\n\n      if (this.ready && !this.disabled && this.options.scalable) {\n        if (isNumber(scaleX)) {\n          imageData.scaleX = scaleX;\n          transformed = true;\n        }\n\n        if (isNumber(scaleY)) {\n          imageData.scaleY = scaleY;\n          transformed = true;\n        }\n\n        if (transformed) {\n          this.renderCanvas(true, true);\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Get the cropped area position and size data (base on the original image)\n     * @param {boolean} [rounded=false] - Indicate if round the data values or not.\n     * @returns {Object} The result cropped data.\n     */\n    getData: function getData() {\n      var rounded = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var options = this.options,\n          imageData = this.imageData,\n          canvasData = this.canvasData,\n          cropBoxData = this.cropBoxData;\n      var data;\n\n      if (this.ready && this.cropped) {\n        data = {\n          x: cropBoxData.left - canvasData.left,\n          y: cropBoxData.top - canvasData.top,\n          width: cropBoxData.width,\n          height: cropBoxData.height\n        };\n        var ratio = imageData.width / imageData.naturalWidth;\n        forEach(data, function (n, i) {\n          data[i] = n / ratio;\n        });\n\n        if (rounded) {\n          // In case rounding off leads to extra 1px in right or bottom border\n          // we should round the top-left corner and the dimension (#343).\n          var bottom = Math.round(data.y + data.height);\n          var right = Math.round(data.x + data.width);\n          data.x = Math.round(data.x);\n          data.y = Math.round(data.y);\n          data.width = right - data.x;\n          data.height = bottom - data.y;\n        }\n      } else {\n        data = {\n          x: 0,\n          y: 0,\n          width: 0,\n          height: 0\n        };\n      }\n\n      if (options.rotatable) {\n        data.rotate = imageData.rotate || 0;\n      }\n\n      if (options.scalable) {\n        data.scaleX = imageData.scaleX || 1;\n        data.scaleY = imageData.scaleY || 1;\n      }\n\n      return data;\n    },\n\n    /**\n     * Set the cropped area position and size with new data\n     * @param {Object} data - The new data.\n     * @returns {Cropper} this\n     */\n    setData: function setData(data) {\n      var options = this.options,\n          imageData = this.imageData,\n          canvasData = this.canvasData;\n      var cropBoxData = {};\n\n      if (this.ready && !this.disabled && isPlainObject(data)) {\n        var transformed = false;\n\n        if (options.rotatable) {\n          if (isNumber(data.rotate) && data.rotate !== imageData.rotate) {\n            imageData.rotate = data.rotate;\n            transformed = true;\n          }\n        }\n\n        if (options.scalable) {\n          if (isNumber(data.scaleX) && data.scaleX !== imageData.scaleX) {\n            imageData.scaleX = data.scaleX;\n            transformed = true;\n          }\n\n          if (isNumber(data.scaleY) && data.scaleY !== imageData.scaleY) {\n            imageData.scaleY = data.scaleY;\n            transformed = true;\n          }\n        }\n\n        if (transformed) {\n          this.renderCanvas(true, true);\n        }\n\n        var ratio = imageData.width / imageData.naturalWidth;\n\n        if (isNumber(data.x)) {\n          cropBoxData.left = data.x * ratio + canvasData.left;\n        }\n\n        if (isNumber(data.y)) {\n          cropBoxData.top = data.y * ratio + canvasData.top;\n        }\n\n        if (isNumber(data.width)) {\n          cropBoxData.width = data.width * ratio;\n        }\n\n        if (isNumber(data.height)) {\n          cropBoxData.height = data.height * ratio;\n        }\n\n        this.setCropBoxData(cropBoxData);\n      }\n\n      return this;\n    },\n\n    /**\n     * Get the container size data.\n     * @returns {Object} The result container data.\n     */\n    getContainerData: function getContainerData() {\n      return this.ready ? assign({}, this.containerData) : {};\n    },\n\n    /**\n     * Get the image position and size data.\n     * @returns {Object} The result image data.\n     */\n    getImageData: function getImageData() {\n      return this.sized ? assign({}, this.imageData) : {};\n    },\n\n    /**\n     * Get the canvas position and size data.\n     * @returns {Object} The result canvas data.\n     */\n    getCanvasData: function getCanvasData() {\n      var canvasData = this.canvasData;\n      var data = {};\n\n      if (this.ready) {\n        forEach(['left', 'top', 'width', 'height', 'naturalWidth', 'naturalHeight'], function (n) {\n          data[n] = canvasData[n];\n        });\n      }\n\n      return data;\n    },\n\n    /**\n     * Set the canvas position and size with new data.\n     * @param {Object} data - The new canvas data.\n     * @returns {Cropper} this\n     */\n    setCanvasData: function setCanvasData(data) {\n      var canvasData = this.canvasData;\n      var aspectRatio = canvasData.aspectRatio;\n\n      if (this.ready && !this.disabled && isPlainObject(data)) {\n        if (isNumber(data.left)) {\n          canvasData.left = data.left;\n        }\n\n        if (isNumber(data.top)) {\n          canvasData.top = data.top;\n        }\n\n        if (isNumber(data.width)) {\n          canvasData.width = data.width;\n          canvasData.height = data.width / aspectRatio;\n        } else if (isNumber(data.height)) {\n          canvasData.height = data.height;\n          canvasData.width = data.height * aspectRatio;\n        }\n\n        this.renderCanvas(true);\n      }\n\n      return this;\n    },\n\n    /**\n     * Get the crop box position and size data.\n     * @returns {Object} The result crop box data.\n     */\n    getCropBoxData: function getCropBoxData() {\n      var cropBoxData = this.cropBoxData;\n      var data;\n\n      if (this.ready && this.cropped) {\n        data = {\n          left: cropBoxData.left,\n          top: cropBoxData.top,\n          width: cropBoxData.width,\n          height: cropBoxData.height\n        };\n      }\n\n      return data || {};\n    },\n\n    /**\n     * Set the crop box position and size with new data.\n     * @param {Object} data - The new crop box data.\n     * @returns {Cropper} this\n     */\n    setCropBoxData: function setCropBoxData(data) {\n      var cropBoxData = this.cropBoxData;\n      var aspectRatio = this.options.aspectRatio;\n      var widthChanged;\n      var heightChanged;\n\n      if (this.ready && this.cropped && !this.disabled && isPlainObject(data)) {\n        if (isNumber(data.left)) {\n          cropBoxData.left = data.left;\n        }\n\n        if (isNumber(data.top)) {\n          cropBoxData.top = data.top;\n        }\n\n        if (isNumber(data.width) && data.width !== cropBoxData.width) {\n          widthChanged = true;\n          cropBoxData.width = data.width;\n        }\n\n        if (isNumber(data.height) && data.height !== cropBoxData.height) {\n          heightChanged = true;\n          cropBoxData.height = data.height;\n        }\n\n        if (aspectRatio) {\n          if (widthChanged) {\n            cropBoxData.height = cropBoxData.width / aspectRatio;\n          } else if (heightChanged) {\n            cropBoxData.width = cropBoxData.height * aspectRatio;\n          }\n        }\n\n        this.renderCropBox();\n      }\n\n      return this;\n    },\n\n    /**\n     * Get a canvas drawn the cropped image.\n     * @param {Object} [options={}] - The config options.\n     * @returns {HTMLCanvasElement} - The result canvas.\n     */\n    getCroppedCanvas: function getCroppedCanvas() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (!this.ready || !window.HTMLCanvasElement) {\n        return null;\n      }\n\n      var canvasData = this.canvasData;\n      var source = getSourceCanvas(this.image, this.imageData, canvasData, options); // Returns the source canvas if it is not cropped.\n\n      if (!this.cropped) {\n        return source;\n      }\n\n      var _this$getData = this.getData(),\n          initialX = _this$getData.x,\n          initialY = _this$getData.y,\n          initialWidth = _this$getData.width,\n          initialHeight = _this$getData.height;\n\n      var ratio = source.width / Math.floor(canvasData.naturalWidth);\n\n      if (ratio !== 1) {\n        initialX *= ratio;\n        initialY *= ratio;\n        initialWidth *= ratio;\n        initialHeight *= ratio;\n      }\n\n      var aspectRatio = initialWidth / initialHeight;\n      var maxSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: options.maxWidth || Infinity,\n        height: options.maxHeight || Infinity\n      });\n      var minSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: options.minWidth || 0,\n        height: options.minHeight || 0\n      }, 'cover');\n\n      var _getAdjustedSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: options.width || (ratio !== 1 ? source.width : initialWidth),\n        height: options.height || (ratio !== 1 ? source.height : initialHeight)\n      }),\n          width = _getAdjustedSizes.width,\n          height = _getAdjustedSizes.height;\n\n      width = Math.min(maxSizes.width, Math.max(minSizes.width, width));\n      height = Math.min(maxSizes.height, Math.max(minSizes.height, height));\n      var canvas = document.createElement('canvas');\n      var context = canvas.getContext('2d');\n      canvas.width = normalizeDecimalNumber(width);\n      canvas.height = normalizeDecimalNumber(height);\n      context.fillStyle = options.fillColor || 'transparent';\n      context.fillRect(0, 0, width, height);\n      var _options$imageSmoothi = options.imageSmoothingEnabled,\n          imageSmoothingEnabled = _options$imageSmoothi === void 0 ? true : _options$imageSmoothi,\n          imageSmoothingQuality = options.imageSmoothingQuality;\n      context.imageSmoothingEnabled = imageSmoothingEnabled;\n\n      if (imageSmoothingQuality) {\n        context.imageSmoothingQuality = imageSmoothingQuality;\n      } // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D.drawImage\n\n\n      var sourceWidth = source.width;\n      var sourceHeight = source.height; // Source canvas parameters\n\n      var srcX = initialX;\n      var srcY = initialY;\n      var srcWidth;\n      var srcHeight; // Destination canvas parameters\n\n      var dstX;\n      var dstY;\n      var dstWidth;\n      var dstHeight;\n\n      if (srcX <= -initialWidth || srcX > sourceWidth) {\n        srcX = 0;\n        srcWidth = 0;\n        dstX = 0;\n        dstWidth = 0;\n      } else if (srcX <= 0) {\n        dstX = -srcX;\n        srcX = 0;\n        srcWidth = Math.min(sourceWidth, initialWidth + srcX);\n        dstWidth = srcWidth;\n      } else if (srcX <= sourceWidth) {\n        dstX = 0;\n        srcWidth = Math.min(initialWidth, sourceWidth - srcX);\n        dstWidth = srcWidth;\n      }\n\n      if (srcWidth <= 0 || srcY <= -initialHeight || srcY > sourceHeight) {\n        srcY = 0;\n        srcHeight = 0;\n        dstY = 0;\n        dstHeight = 0;\n      } else if (srcY <= 0) {\n        dstY = -srcY;\n        srcY = 0;\n        srcHeight = Math.min(sourceHeight, initialHeight + srcY);\n        dstHeight = srcHeight;\n      } else if (srcY <= sourceHeight) {\n        dstY = 0;\n        srcHeight = Math.min(initialHeight, sourceHeight - srcY);\n        dstHeight = srcHeight;\n      }\n\n      var params = [srcX, srcY, srcWidth, srcHeight]; // Avoid \"IndexSizeError\"\n\n      if (dstWidth > 0 && dstHeight > 0) {\n        var scale = width / initialWidth;\n        params.push(dstX * scale, dstY * scale, dstWidth * scale, dstHeight * scale);\n      } // All the numerical parameters should be integer for `drawImage`\n      // https://github.com/fengyuanchen/cropper/issues/476\n\n\n      context.drawImage.apply(context, [source].concat(_toConsumableArray(params.map(function (param) {\n        return Math.floor(normalizeDecimalNumber(param));\n      }))));\n      return canvas;\n    },\n\n    /**\n     * Change the aspect ratio of the crop box.\n     * @param {number} aspectRatio - The new aspect ratio.\n     * @returns {Cropper} this\n     */\n    setAspectRatio: function setAspectRatio(aspectRatio) {\n      var options = this.options;\n\n      if (!this.disabled && !isUndefined(aspectRatio)) {\n        // 0 -> NaN\n        options.aspectRatio = Math.max(0, aspectRatio) || NaN;\n\n        if (this.ready) {\n          this.initCropBox();\n\n          if (this.cropped) {\n            this.renderCropBox();\n          }\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Change the drag mode.\n     * @param {string} mode - The new drag mode.\n     * @returns {Cropper} this\n     */\n    setDragMode: function setDragMode(mode) {\n      var options = this.options,\n          dragBox = this.dragBox,\n          face = this.face;\n\n      if (this.ready && !this.disabled) {\n        var croppable = mode === DRAG_MODE_CROP;\n        var movable = options.movable && mode === DRAG_MODE_MOVE;\n        mode = croppable || movable ? mode : DRAG_MODE_NONE;\n        options.dragMode = mode;\n        setData(dragBox, DATA_ACTION, mode);\n        toggleClass(dragBox, CLASS_CROP, croppable);\n        toggleClass(dragBox, CLASS_MOVE, movable);\n\n        if (!options.cropBoxMovable) {\n          // Sync drag mode to crop box when it is not movable\n          setData(face, DATA_ACTION, mode);\n          toggleClass(face, CLASS_CROP, croppable);\n          toggleClass(face, CLASS_MOVE, movable);\n        }\n      }\n\n      return this;\n    }\n  };\n\n  var AnotherCropper = WINDOW.Cropper;\n\n  var Cropper =\n  /*#__PURE__*/\n  function () {\n    /**\n     * Create a new Cropper.\n     * @param {Element} element - The target element for cropping.\n     * @param {Object} [options={}] - The configuration options.\n     */\n    function Cropper(element) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      _classCallCheck(this, Cropper);\n\n      if (!element || !REGEXP_TAG_NAME.test(element.tagName)) {\n        throw new Error('The first argument is required and must be an <img> or <canvas> element.');\n      }\n\n      this.element = element;\n      this.options = assign({}, DEFAULTS, isPlainObject(options) && options);\n      this.cropped = false;\n      this.disabled = false;\n      this.pointers = {};\n      this.ready = false;\n      this.reloading = false;\n      this.replaced = false;\n      this.sized = false;\n      this.sizing = false;\n      this.init();\n    }\n\n    _createClass(Cropper, [{\n      key: \"init\",\n      value: function init() {\n        var element = this.element;\n        var tagName = element.tagName.toLowerCase();\n        var url;\n\n        if (element[NAMESPACE]) {\n          return;\n        }\n\n        element[NAMESPACE] = this;\n\n        if (tagName === 'img') {\n          this.isImg = true; // e.g.: \"img/picture.jpg\"\n\n          url = element.getAttribute('src') || '';\n          this.originalUrl = url; // Stop when it's a blank image\n\n          if (!url) {\n            return;\n          } // e.g.: \"http://example.com/img/picture.jpg\"\n\n\n          url = element.src;\n        } else if (tagName === 'canvas' && window.HTMLCanvasElement) {\n          url = element.toDataURL();\n        }\n\n        this.load(url);\n      }\n    }, {\n      key: \"load\",\n      value: function load(url) {\n        var _this = this;\n\n        if (!url) {\n          return;\n        }\n\n        this.url = url;\n        this.imageData = {};\n        var element = this.element,\n            options = this.options;\n\n        if (!options.rotatable && !options.scalable) {\n          options.checkOrientation = false;\n        } // Only IE10+ supports Typed Arrays\n\n\n        if (!options.checkOrientation || !window.ArrayBuffer) {\n          this.clone();\n          return;\n        } // Detect the mime type of the image directly if it is a Data URL\n\n\n        if (REGEXP_DATA_URL.test(url)) {\n          // Read ArrayBuffer from Data URL of JPEG images directly for better performance\n          if (REGEXP_DATA_URL_JPEG.test(url)) {\n            this.read(dataURLToArrayBuffer(url));\n          } else {\n            // Only a JPEG image may contains Exif Orientation information,\n            // the rest types of Data URLs are not necessary to check orientation at all.\n            this.clone();\n          }\n\n          return;\n        } // 1. Detect the mime type of the image by a XMLHttpRequest.\n        // 2. Load the image as ArrayBuffer for reading orientation if its a JPEG image.\n\n\n        var xhr = new XMLHttpRequest();\n        var clone = this.clone.bind(this);\n        this.reloading = true;\n        this.xhr = xhr; // 1. Cross origin requests are only supported for protocol schemes:\n        // http, https, data, chrome, chrome-extension.\n        // 2. Access to XMLHttpRequest from a Data URL will be blocked by CORS policy\n        // in some browsers as IE11 and Safari.\n\n        xhr.onabort = clone;\n        xhr.onerror = clone;\n        xhr.ontimeout = clone;\n\n        xhr.onprogress = function () {\n          // Abort the request directly if it not a JPEG image for better performance\n          if (xhr.getResponseHeader('content-type') !== MIME_TYPE_JPEG) {\n            xhr.abort();\n          }\n        };\n\n        xhr.onload = function () {\n          _this.read(xhr.response);\n        };\n\n        xhr.onloadend = function () {\n          _this.reloading = false;\n          _this.xhr = null;\n        }; // Bust cache when there is a \"crossOrigin\" property to avoid browser cache error\n\n\n        if (options.checkCrossOrigin && isCrossOriginURL(url) && element.crossOrigin) {\n          url = addTimestamp(url);\n        }\n\n        xhr.open('GET', url);\n        xhr.responseType = 'arraybuffer';\n        xhr.withCredentials = element.crossOrigin === 'use-credentials';\n        xhr.send();\n      }\n    }, {\n      key: \"read\",\n      value: function read(arrayBuffer) {\n        var options = this.options,\n            imageData = this.imageData; // Reset the orientation value to its default value 1\n        // as some iOS browsers will render image with its orientation\n\n        var orientation = resetAndGetOrientation(arrayBuffer);\n        var rotate = 0;\n        var scaleX = 1;\n        var scaleY = 1;\n\n        if (orientation > 1) {\n          // Generate a new URL which has the default orientation value\n          this.url = arrayBufferToDataURL(arrayBuffer, MIME_TYPE_JPEG);\n\n          var _parseOrientation = parseOrientation(orientation);\n\n          rotate = _parseOrientation.rotate;\n          scaleX = _parseOrientation.scaleX;\n          scaleY = _parseOrientation.scaleY;\n        }\n\n        if (options.rotatable) {\n          imageData.rotate = rotate;\n        }\n\n        if (options.scalable) {\n          imageData.scaleX = scaleX;\n          imageData.scaleY = scaleY;\n        }\n\n        this.clone();\n      }\n    }, {\n      key: \"clone\",\n      value: function clone() {\n        var element = this.element,\n            url = this.url;\n        var crossOrigin = element.crossOrigin;\n        var crossOriginUrl = url;\n\n        if (this.options.checkCrossOrigin && isCrossOriginURL(url)) {\n          if (!crossOrigin) {\n            crossOrigin = 'anonymous';\n          } // Bust cache when there is not a \"crossOrigin\" property (#519)\n\n\n          crossOriginUrl = addTimestamp(url);\n        }\n\n        this.crossOrigin = crossOrigin;\n        this.crossOriginUrl = crossOriginUrl;\n        var image = document.createElement('img');\n\n        if (crossOrigin) {\n          image.crossOrigin = crossOrigin;\n        }\n\n        image.src = crossOriginUrl || url;\n        image.alt = element.alt || 'The image to crop';\n        this.image = image;\n        image.onload = this.start.bind(this);\n        image.onerror = this.stop.bind(this);\n        addClass(image, CLASS_HIDE);\n        element.parentNode.insertBefore(image, element.nextSibling);\n      }\n    }, {\n      key: \"start\",\n      value: function start() {\n        var _this2 = this;\n\n        var image = this.image;\n        image.onload = null;\n        image.onerror = null;\n        this.sizing = true; // Match all browsers that use WebKit as the layout engine in iOS devices,\n        // such as Safari for iOS, Chrome for iOS, and in-app browsers.\n\n        var isIOSWebKit = WINDOW.navigator && /(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(WINDOW.navigator.userAgent);\n\n        var done = function done(naturalWidth, naturalHeight) {\n          assign(_this2.imageData, {\n            naturalWidth: naturalWidth,\n            naturalHeight: naturalHeight,\n            aspectRatio: naturalWidth / naturalHeight\n          });\n          _this2.sizing = false;\n          _this2.sized = true;\n\n          _this2.build();\n        }; // Most modern browsers (excepts iOS WebKit)\n\n\n        if (image.naturalWidth && !isIOSWebKit) {\n          done(image.naturalWidth, image.naturalHeight);\n          return;\n        }\n\n        var sizingImage = document.createElement('img');\n        var body = document.body || document.documentElement;\n        this.sizingImage = sizingImage;\n\n        sizingImage.onload = function () {\n          done(sizingImage.width, sizingImage.height);\n\n          if (!isIOSWebKit) {\n            body.removeChild(sizingImage);\n          }\n        };\n\n        sizingImage.src = image.src; // iOS WebKit will convert the image automatically\n        // with its orientation once append it into DOM (#279)\n\n        if (!isIOSWebKit) {\n          sizingImage.style.cssText = 'left:0;' + 'max-height:none!important;' + 'max-width:none!important;' + 'min-height:0!important;' + 'min-width:0!important;' + 'opacity:0;' + 'position:absolute;' + 'top:0;' + 'z-index:-1;';\n          body.appendChild(sizingImage);\n        }\n      }\n    }, {\n      key: \"stop\",\n      value: function stop() {\n        var image = this.image;\n        image.onload = null;\n        image.onerror = null;\n        image.parentNode.removeChild(image);\n        this.image = null;\n      }\n    }, {\n      key: \"build\",\n      value: function build() {\n        if (!this.sized || this.ready) {\n          return;\n        }\n\n        var element = this.element,\n            options = this.options,\n            image = this.image; // Create cropper elements\n\n        var container = element.parentNode;\n        var template = document.createElement('div');\n        template.innerHTML = TEMPLATE;\n        var cropper = template.querySelector(\".\".concat(NAMESPACE, \"-container\"));\n        var canvas = cropper.querySelector(\".\".concat(NAMESPACE, \"-canvas\"));\n        var dragBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-drag-box\"));\n        var cropBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-crop-box\"));\n        var face = cropBox.querySelector(\".\".concat(NAMESPACE, \"-face\"));\n        this.container = container;\n        this.cropper = cropper;\n        this.canvas = canvas;\n        this.dragBox = dragBox;\n        this.cropBox = cropBox;\n        this.viewBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-view-box\"));\n        this.face = face;\n        canvas.appendChild(image); // Hide the original image\n\n        addClass(element, CLASS_HIDDEN); // Inserts the cropper after to the current image\n\n        container.insertBefore(cropper, element.nextSibling); // Show the image if is hidden\n\n        if (!this.isImg) {\n          removeClass(image, CLASS_HIDE);\n        }\n\n        this.initPreview();\n        this.bind();\n        options.initialAspectRatio = Math.max(0, options.initialAspectRatio) || NaN;\n        options.aspectRatio = Math.max(0, options.aspectRatio) || NaN;\n        options.viewMode = Math.max(0, Math.min(3, Math.round(options.viewMode))) || 0;\n        addClass(cropBox, CLASS_HIDDEN);\n\n        if (!options.guides) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-dashed\")), CLASS_HIDDEN);\n        }\n\n        if (!options.center) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-center\")), CLASS_HIDDEN);\n        }\n\n        if (options.background) {\n          addClass(cropper, \"\".concat(NAMESPACE, \"-bg\"));\n        }\n\n        if (!options.highlight) {\n          addClass(face, CLASS_INVISIBLE);\n        }\n\n        if (options.cropBoxMovable) {\n          addClass(face, CLASS_MOVE);\n          setData(face, DATA_ACTION, ACTION_ALL);\n        }\n\n        if (!options.cropBoxResizable) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-line\")), CLASS_HIDDEN);\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-point\")), CLASS_HIDDEN);\n        }\n\n        this.render();\n        this.ready = true;\n        this.setDragMode(options.dragMode);\n\n        if (options.autoCrop) {\n          this.crop();\n        }\n\n        this.setData(options.data);\n\n        if (isFunction(options.ready)) {\n          addListener(element, EVENT_READY, options.ready, {\n            once: true\n          });\n        }\n\n        dispatchEvent(element, EVENT_READY);\n      }\n    }, {\n      key: \"unbuild\",\n      value: function unbuild() {\n        if (!this.ready) {\n          return;\n        }\n\n        this.ready = false;\n        this.unbind();\n        this.resetPreview();\n        this.cropper.parentNode.removeChild(this.cropper);\n        removeClass(this.element, CLASS_HIDDEN);\n      }\n    }, {\n      key: \"uncreate\",\n      value: function uncreate() {\n        if (this.ready) {\n          this.unbuild();\n          this.ready = false;\n          this.cropped = false;\n        } else if (this.sizing) {\n          this.sizingImage.onload = null;\n          this.sizing = false;\n          this.sized = false;\n        } else if (this.reloading) {\n          this.xhr.onabort = null;\n          this.xhr.abort();\n        } else if (this.image) {\n          this.stop();\n        }\n      }\n      /**\n       * Get the no conflict cropper class.\n       * @returns {Cropper} The cropper class.\n       */\n\n    }], [{\n      key: \"noConflict\",\n      value: function noConflict() {\n        window.Cropper = AnotherCropper;\n        return Cropper;\n      }\n      /**\n       * Change the default options.\n       * @param {Object} options - The new default options.\n       */\n\n    }, {\n      key: \"setDefaults\",\n      value: function setDefaults(options) {\n        assign(DEFAULTS, isPlainObject(options) && options);\n      }\n    }]);\n\n    return Cropper;\n  }();\n\n  assign(Cropper.prototype, render, preview, events, handlers, change, methods);\n\n  return Cropper;\n\n}));\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(11);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(1)(\"354ec51f\", content, true, {});\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(0)(false);\n// imports\n\n\n// module\nexports.push([module.i, \"/*!\\n * Cropper.js v1.5.4\\n * https://fengyuanchen.github.io/cropperjs\\n *\\n * Copyright 2015-present Chen Fengyuan\\n * Released under the MIT license\\n *\\n * Date: 2019-08-03T08:38:38.177Z\\n */.cropper-container{direction:ltr;font-size:0;line-height:0;position:relative;-ms-touch-action:none;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.cropper-container img{display:block;height:100%;image-orientation:0deg;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;width:100%}.cropper-canvas,.cropper-crop-box,.cropper-drag-box,.cropper-modal,.cropper-wrap-box{bottom:0;left:0;position:absolute;right:0;top:0}.cropper-canvas,.cropper-wrap-box{overflow:hidden}.cropper-drag-box{background-color:#fff;opacity:0}.cropper-modal{background-color:#000;opacity:.5}.cropper-view-box{display:block;height:100%;outline:1px solid #39f;outline-color:rgba(51,153,255,.75);overflow:hidden;width:100%}.cropper-dashed{border:0 dashed #eee;display:block;opacity:.5;position:absolute}.cropper-dashed.dashed-h{border-bottom-width:1px;border-top-width:1px;height:33.33333%;left:0;top:33.33333%;width:100%}.cropper-dashed.dashed-v{border-left-width:1px;border-right-width:1px;height:100%;left:33.33333%;top:0;width:33.33333%}.cropper-center{display:block;height:0;left:50%;opacity:.75;position:absolute;top:50%;width:0}.cropper-center:after,.cropper-center:before{background-color:#eee;content:\\\" \\\";display:block;position:absolute}.cropper-center:before{height:1px;left:-3px;top:0;width:7px}.cropper-center:after{height:7px;left:0;top:-3px;width:1px}.cropper-face,.cropper-line,.cropper-point{display:block;height:100%;opacity:.1;position:absolute;width:100%}.cropper-face{background-color:#fff;left:0;top:0}.cropper-line{background-color:#39f}.cropper-line.line-e{cursor:ew-resize;right:-3px;top:0;width:5px}.cropper-line.line-n{cursor:ns-resize;height:5px;left:0;top:-3px}.cropper-line.line-w{cursor:ew-resize;left:-3px;top:0;width:5px}.cropper-line.line-s{bottom:-3px;cursor:ns-resize;height:5px;left:0}.cropper-point{background-color:#39f;height:5px;opacity:.75;width:5px}.cropper-point.point-e{cursor:ew-resize;margin-top:-3px;right:-3px;top:50%}.cropper-point.point-n{cursor:ns-resize;left:50%;margin-left:-3px;top:-3px}.cropper-point.point-w{cursor:ew-resize;left:-3px;margin-top:-3px;top:50%}.cropper-point.point-s{bottom:-3px;cursor:s-resize;left:50%;margin-left:-3px}.cropper-point.point-ne{cursor:nesw-resize;right:-3px;top:-3px}.cropper-point.point-nw{cursor:nwse-resize;left:-3px;top:-3px}.cropper-point.point-sw{bottom:-3px;cursor:nesw-resize;left:-3px}.cropper-point.point-se{bottom:-3px;cursor:nwse-resize;height:20px;opacity:1;right:-3px;width:20px}@media (min-width:768px){.cropper-point.point-se{height:15px;width:15px}}@media (min-width:992px){.cropper-point.point-se{height:10px;width:10px}}@media (min-width:1200px){.cropper-point.point-se{height:5px;opacity:.75;width:5px}}.cropper-point.point-se:before{background-color:#39f;bottom:-50%;content:\\\" \\\";display:block;height:200%;opacity:0;position:absolute;right:-50%;width:200%}.cropper-invisible{opacity:0}.cropper-bg{background-image:url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC\\\")}.cropper-hide{display:block;height:0;position:absolute;width:0}.cropper-hidden{display:none!important}.cropper-move{cursor:move}.cropper-crop{cursor:crosshair}.cropper-disabled .cropper-drag-box,.cropper-disabled .cropper-face,.cropper-disabled .cropper-line,.cropper-disabled .cropper-point{cursor:not-allowed}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"copper-box\"},[_c('img',{ref:\"img\",staticClass:\"copper-img\",attrs:{\"src\":_vm.src}})])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// index.js","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader/lib/css-base.js\n// module id = 0\n// module chunks = 0","/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n  Modified by Evan You @yyx990803\n*/\n\nvar hasDocument = typeof document !== 'undefined'\n\nif (typeof DEBUG !== 'undefined' && DEBUG) {\n  if (!hasDocument) {\n    throw new Error(\n    'vue-style-loader cannot be used in a non-browser environment. ' +\n    \"Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.\"\n  ) }\n}\n\nvar listToStyles = require('./listToStyles')\n\n/*\ntype StyleObject = {\n  id: number;\n  parts: Array<StyleObjectPart>\n}\n\ntype StyleObjectPart = {\n  css: string;\n  media: string;\n  sourceMap: ?string\n}\n*/\n\nvar stylesInDom = {/*\n  [id: number]: {\n    id: number,\n    refs: number,\n    parts: Array<(obj?: StyleObjectPart) => void>\n  }\n*/}\n\nvar head = hasDocument && (document.head || document.getElementsByTagName('head')[0])\nvar singletonElement = null\nvar singletonCounter = 0\nvar isProduction = false\nvar noop = function () {}\nvar options = null\nvar ssrIdKey = 'data-vue-ssr-id'\n\n// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n// tags it will allow on a page\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase())\n\nmodule.exports = function (parentId, list, _isProduction, _options) {\n  isProduction = _isProduction\n\n  options = _options || {}\n\n  var styles = listToStyles(parentId, list)\n  addStylesToDom(styles)\n\n  return function update (newList) {\n    var mayRemove = []\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i]\n      var domStyle = stylesInDom[item.id]\n      domStyle.refs--\n      mayRemove.push(domStyle)\n    }\n    if (newList) {\n      styles = listToStyles(parentId, newList)\n      addStylesToDom(styles)\n    } else {\n      styles = []\n    }\n    for (var i = 0; i < mayRemove.length; i++) {\n      var domStyle = mayRemove[i]\n      if (domStyle.refs === 0) {\n        for (var j = 0; j < domStyle.parts.length; j++) {\n          domStyle.parts[j]()\n        }\n        delete stylesInDom[domStyle.id]\n      }\n    }\n  }\n}\n\nfunction addStylesToDom (styles /* Array<StyleObject> */) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i]\n    var domStyle = stylesInDom[item.id]\n    if (domStyle) {\n      domStyle.refs++\n      for (var j = 0; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j])\n      }\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j]))\n      }\n      if (domStyle.parts.length > item.parts.length) {\n        domStyle.parts.length = item.parts.length\n      }\n    } else {\n      var parts = []\n      for (var j = 0; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j]))\n      }\n      stylesInDom[item.id] = { id: item.id, refs: 1, parts: parts }\n    }\n  }\n}\n\nfunction createStyleElement () {\n  var styleElement = document.createElement('style')\n  styleElement.type = 'text/css'\n  head.appendChild(styleElement)\n  return styleElement\n}\n\nfunction addStyle (obj /* StyleObjectPart */) {\n  var update, remove\n  var styleElement = document.querySelector('style[' + ssrIdKey + '~=\"' + obj.id + '\"]')\n\n  if (styleElement) {\n    if (isProduction) {\n      // has SSR styles and in production mode.\n      // simply do nothing.\n      return noop\n    } else {\n      // has SSR styles but in dev mode.\n      // for some reason Chrome can't handle source map in server-rendered\n      // style tags - source maps in <style> only works if the style tag is\n      // created and inserted dynamically. So we remove the server rendered\n      // styles and inject new ones.\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  if (isOldIE) {\n    // use singleton mode for IE9.\n    var styleIndex = singletonCounter++\n    styleElement = singletonElement || (singletonElement = createStyleElement())\n    update = applyToSingletonTag.bind(null, styleElement, styleIndex, false)\n    remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true)\n  } else {\n    // use multi-style-tag mode in all other cases\n    styleElement = createStyleElement()\n    update = applyToTag.bind(null, styleElement)\n    remove = function () {\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  update(obj)\n\n  return function updateStyle (newObj /* StyleObjectPart */) {\n    if (newObj) {\n      if (newObj.css === obj.css &&\n          newObj.media === obj.media &&\n          newObj.sourceMap === obj.sourceMap) {\n        return\n      }\n      update(obj = newObj)\n    } else {\n      remove()\n    }\n  }\n}\n\nvar replaceText = (function () {\n  var textStore = []\n\n  return function (index, replacement) {\n    textStore[index] = replacement\n    return textStore.filter(Boolean).join('\\n')\n  }\n})()\n\nfunction applyToSingletonTag (styleElement, index, remove, obj) {\n  var css = remove ? '' : obj.css\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = replaceText(index, css)\n  } else {\n    var cssNode = document.createTextNode(css)\n    var childNodes = styleElement.childNodes\n    if (childNodes[index]) styleElement.removeChild(childNodes[index])\n    if (childNodes.length) {\n      styleElement.insertBefore(cssNode, childNodes[index])\n    } else {\n      styleElement.appendChild(cssNode)\n    }\n  }\n}\n\nfunction applyToTag (styleElement, obj) {\n  var css = obj.css\n  var media = obj.media\n  var sourceMap = obj.sourceMap\n\n  if (media) {\n    styleElement.setAttribute('media', media)\n  }\n  if (options.ssrId) {\n    styleElement.setAttribute(ssrIdKey, obj.id)\n  }\n\n  if (sourceMap) {\n    // https://developer.chrome.com/devtools/docs/javascript-debugging\n    // this makes source maps inside style tags work properly in Chrome\n    css += '\\n/*# sourceURL=' + sourceMap.sources[0] + ' */'\n    // http://stackoverflow.com/a/26603875\n    css += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + ' */'\n  }\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild)\n    }\n    styleElement.appendChild(document.createTextNode(css))\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-style-loader/lib/addStylesClient.js\n// module id = 1\n// module chunks = 0","<template>\n  <div class=\"copper-box\">\n    <img class=\"copper-img\" :src=\"src\" ref=\"img\">\n  </div>\n</template>\n<script>\nimport Copper from 'cropperjs'\nimport 'cropperjs/dist/cropper.min.css'\nexport default {\n  name: 'vue-crop',\n  props: {\n    src: {\n      type: String,\n      default: 'https://lh-static.playhudong.com/forever/image/funCoverDefault1.pngtapd_23436241_base64_1542093035_53%281%29.png'\n    },\n    aspectRatio: { // 裁剪框的比例\n      type: Number,\n      default: null\n    },\n    modal: {\n      type: Boolean,\n      default: true\n    },\n    cropBoxResizable: { // 是否允许拖动调整裁剪框的大小\n      type: Boolean,\n      default: true\n    },\n    getImg: {\n      type: Function,\n      default: function () {\n        return null\n      }\n    }\n  },\n  data () {\n    return {\n      canvasImg: null\n    }\n  },\n  mounted () {\n    this.initCopper()\n  },\n  methods: {\n    /**\n     * 初始化\n     * */\n    initCopper () {\n      let copper = new Copper(this.$refs.img, {\n        viewMode: 1,\n        // 定义裁剪器的拖动模式\n        dragMode: 'none',\n        // 裁剪框比例\n        aspectRatio: this.aspectRatio,\n        modal: this.modal,\n        // 裁剪框单击两次，切换裁剪和拖动模式\n        toggleDragModeOnDblclick: false,\n        // 允许通过拖动调整裁剪框的大小\n        cropBoxResizable: this.cropBoxResizable,\n        checkCrossOrigin: false,\n        // 定义自动裁剪区域的大小\n        autoCropArea: 1,\n        // 不允许旋转\n        rotatable: false,\n        ready: () => {\n          this.callback()\n        },\n        cropend: () => {\n          this.callback()\n        }\n      })\n      this.copper = copper\n    },\n\n    /**\n     * ready和cropend的callback\n     * */\n    callback () {\n      this.cropEnd()\n      /*if (this.getImg) {\n        this.getImg(this.canvasImg)\n      }*/\n    },\n\n    /**\n     * 裁剪框移动结束\n     * */\n    cropEnd () {\n      let data = this.copper.getData()\n      this.createCanvas(data)\n    },\n\n    /**\n     * 创建canvas\n     * data: 裁剪区域的数据\n     * */\n    createCanvas (data) {\n      let canvas = document.createElement('canvas')\n      let ctx = canvas.getContext('2d')\n      canvas.width = data.width\n      canvas.height = data.height\n      let img = new Image()\n      img.setAttribute('crossOrigin', 'Anonymous')\n      img.src = this.src\n      img.onload = () => {\n        // ctx.drawImage(img, 0, 0, data.width, data.height)\n        this.canvasCover(canvas, ctx, data.width, data.height, data.x, data.y, img)\n      }\n    },\n\n    /**\n     * canvas覆盖\n     * */\n    canvasCover (canvas, ctx, width, height, x, y, img) {\n      let dirtyCanvas = document.createElement('canvas')\n      let dirtyContext = dirtyCanvas.getContext('2d')\n      dirtyCanvas.width = img.width\n      dirtyCanvas.height = img.height\n      dirtyContext.drawImage(img, 0, 0, img.width, img.height)\n      let imagedata = dirtyContext.getImageData(x, y, img.width, img.height)\n      ctx.putImageData(imagedata, 0, 0, 0, 0, width, height);\n      this.canvasImg = canvas.toDataURL('image/png', 1)\n      this.$emit('copperImg', this.canvasImg)\n    }\n  }\n}\n</script>\n<style scoped lang=\"scss\">\n  .copper {\n    width: 100%;\n    height: 100%;\n    position: relative;\n  }\n  .canvas {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n  .copper-box {\n    width: 100%;\n    height: 100%;\n  }\n  .copper-img {\n    width: 100%;\n    height: auto;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/crop/index.vue","import vueCrop from './components/crop/index'\n\nexport default vueCrop\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","function injectStyle (ssrContext) {\n  require(\"!!vue-style-loader!css-loader?minimize!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-fe98b570\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-fe98b570\\\",\\\"hasScoped\\\":true,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-fe98b570\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/crop/index.vue\n// module id = 4\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?minimize!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-fe98b570\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/sass-loader/lib/loader.js!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./index.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"d66653a8\", content, true, {});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-style-loader!./node_modules/css-loader?minimize!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-fe98b570\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/crop/index.vue\n// module id = 5\n// module chunks = 0","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".copper[data-v-fe98b570]{width:100%;height:100%;position:relative}.canvas[data-v-fe98b570]{position:absolute;top:0;left:0;width:100%;height:100%}.copper-box[data-v-fe98b570]{width:100%;height:100%}.copper-img[data-v-fe98b570]{width:100%;height:auto}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?minimize!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-fe98b570\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/crop/index.vue\n// module id = 6\n// module chunks = 0","/**\n * Translates the list format produced by css-loader into something\n * easier to manipulate.\n */\nmodule.exports = function listToStyles (parentId, list) {\n  var styles = []\n  var newStyles = {}\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i]\n    var id = item[0]\n    var css = item[1]\n    var media = item[2]\n    var sourceMap = item[3]\n    var part = {\n      id: parentId + ':' + i,\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    }\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = { id: id, parts: [part] })\n    } else {\n      newStyles[id].parts.push(part)\n    }\n  }\n  return styles\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-style-loader/lib/listToStyles.js\n// module id = 7\n// module chunks = 0","/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file.\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nmodule.exports = function normalizeComponent (\n  rawScriptExports,\n  compiledTemplate,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier /* server only */\n) {\n  var esModule\n  var scriptExports = rawScriptExports = rawScriptExports || {}\n\n  // ES6 modules interop\n  var type = typeof rawScriptExports.default\n  if (type === 'object' || type === 'function') {\n    esModule = rawScriptExports\n    scriptExports = rawScriptExports.default\n  }\n\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (compiledTemplate) {\n    options.render = compiledTemplate.render\n    options.staticRenderFns = compiledTemplate.staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = injectStyles\n  }\n\n  if (hook) {\n    var functional = options.functional\n    var existing = functional\n      ? options.render\n      : options.beforeCreate\n\n    if (!functional) {\n      // inject component registration as beforeCreate hook\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    } else {\n      // for template-only hot-reload because in that case the render fn doesn't\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functioal component in vue file\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return existing(h, context)\n      }\n    }\n  }\n\n  return {\n    esModule: esModule,\n    exports: scriptExports,\n    options: options\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/component-normalizer.js\n// module id = 8\n// module chunks = 0","/*!\n * Cropper.js v1.5.4\n * https://fengyuanchen.github.io/cropperjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2019-08-03T08:38:42.128Z\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global.Cropper = factory());\n}(this, function () { 'use strict';\n\n  function _typeof(obj) {\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      _typeof = function (obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _toConsumableArray(arr) {\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n  }\n\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) {\n      for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n      return arr2;\n    }\n  }\n\n  function _iterableToArray(iter) {\n    if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n  }\n\n  function _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n  }\n\n  var IS_BROWSER = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  var WINDOW = IS_BROWSER ? window : {};\n  var IS_TOUCH_DEVICE = IS_BROWSER ? 'ontouchstart' in WINDOW.document.documentElement : false;\n  var HAS_POINTER_EVENT = IS_BROWSER ? 'PointerEvent' in WINDOW : false;\n  var NAMESPACE = 'cropper'; // Actions\n\n  var ACTION_ALL = 'all';\n  var ACTION_CROP = 'crop';\n  var ACTION_MOVE = 'move';\n  var ACTION_ZOOM = 'zoom';\n  var ACTION_EAST = 'e';\n  var ACTION_WEST = 'w';\n  var ACTION_SOUTH = 's';\n  var ACTION_NORTH = 'n';\n  var ACTION_NORTH_EAST = 'ne';\n  var ACTION_NORTH_WEST = 'nw';\n  var ACTION_SOUTH_EAST = 'se';\n  var ACTION_SOUTH_WEST = 'sw'; // Classes\n\n  var CLASS_CROP = \"\".concat(NAMESPACE, \"-crop\");\n  var CLASS_DISABLED = \"\".concat(NAMESPACE, \"-disabled\");\n  var CLASS_HIDDEN = \"\".concat(NAMESPACE, \"-hidden\");\n  var CLASS_HIDE = \"\".concat(NAMESPACE, \"-hide\");\n  var CLASS_INVISIBLE = \"\".concat(NAMESPACE, \"-invisible\");\n  var CLASS_MODAL = \"\".concat(NAMESPACE, \"-modal\");\n  var CLASS_MOVE = \"\".concat(NAMESPACE, \"-move\"); // Data keys\n\n  var DATA_ACTION = \"\".concat(NAMESPACE, \"Action\");\n  var DATA_PREVIEW = \"\".concat(NAMESPACE, \"Preview\"); // Drag modes\n\n  var DRAG_MODE_CROP = 'crop';\n  var DRAG_MODE_MOVE = 'move';\n  var DRAG_MODE_NONE = 'none'; // Events\n\n  var EVENT_CROP = 'crop';\n  var EVENT_CROP_END = 'cropend';\n  var EVENT_CROP_MOVE = 'cropmove';\n  var EVENT_CROP_START = 'cropstart';\n  var EVENT_DBLCLICK = 'dblclick';\n  var EVENT_TOUCH_START = IS_TOUCH_DEVICE ? 'touchstart' : 'mousedown';\n  var EVENT_TOUCH_MOVE = IS_TOUCH_DEVICE ? 'touchmove' : 'mousemove';\n  var EVENT_TOUCH_END = IS_TOUCH_DEVICE ? 'touchend touchcancel' : 'mouseup';\n  var EVENT_POINTER_DOWN = HAS_POINTER_EVENT ? 'pointerdown' : EVENT_TOUCH_START;\n  var EVENT_POINTER_MOVE = HAS_POINTER_EVENT ? 'pointermove' : EVENT_TOUCH_MOVE;\n  var EVENT_POINTER_UP = HAS_POINTER_EVENT ? 'pointerup pointercancel' : EVENT_TOUCH_END;\n  var EVENT_READY = 'ready';\n  var EVENT_RESIZE = 'resize';\n  var EVENT_WHEEL = 'wheel';\n  var EVENT_ZOOM = 'zoom'; // Mime types\n\n  var MIME_TYPE_JPEG = 'image/jpeg'; // RegExps\n\n  var REGEXP_ACTIONS = /^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/;\n  var REGEXP_DATA_URL = /^data:/;\n  var REGEXP_DATA_URL_JPEG = /^data:image\\/jpeg;base64,/;\n  var REGEXP_TAG_NAME = /^img|canvas$/i; // Misc\n  // Inspired by the default width and height of a canvas element.\n\n  var MIN_CONTAINER_WIDTH = 200;\n  var MIN_CONTAINER_HEIGHT = 100;\n\n  var DEFAULTS = {\n    // Define the view mode of the cropper\n    viewMode: 0,\n    // 0, 1, 2, 3\n    // Define the dragging mode of the cropper\n    dragMode: DRAG_MODE_CROP,\n    // 'crop', 'move' or 'none'\n    // Define the initial aspect ratio of the crop box\n    initialAspectRatio: NaN,\n    // Define the aspect ratio of the crop box\n    aspectRatio: NaN,\n    // An object with the previous cropping result data\n    data: null,\n    // A selector for adding extra containers to preview\n    preview: '',\n    // Re-render the cropper when resize the window\n    responsive: true,\n    // Restore the cropped area after resize the window\n    restore: true,\n    // Check if the current image is a cross-origin image\n    checkCrossOrigin: true,\n    // Check the current image's Exif Orientation information\n    checkOrientation: true,\n    // Show the black modal\n    modal: true,\n    // Show the dashed lines for guiding\n    guides: true,\n    // Show the center indicator for guiding\n    center: true,\n    // Show the white modal to highlight the crop box\n    highlight: true,\n    // Show the grid background\n    background: true,\n    // Enable to crop the image automatically when initialize\n    autoCrop: true,\n    // Define the percentage of automatic cropping area when initializes\n    autoCropArea: 0.8,\n    // Enable to move the image\n    movable: true,\n    // Enable to rotate the image\n    rotatable: true,\n    // Enable to scale the image\n    scalable: true,\n    // Enable to zoom the image\n    zoomable: true,\n    // Enable to zoom the image by dragging touch\n    zoomOnTouch: true,\n    // Enable to zoom the image by wheeling mouse\n    zoomOnWheel: true,\n    // Define zoom ratio when zoom the image by wheeling mouse\n    wheelZoomRatio: 0.1,\n    // Enable to move the crop box\n    cropBoxMovable: true,\n    // Enable to resize the crop box\n    cropBoxResizable: true,\n    // Toggle drag mode between \"crop\" and \"move\" when click twice on the cropper\n    toggleDragModeOnDblclick: true,\n    // Size limitation\n    minCanvasWidth: 0,\n    minCanvasHeight: 0,\n    minCropBoxWidth: 0,\n    minCropBoxHeight: 0,\n    minContainerWidth: 200,\n    minContainerHeight: 100,\n    // Shortcuts of events\n    ready: null,\n    cropstart: null,\n    cropmove: null,\n    cropend: null,\n    crop: null,\n    zoom: null\n  };\n\n  var TEMPLATE = '<div class=\"cropper-container\" touch-action=\"none\">' + '<div class=\"cropper-wrap-box\">' + '<div class=\"cropper-canvas\"></div>' + '</div>' + '<div class=\"cropper-drag-box\"></div>' + '<div class=\"cropper-crop-box\">' + '<span class=\"cropper-view-box\"></span>' + '<span class=\"cropper-dashed dashed-h\"></span>' + '<span class=\"cropper-dashed dashed-v\"></span>' + '<span class=\"cropper-center\"></span>' + '<span class=\"cropper-face\"></span>' + '<span class=\"cropper-line line-e\" data-cropper-action=\"e\"></span>' + '<span class=\"cropper-line line-n\" data-cropper-action=\"n\"></span>' + '<span class=\"cropper-line line-w\" data-cropper-action=\"w\"></span>' + '<span class=\"cropper-line line-s\" data-cropper-action=\"s\"></span>' + '<span class=\"cropper-point point-e\" data-cropper-action=\"e\"></span>' + '<span class=\"cropper-point point-n\" data-cropper-action=\"n\"></span>' + '<span class=\"cropper-point point-w\" data-cropper-action=\"w\"></span>' + '<span class=\"cropper-point point-s\" data-cropper-action=\"s\"></span>' + '<span class=\"cropper-point point-ne\" data-cropper-action=\"ne\"></span>' + '<span class=\"cropper-point point-nw\" data-cropper-action=\"nw\"></span>' + '<span class=\"cropper-point point-sw\" data-cropper-action=\"sw\"></span>' + '<span class=\"cropper-point point-se\" data-cropper-action=\"se\"></span>' + '</div>' + '</div>';\n\n  /**\n   * Check if the given value is not a number.\n   */\n\n  var isNaN = Number.isNaN || WINDOW.isNaN;\n  /**\n   * Check if the given value is a number.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a number, else `false`.\n   */\n\n  function isNumber(value) {\n    return typeof value === 'number' && !isNaN(value);\n  }\n  /**\n   * Check if the given value is a positive number.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a positive number, else `false`.\n   */\n\n  var isPositiveNumber = function isPositiveNumber(value) {\n    return value > 0 && value < Infinity;\n  };\n  /**\n   * Check if the given value is undefined.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is undefined, else `false`.\n   */\n\n  function isUndefined(value) {\n    return typeof value === 'undefined';\n  }\n  /**\n   * Check if the given value is an object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is an object, else `false`.\n   */\n\n  function isObject(value) {\n    return _typeof(value) === 'object' && value !== null;\n  }\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\n  /**\n   * Check if the given value is a plain object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a plain object, else `false`.\n   */\n\n  function isPlainObject(value) {\n    if (!isObject(value)) {\n      return false;\n    }\n\n    try {\n      var _constructor = value.constructor;\n      var prototype = _constructor.prototype;\n      return _constructor && prototype && hasOwnProperty.call(prototype, 'isPrototypeOf');\n    } catch (error) {\n      return false;\n    }\n  }\n  /**\n   * Check if the given value is a function.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a function, else `false`.\n   */\n\n  function isFunction(value) {\n    return typeof value === 'function';\n  }\n  var slice = Array.prototype.slice;\n  /**\n   * Convert array-like or iterable object to an array.\n   * @param {*} value - The value to convert.\n   * @returns {Array} Returns a new array.\n   */\n\n  function toArray(value) {\n    return Array.from ? Array.from(value) : slice.call(value);\n  }\n  /**\n   * Iterate the given data.\n   * @param {*} data - The data to iterate.\n   * @param {Function} callback - The process function for each element.\n   * @returns {*} The original data.\n   */\n\n  function forEach(data, callback) {\n    if (data && isFunction(callback)) {\n      if (Array.isArray(data) || isNumber(data.length)\n      /* array-like */\n      ) {\n          toArray(data).forEach(function (value, key) {\n            callback.call(data, value, key, data);\n          });\n        } else if (isObject(data)) {\n        Object.keys(data).forEach(function (key) {\n          callback.call(data, data[key], key, data);\n        });\n      }\n    }\n\n    return data;\n  }\n  /**\n   * Extend the given object.\n   * @param {*} target - The target object to extend.\n   * @param {*} args - The rest objects for merging to the target object.\n   * @returns {Object} The extended object.\n   */\n\n  var assign = Object.assign || function assign(target) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    if (isObject(target) && args.length > 0) {\n      args.forEach(function (arg) {\n        if (isObject(arg)) {\n          Object.keys(arg).forEach(function (key) {\n            target[key] = arg[key];\n          });\n        }\n      });\n    }\n\n    return target;\n  };\n  var REGEXP_DECIMALS = /\\.\\d*(?:0|9){12}\\d*$/;\n  /**\n   * Normalize decimal number.\n   * Check out {@link http://0.30000000000000004.com/}\n   * @param {number} value - The value to normalize.\n   * @param {number} [times=100000000000] - The times for normalizing.\n   * @returns {number} Returns the normalized number.\n   */\n\n  function normalizeDecimalNumber(value) {\n    var times = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100000000000;\n    return REGEXP_DECIMALS.test(value) ? Math.round(value * times) / times : value;\n  }\n  var REGEXP_SUFFIX = /^width|height|left|top|marginLeft|marginTop$/;\n  /**\n   * Apply styles to the given element.\n   * @param {Element} element - The target element.\n   * @param {Object} styles - The styles for applying.\n   */\n\n  function setStyle(element, styles) {\n    var style = element.style;\n    forEach(styles, function (value, property) {\n      if (REGEXP_SUFFIX.test(property) && isNumber(value)) {\n        value = \"\".concat(value, \"px\");\n      }\n\n      style[property] = value;\n    });\n  }\n  /**\n   * Check if the given element has a special class.\n   * @param {Element} element - The element to check.\n   * @param {string} value - The class to search.\n   * @returns {boolean} Returns `true` if the special class was found.\n   */\n\n  function hasClass(element, value) {\n    return element.classList ? element.classList.contains(value) : element.className.indexOf(value) > -1;\n  }\n  /**\n   * Add classes to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be added.\n   */\n\n  function addClass(element, value) {\n    if (!value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        addClass(elem, value);\n      });\n      return;\n    }\n\n    if (element.classList) {\n      element.classList.add(value);\n      return;\n    }\n\n    var className = element.className.trim();\n\n    if (!className) {\n      element.className = value;\n    } else if (className.indexOf(value) < 0) {\n      element.className = \"\".concat(className, \" \").concat(value);\n    }\n  }\n  /**\n   * Remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be removed.\n   */\n\n  function removeClass(element, value) {\n    if (!value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        removeClass(elem, value);\n      });\n      return;\n    }\n\n    if (element.classList) {\n      element.classList.remove(value);\n      return;\n    }\n\n    if (element.className.indexOf(value) >= 0) {\n      element.className = element.className.replace(value, '');\n    }\n  }\n  /**\n   * Add or remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be toggled.\n   * @param {boolean} added - Add only.\n   */\n\n  function toggleClass(element, value, added) {\n    if (!value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        toggleClass(elem, value, added);\n      });\n      return;\n    } // IE10-11 doesn't support the second parameter of `classList.toggle`\n\n\n    if (added) {\n      addClass(element, value);\n    } else {\n      removeClass(element, value);\n    }\n  }\n  var REGEXP_CAMEL_CASE = /([a-z\\d])([A-Z])/g;\n  /**\n   * Transform the given string from camelCase to kebab-case\n   * @param {string} value - The value to transform.\n   * @returns {string} The transformed value.\n   */\n\n  function toParamCase(value) {\n    return value.replace(REGEXP_CAMEL_CASE, '$1-$2').toLowerCase();\n  }\n  /**\n   * Get data from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to get.\n   * @returns {string} The data value.\n   */\n\n  function getData(element, name) {\n    if (isObject(element[name])) {\n      return element[name];\n    }\n\n    if (element.dataset) {\n      return element.dataset[name];\n    }\n\n    return element.getAttribute(\"data-\".concat(toParamCase(name)));\n  }\n  /**\n   * Set data to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to set.\n   * @param {string} data - The data value.\n   */\n\n  function setData(element, name, data) {\n    if (isObject(data)) {\n      element[name] = data;\n    } else if (element.dataset) {\n      element.dataset[name] = data;\n    } else {\n      element.setAttribute(\"data-\".concat(toParamCase(name)), data);\n    }\n  }\n  /**\n   * Remove data from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to remove.\n   */\n\n  function removeData(element, name) {\n    if (isObject(element[name])) {\n      try {\n        delete element[name];\n      } catch (error) {\n        element[name] = undefined;\n      }\n    } else if (element.dataset) {\n      // #128 Safari not allows to delete dataset property\n      try {\n        delete element.dataset[name];\n      } catch (error) {\n        element.dataset[name] = undefined;\n      }\n    } else {\n      element.removeAttribute(\"data-\".concat(toParamCase(name)));\n    }\n  }\n  var REGEXP_SPACES = /\\s\\s*/;\n\n  var onceSupported = function () {\n    var supported = false;\n\n    if (IS_BROWSER) {\n      var once = false;\n\n      var listener = function listener() {};\n\n      var options = Object.defineProperty({}, 'once', {\n        get: function get() {\n          supported = true;\n          return once;\n        },\n\n        /**\n         * This setter can fix a `TypeError` in strict mode\n         * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Getter_only}\n         * @param {boolean} value - The value to set\n         */\n        set: function set(value) {\n          once = value;\n        }\n      });\n      WINDOW.addEventListener('test', listener, options);\n      WINDOW.removeEventListener('test', listener, options);\n    }\n\n    return supported;\n  }();\n  /**\n   * Remove event listener from the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n\n\n  function removeListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (!onceSupported) {\n        var listeners = element.listeners;\n\n        if (listeners && listeners[event] && listeners[event][listener]) {\n          handler = listeners[event][listener];\n          delete listeners[event][listener];\n\n          if (Object.keys(listeners[event]).length === 0) {\n            delete listeners[event];\n          }\n\n          if (Object.keys(listeners).length === 0) {\n            delete element.listeners;\n          }\n        }\n      }\n\n      element.removeEventListener(event, handler, options);\n    });\n  }\n  /**\n   * Add event listener to the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n\n  function addListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var _handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (options.once && !onceSupported) {\n        var _element$listeners = element.listeners,\n            listeners = _element$listeners === void 0 ? {} : _element$listeners;\n\n        _handler = function handler() {\n          delete listeners[event][listener];\n          element.removeEventListener(event, _handler, options);\n\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n\n          listener.apply(element, args);\n        };\n\n        if (!listeners[event]) {\n          listeners[event] = {};\n        }\n\n        if (listeners[event][listener]) {\n          element.removeEventListener(event, listeners[event][listener], options);\n        }\n\n        listeners[event][listener] = _handler;\n        element.listeners = listeners;\n      }\n\n      element.addEventListener(event, _handler, options);\n    });\n  }\n  /**\n   * Dispatch event on the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Object} data - The additional event data.\n   * @returns {boolean} Indicate if the event is default prevented or not.\n   */\n\n  function dispatchEvent(element, type, data) {\n    var event; // Event and CustomEvent on IE9-11 are global objects, not constructors\n\n    if (isFunction(Event) && isFunction(CustomEvent)) {\n      event = new CustomEvent(type, {\n        detail: data,\n        bubbles: true,\n        cancelable: true\n      });\n    } else {\n      event = document.createEvent('CustomEvent');\n      event.initCustomEvent(type, true, true, data);\n    }\n\n    return element.dispatchEvent(event);\n  }\n  /**\n   * Get the offset base on the document.\n   * @param {Element} element - The target element.\n   * @returns {Object} The offset data.\n   */\n\n  function getOffset(element) {\n    var box = element.getBoundingClientRect();\n    return {\n      left: box.left + (window.pageXOffset - document.documentElement.clientLeft),\n      top: box.top + (window.pageYOffset - document.documentElement.clientTop)\n    };\n  }\n  var location = WINDOW.location;\n  var REGEXP_ORIGINS = /^(\\w+:)\\/\\/([^:/?#]*):?(\\d*)/i;\n  /**\n   * Check if the given URL is a cross origin URL.\n   * @param {string} url - The target URL.\n   * @returns {boolean} Returns `true` if the given URL is a cross origin URL, else `false`.\n   */\n\n  function isCrossOriginURL(url) {\n    var parts = url.match(REGEXP_ORIGINS);\n    return parts !== null && (parts[1] !== location.protocol || parts[2] !== location.hostname || parts[3] !== location.port);\n  }\n  /**\n   * Add timestamp to the given URL.\n   * @param {string} url - The target URL.\n   * @returns {string} The result URL.\n   */\n\n  function addTimestamp(url) {\n    var timestamp = \"timestamp=\".concat(new Date().getTime());\n    return url + (url.indexOf('?') === -1 ? '?' : '&') + timestamp;\n  }\n  /**\n   * Get transforms base on the given object.\n   * @param {Object} obj - The target object.\n   * @returns {string} A string contains transform values.\n   */\n\n  function getTransforms(_ref) {\n    var rotate = _ref.rotate,\n        scaleX = _ref.scaleX,\n        scaleY = _ref.scaleY,\n        translateX = _ref.translateX,\n        translateY = _ref.translateY;\n    var values = [];\n\n    if (isNumber(translateX) && translateX !== 0) {\n      values.push(\"translateX(\".concat(translateX, \"px)\"));\n    }\n\n    if (isNumber(translateY) && translateY !== 0) {\n      values.push(\"translateY(\".concat(translateY, \"px)\"));\n    } // Rotate should come first before scale to match orientation transform\n\n\n    if (isNumber(rotate) && rotate !== 0) {\n      values.push(\"rotate(\".concat(rotate, \"deg)\"));\n    }\n\n    if (isNumber(scaleX) && scaleX !== 1) {\n      values.push(\"scaleX(\".concat(scaleX, \")\"));\n    }\n\n    if (isNumber(scaleY) && scaleY !== 1) {\n      values.push(\"scaleY(\".concat(scaleY, \")\"));\n    }\n\n    var transform = values.length ? values.join(' ') : 'none';\n    return {\n      WebkitTransform: transform,\n      msTransform: transform,\n      transform: transform\n    };\n  }\n  /**\n   * Get the max ratio of a group of pointers.\n   * @param {string} pointers - The target pointers.\n   * @returns {number} The result ratio.\n   */\n\n  function getMaxZoomRatio(pointers) {\n    var pointers2 = assign({}, pointers);\n    var ratios = [];\n    forEach(pointers, function (pointer, pointerId) {\n      delete pointers2[pointerId];\n      forEach(pointers2, function (pointer2) {\n        var x1 = Math.abs(pointer.startX - pointer2.startX);\n        var y1 = Math.abs(pointer.startY - pointer2.startY);\n        var x2 = Math.abs(pointer.endX - pointer2.endX);\n        var y2 = Math.abs(pointer.endY - pointer2.endY);\n        var z1 = Math.sqrt(x1 * x1 + y1 * y1);\n        var z2 = Math.sqrt(x2 * x2 + y2 * y2);\n        var ratio = (z2 - z1) / z1;\n        ratios.push(ratio);\n      });\n    });\n    ratios.sort(function (a, b) {\n      return Math.abs(a) < Math.abs(b);\n    });\n    return ratios[0];\n  }\n  /**\n   * Get a pointer from an event object.\n   * @param {Object} event - The target event object.\n   * @param {boolean} endOnly - Indicates if only returns the end point coordinate or not.\n   * @returns {Object} The result pointer contains start and/or end point coordinates.\n   */\n\n  function getPointer(_ref2, endOnly) {\n    var pageX = _ref2.pageX,\n        pageY = _ref2.pageY;\n    var end = {\n      endX: pageX,\n      endY: pageY\n    };\n    return endOnly ? end : assign({\n      startX: pageX,\n      startY: pageY\n    }, end);\n  }\n  /**\n   * Get the center point coordinate of a group of pointers.\n   * @param {Object} pointers - The target pointers.\n   * @returns {Object} The center point coordinate.\n   */\n\n  function getPointersCenter(pointers) {\n    var pageX = 0;\n    var pageY = 0;\n    var count = 0;\n    forEach(pointers, function (_ref3) {\n      var startX = _ref3.startX,\n          startY = _ref3.startY;\n      pageX += startX;\n      pageY += startY;\n      count += 1;\n    });\n    pageX /= count;\n    pageY /= count;\n    return {\n      pageX: pageX,\n      pageY: pageY\n    };\n  }\n  /**\n   * Get the max sizes in a rectangle under the given aspect ratio.\n   * @param {Object} data - The original sizes.\n   * @param {string} [type='contain'] - The adjust type.\n   * @returns {Object} The result sizes.\n   */\n\n  function getAdjustedSizes(_ref4) // or 'cover'\n  {\n    var aspectRatio = _ref4.aspectRatio,\n        height = _ref4.height,\n        width = _ref4.width;\n    var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'contain';\n    var isValidWidth = isPositiveNumber(width);\n    var isValidHeight = isPositiveNumber(height);\n\n    if (isValidWidth && isValidHeight) {\n      var adjustedWidth = height * aspectRatio;\n\n      if (type === 'contain' && adjustedWidth > width || type === 'cover' && adjustedWidth < width) {\n        height = width / aspectRatio;\n      } else {\n        width = height * aspectRatio;\n      }\n    } else if (isValidWidth) {\n      height = width / aspectRatio;\n    } else if (isValidHeight) {\n      width = height * aspectRatio;\n    }\n\n    return {\n      width: width,\n      height: height\n    };\n  }\n  /**\n   * Get the new sizes of a rectangle after rotated.\n   * @param {Object} data - The original sizes.\n   * @returns {Object} The result sizes.\n   */\n\n  function getRotatedSizes(_ref5) {\n    var width = _ref5.width,\n        height = _ref5.height,\n        degree = _ref5.degree;\n    degree = Math.abs(degree) % 180;\n\n    if (degree === 90) {\n      return {\n        width: height,\n        height: width\n      };\n    }\n\n    var arc = degree % 90 * Math.PI / 180;\n    var sinArc = Math.sin(arc);\n    var cosArc = Math.cos(arc);\n    var newWidth = width * cosArc + height * sinArc;\n    var newHeight = width * sinArc + height * cosArc;\n    return degree > 90 ? {\n      width: newHeight,\n      height: newWidth\n    } : {\n      width: newWidth,\n      height: newHeight\n    };\n  }\n  /**\n   * Get a canvas which drew the given image.\n   * @param {HTMLImageElement} image - The image for drawing.\n   * @param {Object} imageData - The image data.\n   * @param {Object} canvasData - The canvas data.\n   * @param {Object} options - The options.\n   * @returns {HTMLCanvasElement} The result canvas.\n   */\n\n  function getSourceCanvas(image, _ref6, _ref7, _ref8) {\n    var imageAspectRatio = _ref6.aspectRatio,\n        imageNaturalWidth = _ref6.naturalWidth,\n        imageNaturalHeight = _ref6.naturalHeight,\n        _ref6$rotate = _ref6.rotate,\n        rotate = _ref6$rotate === void 0 ? 0 : _ref6$rotate,\n        _ref6$scaleX = _ref6.scaleX,\n        scaleX = _ref6$scaleX === void 0 ? 1 : _ref6$scaleX,\n        _ref6$scaleY = _ref6.scaleY,\n        scaleY = _ref6$scaleY === void 0 ? 1 : _ref6$scaleY;\n    var aspectRatio = _ref7.aspectRatio,\n        naturalWidth = _ref7.naturalWidth,\n        naturalHeight = _ref7.naturalHeight;\n    var _ref8$fillColor = _ref8.fillColor,\n        fillColor = _ref8$fillColor === void 0 ? 'transparent' : _ref8$fillColor,\n        _ref8$imageSmoothingE = _ref8.imageSmoothingEnabled,\n        imageSmoothingEnabled = _ref8$imageSmoothingE === void 0 ? true : _ref8$imageSmoothingE,\n        _ref8$imageSmoothingQ = _ref8.imageSmoothingQuality,\n        imageSmoothingQuality = _ref8$imageSmoothingQ === void 0 ? 'low' : _ref8$imageSmoothingQ,\n        _ref8$maxWidth = _ref8.maxWidth,\n        maxWidth = _ref8$maxWidth === void 0 ? Infinity : _ref8$maxWidth,\n        _ref8$maxHeight = _ref8.maxHeight,\n        maxHeight = _ref8$maxHeight === void 0 ? Infinity : _ref8$maxHeight,\n        _ref8$minWidth = _ref8.minWidth,\n        minWidth = _ref8$minWidth === void 0 ? 0 : _ref8$minWidth,\n        _ref8$minHeight = _ref8.minHeight,\n        minHeight = _ref8$minHeight === void 0 ? 0 : _ref8$minHeight;\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d');\n    var maxSizes = getAdjustedSizes({\n      aspectRatio: aspectRatio,\n      width: maxWidth,\n      height: maxHeight\n    });\n    var minSizes = getAdjustedSizes({\n      aspectRatio: aspectRatio,\n      width: minWidth,\n      height: minHeight\n    }, 'cover');\n    var width = Math.min(maxSizes.width, Math.max(minSizes.width, naturalWidth));\n    var height = Math.min(maxSizes.height, Math.max(minSizes.height, naturalHeight)); // Note: should always use image's natural sizes for drawing as\n    // imageData.naturalWidth === canvasData.naturalHeight when rotate % 180 === 90\n\n    var destMaxSizes = getAdjustedSizes({\n      aspectRatio: imageAspectRatio,\n      width: maxWidth,\n      height: maxHeight\n    });\n    var destMinSizes = getAdjustedSizes({\n      aspectRatio: imageAspectRatio,\n      width: minWidth,\n      height: minHeight\n    }, 'cover');\n    var destWidth = Math.min(destMaxSizes.width, Math.max(destMinSizes.width, imageNaturalWidth));\n    var destHeight = Math.min(destMaxSizes.height, Math.max(destMinSizes.height, imageNaturalHeight));\n    var params = [-destWidth / 2, -destHeight / 2, destWidth, destHeight];\n    canvas.width = normalizeDecimalNumber(width);\n    canvas.height = normalizeDecimalNumber(height);\n    context.fillStyle = fillColor;\n    context.fillRect(0, 0, width, height);\n    context.save();\n    context.translate(width / 2, height / 2);\n    context.rotate(rotate * Math.PI / 180);\n    context.scale(scaleX, scaleY);\n    context.imageSmoothingEnabled = imageSmoothingEnabled;\n    context.imageSmoothingQuality = imageSmoothingQuality;\n    context.drawImage.apply(context, [image].concat(_toConsumableArray(params.map(function (param) {\n      return Math.floor(normalizeDecimalNumber(param));\n    }))));\n    context.restore();\n    return canvas;\n  }\n  var fromCharCode = String.fromCharCode;\n  /**\n   * Get string from char code in data view.\n   * @param {DataView} dataView - The data view for read.\n   * @param {number} start - The start index.\n   * @param {number} length - The read length.\n   * @returns {string} The read result.\n   */\n\n  function getStringFromCharCode(dataView, start, length) {\n    var str = '';\n    length += start;\n\n    for (var i = start; i < length; i += 1) {\n      str += fromCharCode(dataView.getUint8(i));\n    }\n\n    return str;\n  }\n  var REGEXP_DATA_URL_HEAD = /^data:.*,/;\n  /**\n   * Transform Data URL to array buffer.\n   * @param {string} dataURL - The Data URL to transform.\n   * @returns {ArrayBuffer} The result array buffer.\n   */\n\n  function dataURLToArrayBuffer(dataURL) {\n    var base64 = dataURL.replace(REGEXP_DATA_URL_HEAD, '');\n    var binary = atob(base64);\n    var arrayBuffer = new ArrayBuffer(binary.length);\n    var uint8 = new Uint8Array(arrayBuffer);\n    forEach(uint8, function (value, i) {\n      uint8[i] = binary.charCodeAt(i);\n    });\n    return arrayBuffer;\n  }\n  /**\n   * Transform array buffer to Data URL.\n   * @param {ArrayBuffer} arrayBuffer - The array buffer to transform.\n   * @param {string} mimeType - The mime type of the Data URL.\n   * @returns {string} The result Data URL.\n   */\n\n  function arrayBufferToDataURL(arrayBuffer, mimeType) {\n    var chunks = []; // Chunk Typed Array for better performance (#435)\n\n    var chunkSize = 8192;\n    var uint8 = new Uint8Array(arrayBuffer);\n\n    while (uint8.length > 0) {\n      // XXX: Babel's `toConsumableArray` helper will throw error in IE or Safari 9\n      // eslint-disable-next-line prefer-spread\n      chunks.push(fromCharCode.apply(null, toArray(uint8.subarray(0, chunkSize))));\n      uint8 = uint8.subarray(chunkSize);\n    }\n\n    return \"data:\".concat(mimeType, \";base64,\").concat(btoa(chunks.join('')));\n  }\n  /**\n   * Get orientation value from given array buffer.\n   * @param {ArrayBuffer} arrayBuffer - The array buffer to read.\n   * @returns {number} The read orientation value.\n   */\n\n  function resetAndGetOrientation(arrayBuffer) {\n    var dataView = new DataView(arrayBuffer);\n    var orientation; // Ignores range error when the image does not have correct Exif information\n\n    try {\n      var littleEndian;\n      var app1Start;\n      var ifdStart; // Only handle JPEG image (start by 0xFFD8)\n\n      if (dataView.getUint8(0) === 0xFF && dataView.getUint8(1) === 0xD8) {\n        var length = dataView.byteLength;\n        var offset = 2;\n\n        while (offset + 1 < length) {\n          if (dataView.getUint8(offset) === 0xFF && dataView.getUint8(offset + 1) === 0xE1) {\n            app1Start = offset;\n            break;\n          }\n\n          offset += 1;\n        }\n      }\n\n      if (app1Start) {\n        var exifIDCode = app1Start + 4;\n        var tiffOffset = app1Start + 10;\n\n        if (getStringFromCharCode(dataView, exifIDCode, 4) === 'Exif') {\n          var endianness = dataView.getUint16(tiffOffset);\n          littleEndian = endianness === 0x4949;\n\n          if (littleEndian || endianness === 0x4D4D\n          /* bigEndian */\n          ) {\n              if (dataView.getUint16(tiffOffset + 2, littleEndian) === 0x002A) {\n                var firstIFDOffset = dataView.getUint32(tiffOffset + 4, littleEndian);\n\n                if (firstIFDOffset >= 0x00000008) {\n                  ifdStart = tiffOffset + firstIFDOffset;\n                }\n              }\n            }\n        }\n      }\n\n      if (ifdStart) {\n        var _length = dataView.getUint16(ifdStart, littleEndian);\n\n        var _offset;\n\n        var i;\n\n        for (i = 0; i < _length; i += 1) {\n          _offset = ifdStart + i * 12 + 2;\n\n          if (dataView.getUint16(_offset, littleEndian) === 0x0112\n          /* Orientation */\n          ) {\n              // 8 is the offset of the current tag's value\n              _offset += 8; // Get the original orientation value\n\n              orientation = dataView.getUint16(_offset, littleEndian); // Override the orientation with its default value\n\n              dataView.setUint16(_offset, 1, littleEndian);\n              break;\n            }\n        }\n      }\n    } catch (error) {\n      orientation = 1;\n    }\n\n    return orientation;\n  }\n  /**\n   * Parse Exif Orientation value.\n   * @param {number} orientation - The orientation to parse.\n   * @returns {Object} The parsed result.\n   */\n\n  function parseOrientation(orientation) {\n    var rotate = 0;\n    var scaleX = 1;\n    var scaleY = 1;\n\n    switch (orientation) {\n      // Flip horizontal\n      case 2:\n        scaleX = -1;\n        break;\n      // Rotate left 180°\n\n      case 3:\n        rotate = -180;\n        break;\n      // Flip vertical\n\n      case 4:\n        scaleY = -1;\n        break;\n      // Flip vertical and rotate right 90°\n\n      case 5:\n        rotate = 90;\n        scaleY = -1;\n        break;\n      // Rotate right 90°\n\n      case 6:\n        rotate = 90;\n        break;\n      // Flip horizontal and rotate right 90°\n\n      case 7:\n        rotate = 90;\n        scaleX = -1;\n        break;\n      // Rotate left 90°\n\n      case 8:\n        rotate = -90;\n        break;\n\n      default:\n    }\n\n    return {\n      rotate: rotate,\n      scaleX: scaleX,\n      scaleY: scaleY\n    };\n  }\n\n  var render = {\n    render: function render() {\n      this.initContainer();\n      this.initCanvas();\n      this.initCropBox();\n      this.renderCanvas();\n\n      if (this.cropped) {\n        this.renderCropBox();\n      }\n    },\n    initContainer: function initContainer() {\n      var element = this.element,\n          options = this.options,\n          container = this.container,\n          cropper = this.cropper;\n      addClass(cropper, CLASS_HIDDEN);\n      removeClass(element, CLASS_HIDDEN);\n      var containerData = {\n        width: Math.max(container.offsetWidth, Number(options.minContainerWidth) || 200),\n        height: Math.max(container.offsetHeight, Number(options.minContainerHeight) || 100)\n      };\n      this.containerData = containerData;\n      setStyle(cropper, {\n        width: containerData.width,\n        height: containerData.height\n      });\n      addClass(element, CLASS_HIDDEN);\n      removeClass(cropper, CLASS_HIDDEN);\n    },\n    // Canvas (image wrapper)\n    initCanvas: function initCanvas() {\n      var containerData = this.containerData,\n          imageData = this.imageData;\n      var viewMode = this.options.viewMode;\n      var rotated = Math.abs(imageData.rotate) % 180 === 90;\n      var naturalWidth = rotated ? imageData.naturalHeight : imageData.naturalWidth;\n      var naturalHeight = rotated ? imageData.naturalWidth : imageData.naturalHeight;\n      var aspectRatio = naturalWidth / naturalHeight;\n      var canvasWidth = containerData.width;\n      var canvasHeight = containerData.height;\n\n      if (containerData.height * aspectRatio > containerData.width) {\n        if (viewMode === 3) {\n          canvasWidth = containerData.height * aspectRatio;\n        } else {\n          canvasHeight = containerData.width / aspectRatio;\n        }\n      } else if (viewMode === 3) {\n        canvasHeight = containerData.width / aspectRatio;\n      } else {\n        canvasWidth = containerData.height * aspectRatio;\n      }\n\n      var canvasData = {\n        aspectRatio: aspectRatio,\n        naturalWidth: naturalWidth,\n        naturalHeight: naturalHeight,\n        width: canvasWidth,\n        height: canvasHeight\n      };\n      canvasData.left = (containerData.width - canvasWidth) / 2;\n      canvasData.top = (containerData.height - canvasHeight) / 2;\n      canvasData.oldLeft = canvasData.left;\n      canvasData.oldTop = canvasData.top;\n      this.canvasData = canvasData;\n      this.limited = viewMode === 1 || viewMode === 2;\n      this.limitCanvas(true, true);\n      this.initialImageData = assign({}, imageData);\n      this.initialCanvasData = assign({}, canvasData);\n    },\n    limitCanvas: function limitCanvas(sizeLimited, positionLimited) {\n      var options = this.options,\n          containerData = this.containerData,\n          canvasData = this.canvasData,\n          cropBoxData = this.cropBoxData;\n      var viewMode = options.viewMode;\n      var aspectRatio = canvasData.aspectRatio;\n      var cropped = this.cropped && cropBoxData;\n\n      if (sizeLimited) {\n        var minCanvasWidth = Number(options.minCanvasWidth) || 0;\n        var minCanvasHeight = Number(options.minCanvasHeight) || 0;\n\n        if (viewMode > 1) {\n          minCanvasWidth = Math.max(minCanvasWidth, containerData.width);\n          minCanvasHeight = Math.max(minCanvasHeight, containerData.height);\n\n          if (viewMode === 3) {\n            if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n              minCanvasWidth = minCanvasHeight * aspectRatio;\n            } else {\n              minCanvasHeight = minCanvasWidth / aspectRatio;\n            }\n          }\n        } else if (viewMode > 0) {\n          if (minCanvasWidth) {\n            minCanvasWidth = Math.max(minCanvasWidth, cropped ? cropBoxData.width : 0);\n          } else if (minCanvasHeight) {\n            minCanvasHeight = Math.max(minCanvasHeight, cropped ? cropBoxData.height : 0);\n          } else if (cropped) {\n            minCanvasWidth = cropBoxData.width;\n            minCanvasHeight = cropBoxData.height;\n\n            if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n              minCanvasWidth = minCanvasHeight * aspectRatio;\n            } else {\n              minCanvasHeight = minCanvasWidth / aspectRatio;\n            }\n          }\n        }\n\n        var _getAdjustedSizes = getAdjustedSizes({\n          aspectRatio: aspectRatio,\n          width: minCanvasWidth,\n          height: minCanvasHeight\n        });\n\n        minCanvasWidth = _getAdjustedSizes.width;\n        minCanvasHeight = _getAdjustedSizes.height;\n        canvasData.minWidth = minCanvasWidth;\n        canvasData.minHeight = minCanvasHeight;\n        canvasData.maxWidth = Infinity;\n        canvasData.maxHeight = Infinity;\n      }\n\n      if (positionLimited) {\n        if (viewMode > (cropped ? 0 : 1)) {\n          var newCanvasLeft = containerData.width - canvasData.width;\n          var newCanvasTop = containerData.height - canvasData.height;\n          canvasData.minLeft = Math.min(0, newCanvasLeft);\n          canvasData.minTop = Math.min(0, newCanvasTop);\n          canvasData.maxLeft = Math.max(0, newCanvasLeft);\n          canvasData.maxTop = Math.max(0, newCanvasTop);\n\n          if (cropped && this.limited) {\n            canvasData.minLeft = Math.min(cropBoxData.left, cropBoxData.left + (cropBoxData.width - canvasData.width));\n            canvasData.minTop = Math.min(cropBoxData.top, cropBoxData.top + (cropBoxData.height - canvasData.height));\n            canvasData.maxLeft = cropBoxData.left;\n            canvasData.maxTop = cropBoxData.top;\n\n            if (viewMode === 2) {\n              if (canvasData.width >= containerData.width) {\n                canvasData.minLeft = Math.min(0, newCanvasLeft);\n                canvasData.maxLeft = Math.max(0, newCanvasLeft);\n              }\n\n              if (canvasData.height >= containerData.height) {\n                canvasData.minTop = Math.min(0, newCanvasTop);\n                canvasData.maxTop = Math.max(0, newCanvasTop);\n              }\n            }\n          }\n        } else {\n          canvasData.minLeft = -canvasData.width;\n          canvasData.minTop = -canvasData.height;\n          canvasData.maxLeft = containerData.width;\n          canvasData.maxTop = containerData.height;\n        }\n      }\n    },\n    renderCanvas: function renderCanvas(changed, transformed) {\n      var canvasData = this.canvasData,\n          imageData = this.imageData;\n\n      if (transformed) {\n        var _getRotatedSizes = getRotatedSizes({\n          width: imageData.naturalWidth * Math.abs(imageData.scaleX || 1),\n          height: imageData.naturalHeight * Math.abs(imageData.scaleY || 1),\n          degree: imageData.rotate || 0\n        }),\n            naturalWidth = _getRotatedSizes.width,\n            naturalHeight = _getRotatedSizes.height;\n\n        var width = canvasData.width * (naturalWidth / canvasData.naturalWidth);\n        var height = canvasData.height * (naturalHeight / canvasData.naturalHeight);\n        canvasData.left -= (width - canvasData.width) / 2;\n        canvasData.top -= (height - canvasData.height) / 2;\n        canvasData.width = width;\n        canvasData.height = height;\n        canvasData.aspectRatio = naturalWidth / naturalHeight;\n        canvasData.naturalWidth = naturalWidth;\n        canvasData.naturalHeight = naturalHeight;\n        this.limitCanvas(true, false);\n      }\n\n      if (canvasData.width > canvasData.maxWidth || canvasData.width < canvasData.minWidth) {\n        canvasData.left = canvasData.oldLeft;\n      }\n\n      if (canvasData.height > canvasData.maxHeight || canvasData.height < canvasData.minHeight) {\n        canvasData.top = canvasData.oldTop;\n      }\n\n      canvasData.width = Math.min(Math.max(canvasData.width, canvasData.minWidth), canvasData.maxWidth);\n      canvasData.height = Math.min(Math.max(canvasData.height, canvasData.minHeight), canvasData.maxHeight);\n      this.limitCanvas(false, true);\n      canvasData.left = Math.min(Math.max(canvasData.left, canvasData.minLeft), canvasData.maxLeft);\n      canvasData.top = Math.min(Math.max(canvasData.top, canvasData.minTop), canvasData.maxTop);\n      canvasData.oldLeft = canvasData.left;\n      canvasData.oldTop = canvasData.top;\n      setStyle(this.canvas, assign({\n        width: canvasData.width,\n        height: canvasData.height\n      }, getTransforms({\n        translateX: canvasData.left,\n        translateY: canvasData.top\n      })));\n      this.renderImage(changed);\n\n      if (this.cropped && this.limited) {\n        this.limitCropBox(true, true);\n      }\n    },\n    renderImage: function renderImage(changed) {\n      var canvasData = this.canvasData,\n          imageData = this.imageData;\n      var width = imageData.naturalWidth * (canvasData.width / canvasData.naturalWidth);\n      var height = imageData.naturalHeight * (canvasData.height / canvasData.naturalHeight);\n      assign(imageData, {\n        width: width,\n        height: height,\n        left: (canvasData.width - width) / 2,\n        top: (canvasData.height - height) / 2\n      });\n      setStyle(this.image, assign({\n        width: imageData.width,\n        height: imageData.height\n      }, getTransforms(assign({\n        translateX: imageData.left,\n        translateY: imageData.top\n      }, imageData))));\n\n      if (changed) {\n        this.output();\n      }\n    },\n    initCropBox: function initCropBox() {\n      var options = this.options,\n          canvasData = this.canvasData;\n      var aspectRatio = options.aspectRatio || options.initialAspectRatio;\n      var autoCropArea = Number(options.autoCropArea) || 0.8;\n      var cropBoxData = {\n        width: canvasData.width,\n        height: canvasData.height\n      };\n\n      if (aspectRatio) {\n        if (canvasData.height * aspectRatio > canvasData.width) {\n          cropBoxData.height = cropBoxData.width / aspectRatio;\n        } else {\n          cropBoxData.width = cropBoxData.height * aspectRatio;\n        }\n      }\n\n      this.cropBoxData = cropBoxData;\n      this.limitCropBox(true, true); // Initialize auto crop area\n\n      cropBoxData.width = Math.min(Math.max(cropBoxData.width, cropBoxData.minWidth), cropBoxData.maxWidth);\n      cropBoxData.height = Math.min(Math.max(cropBoxData.height, cropBoxData.minHeight), cropBoxData.maxHeight); // The width/height of auto crop area must large than \"minWidth/Height\"\n\n      cropBoxData.width = Math.max(cropBoxData.minWidth, cropBoxData.width * autoCropArea);\n      cropBoxData.height = Math.max(cropBoxData.minHeight, cropBoxData.height * autoCropArea);\n      cropBoxData.left = canvasData.left + (canvasData.width - cropBoxData.width) / 2;\n      cropBoxData.top = canvasData.top + (canvasData.height - cropBoxData.height) / 2;\n      cropBoxData.oldLeft = cropBoxData.left;\n      cropBoxData.oldTop = cropBoxData.top;\n      this.initialCropBoxData = assign({}, cropBoxData);\n    },\n    limitCropBox: function limitCropBox(sizeLimited, positionLimited) {\n      var options = this.options,\n          containerData = this.containerData,\n          canvasData = this.canvasData,\n          cropBoxData = this.cropBoxData,\n          limited = this.limited;\n      var aspectRatio = options.aspectRatio;\n\n      if (sizeLimited) {\n        var minCropBoxWidth = Number(options.minCropBoxWidth) || 0;\n        var minCropBoxHeight = Number(options.minCropBoxHeight) || 0;\n        var maxCropBoxWidth = limited ? Math.min(containerData.width, canvasData.width, canvasData.width + canvasData.left, containerData.width - canvasData.left) : containerData.width;\n        var maxCropBoxHeight = limited ? Math.min(containerData.height, canvasData.height, canvasData.height + canvasData.top, containerData.height - canvasData.top) : containerData.height; // The min/maxCropBoxWidth/Height must be less than container's width/height\n\n        minCropBoxWidth = Math.min(minCropBoxWidth, containerData.width);\n        minCropBoxHeight = Math.min(minCropBoxHeight, containerData.height);\n\n        if (aspectRatio) {\n          if (minCropBoxWidth && minCropBoxHeight) {\n            if (minCropBoxHeight * aspectRatio > minCropBoxWidth) {\n              minCropBoxHeight = minCropBoxWidth / aspectRatio;\n            } else {\n              minCropBoxWidth = minCropBoxHeight * aspectRatio;\n            }\n          } else if (minCropBoxWidth) {\n            minCropBoxHeight = minCropBoxWidth / aspectRatio;\n          } else if (minCropBoxHeight) {\n            minCropBoxWidth = minCropBoxHeight * aspectRatio;\n          }\n\n          if (maxCropBoxHeight * aspectRatio > maxCropBoxWidth) {\n            maxCropBoxHeight = maxCropBoxWidth / aspectRatio;\n          } else {\n            maxCropBoxWidth = maxCropBoxHeight * aspectRatio;\n          }\n        } // The minWidth/Height must be less than maxWidth/Height\n\n\n        cropBoxData.minWidth = Math.min(minCropBoxWidth, maxCropBoxWidth);\n        cropBoxData.minHeight = Math.min(minCropBoxHeight, maxCropBoxHeight);\n        cropBoxData.maxWidth = maxCropBoxWidth;\n        cropBoxData.maxHeight = maxCropBoxHeight;\n      }\n\n      if (positionLimited) {\n        if (limited) {\n          cropBoxData.minLeft = Math.max(0, canvasData.left);\n          cropBoxData.minTop = Math.max(0, canvasData.top);\n          cropBoxData.maxLeft = Math.min(containerData.width, canvasData.left + canvasData.width) - cropBoxData.width;\n          cropBoxData.maxTop = Math.min(containerData.height, canvasData.top + canvasData.height) - cropBoxData.height;\n        } else {\n          cropBoxData.minLeft = 0;\n          cropBoxData.minTop = 0;\n          cropBoxData.maxLeft = containerData.width - cropBoxData.width;\n          cropBoxData.maxTop = containerData.height - cropBoxData.height;\n        }\n      }\n    },\n    renderCropBox: function renderCropBox() {\n      var options = this.options,\n          containerData = this.containerData,\n          cropBoxData = this.cropBoxData;\n\n      if (cropBoxData.width > cropBoxData.maxWidth || cropBoxData.width < cropBoxData.minWidth) {\n        cropBoxData.left = cropBoxData.oldLeft;\n      }\n\n      if (cropBoxData.height > cropBoxData.maxHeight || cropBoxData.height < cropBoxData.minHeight) {\n        cropBoxData.top = cropBoxData.oldTop;\n      }\n\n      cropBoxData.width = Math.min(Math.max(cropBoxData.width, cropBoxData.minWidth), cropBoxData.maxWidth);\n      cropBoxData.height = Math.min(Math.max(cropBoxData.height, cropBoxData.minHeight), cropBoxData.maxHeight);\n      this.limitCropBox(false, true);\n      cropBoxData.left = Math.min(Math.max(cropBoxData.left, cropBoxData.minLeft), cropBoxData.maxLeft);\n      cropBoxData.top = Math.min(Math.max(cropBoxData.top, cropBoxData.minTop), cropBoxData.maxTop);\n      cropBoxData.oldLeft = cropBoxData.left;\n      cropBoxData.oldTop = cropBoxData.top;\n\n      if (options.movable && options.cropBoxMovable) {\n        // Turn to move the canvas when the crop box is equal to the container\n        setData(this.face, DATA_ACTION, cropBoxData.width >= containerData.width && cropBoxData.height >= containerData.height ? ACTION_MOVE : ACTION_ALL);\n      }\n\n      setStyle(this.cropBox, assign({\n        width: cropBoxData.width,\n        height: cropBoxData.height\n      }, getTransforms({\n        translateX: cropBoxData.left,\n        translateY: cropBoxData.top\n      })));\n\n      if (this.cropped && this.limited) {\n        this.limitCanvas(true, true);\n      }\n\n      if (!this.disabled) {\n        this.output();\n      }\n    },\n    output: function output() {\n      this.preview();\n      dispatchEvent(this.element, EVENT_CROP, this.getData());\n    }\n  };\n\n  var preview = {\n    initPreview: function initPreview() {\n      var element = this.element,\n          crossOrigin = this.crossOrigin;\n      var preview = this.options.preview;\n      var url = crossOrigin ? this.crossOriginUrl : this.url;\n      var alt = element.alt || 'The image to preview';\n      var image = document.createElement('img');\n\n      if (crossOrigin) {\n        image.crossOrigin = crossOrigin;\n      }\n\n      image.src = url;\n      image.alt = alt;\n      this.viewBox.appendChild(image);\n      this.viewBoxImage = image;\n\n      if (!preview) {\n        return;\n      }\n\n      var previews = preview;\n\n      if (typeof preview === 'string') {\n        previews = element.ownerDocument.querySelectorAll(preview);\n      } else if (preview.querySelector) {\n        previews = [preview];\n      }\n\n      this.previews = previews;\n      forEach(previews, function (el) {\n        var img = document.createElement('img'); // Save the original size for recover\n\n        setData(el, DATA_PREVIEW, {\n          width: el.offsetWidth,\n          height: el.offsetHeight,\n          html: el.innerHTML\n        });\n\n        if (crossOrigin) {\n          img.crossOrigin = crossOrigin;\n        }\n\n        img.src = url;\n        img.alt = alt;\n        /**\n         * Override img element styles\n         * Add `display:block` to avoid margin top issue\n         * Add `height:auto` to override `height` attribute on IE8\n         * (Occur only when margin-top <= -height)\n         */\n\n        img.style.cssText = 'display:block;' + 'width:100%;' + 'height:auto;' + 'min-width:0!important;' + 'min-height:0!important;' + 'max-width:none!important;' + 'max-height:none!important;' + 'image-orientation:0deg!important;\"';\n        el.innerHTML = '';\n        el.appendChild(img);\n      });\n    },\n    resetPreview: function resetPreview() {\n      forEach(this.previews, function (element) {\n        var data = getData(element, DATA_PREVIEW);\n        setStyle(element, {\n          width: data.width,\n          height: data.height\n        });\n        element.innerHTML = data.html;\n        removeData(element, DATA_PREVIEW);\n      });\n    },\n    preview: function preview() {\n      var imageData = this.imageData,\n          canvasData = this.canvasData,\n          cropBoxData = this.cropBoxData;\n      var cropBoxWidth = cropBoxData.width,\n          cropBoxHeight = cropBoxData.height;\n      var width = imageData.width,\n          height = imageData.height;\n      var left = cropBoxData.left - canvasData.left - imageData.left;\n      var top = cropBoxData.top - canvasData.top - imageData.top;\n\n      if (!this.cropped || this.disabled) {\n        return;\n      }\n\n      setStyle(this.viewBoxImage, assign({\n        width: width,\n        height: height\n      }, getTransforms(assign({\n        translateX: -left,\n        translateY: -top\n      }, imageData))));\n      forEach(this.previews, function (element) {\n        var data = getData(element, DATA_PREVIEW);\n        var originalWidth = data.width;\n        var originalHeight = data.height;\n        var newWidth = originalWidth;\n        var newHeight = originalHeight;\n        var ratio = 1;\n\n        if (cropBoxWidth) {\n          ratio = originalWidth / cropBoxWidth;\n          newHeight = cropBoxHeight * ratio;\n        }\n\n        if (cropBoxHeight && newHeight > originalHeight) {\n          ratio = originalHeight / cropBoxHeight;\n          newWidth = cropBoxWidth * ratio;\n          newHeight = originalHeight;\n        }\n\n        setStyle(element, {\n          width: newWidth,\n          height: newHeight\n        });\n        setStyle(element.getElementsByTagName('img')[0], assign({\n          width: width * ratio,\n          height: height * ratio\n        }, getTransforms(assign({\n          translateX: -left * ratio,\n          translateY: -top * ratio\n        }, imageData))));\n      });\n    }\n  };\n\n  var events = {\n    bind: function bind() {\n      var element = this.element,\n          options = this.options,\n          cropper = this.cropper;\n\n      if (isFunction(options.cropstart)) {\n        addListener(element, EVENT_CROP_START, options.cropstart);\n      }\n\n      if (isFunction(options.cropmove)) {\n        addListener(element, EVENT_CROP_MOVE, options.cropmove);\n      }\n\n      if (isFunction(options.cropend)) {\n        addListener(element, EVENT_CROP_END, options.cropend);\n      }\n\n      if (isFunction(options.crop)) {\n        addListener(element, EVENT_CROP, options.crop);\n      }\n\n      if (isFunction(options.zoom)) {\n        addListener(element, EVENT_ZOOM, options.zoom);\n      }\n\n      addListener(cropper, EVENT_POINTER_DOWN, this.onCropStart = this.cropStart.bind(this));\n\n      if (options.zoomable && options.zoomOnWheel) {\n        addListener(cropper, EVENT_WHEEL, this.onWheel = this.wheel.bind(this), {\n          passive: false,\n          capture: true\n        });\n      }\n\n      if (options.toggleDragModeOnDblclick) {\n        addListener(cropper, EVENT_DBLCLICK, this.onDblclick = this.dblclick.bind(this));\n      }\n\n      addListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onCropMove = this.cropMove.bind(this));\n      addListener(element.ownerDocument, EVENT_POINTER_UP, this.onCropEnd = this.cropEnd.bind(this));\n\n      if (options.responsive) {\n        addListener(window, EVENT_RESIZE, this.onResize = this.resize.bind(this));\n      }\n    },\n    unbind: function unbind() {\n      var element = this.element,\n          options = this.options,\n          cropper = this.cropper;\n\n      if (isFunction(options.cropstart)) {\n        removeListener(element, EVENT_CROP_START, options.cropstart);\n      }\n\n      if (isFunction(options.cropmove)) {\n        removeListener(element, EVENT_CROP_MOVE, options.cropmove);\n      }\n\n      if (isFunction(options.cropend)) {\n        removeListener(element, EVENT_CROP_END, options.cropend);\n      }\n\n      if (isFunction(options.crop)) {\n        removeListener(element, EVENT_CROP, options.crop);\n      }\n\n      if (isFunction(options.zoom)) {\n        removeListener(element, EVENT_ZOOM, options.zoom);\n      }\n\n      removeListener(cropper, EVENT_POINTER_DOWN, this.onCropStart);\n\n      if (options.zoomable && options.zoomOnWheel) {\n        removeListener(cropper, EVENT_WHEEL, this.onWheel, {\n          passive: false,\n          capture: true\n        });\n      }\n\n      if (options.toggleDragModeOnDblclick) {\n        removeListener(cropper, EVENT_DBLCLICK, this.onDblclick);\n      }\n\n      removeListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onCropMove);\n      removeListener(element.ownerDocument, EVENT_POINTER_UP, this.onCropEnd);\n\n      if (options.responsive) {\n        removeListener(window, EVENT_RESIZE, this.onResize);\n      }\n    }\n  };\n\n  var handlers = {\n    resize: function resize() {\n      var options = this.options,\n          container = this.container,\n          containerData = this.containerData;\n      var minContainerWidth = Number(options.minContainerWidth) || MIN_CONTAINER_WIDTH;\n      var minContainerHeight = Number(options.minContainerHeight) || MIN_CONTAINER_HEIGHT;\n\n      if (this.disabled || containerData.width <= minContainerWidth || containerData.height <= minContainerHeight) {\n        return;\n      }\n\n      var ratio = container.offsetWidth / containerData.width; // Resize when width changed or height changed\n\n      if (ratio !== 1 || container.offsetHeight !== containerData.height) {\n        var canvasData;\n        var cropBoxData;\n\n        if (options.restore) {\n          canvasData = this.getCanvasData();\n          cropBoxData = this.getCropBoxData();\n        }\n\n        this.render();\n\n        if (options.restore) {\n          this.setCanvasData(forEach(canvasData, function (n, i) {\n            canvasData[i] = n * ratio;\n          }));\n          this.setCropBoxData(forEach(cropBoxData, function (n, i) {\n            cropBoxData[i] = n * ratio;\n          }));\n        }\n      }\n    },\n    dblclick: function dblclick() {\n      if (this.disabled || this.options.dragMode === DRAG_MODE_NONE) {\n        return;\n      }\n\n      this.setDragMode(hasClass(this.dragBox, CLASS_CROP) ? DRAG_MODE_MOVE : DRAG_MODE_CROP);\n    },\n    wheel: function wheel(event) {\n      var _this = this;\n\n      var ratio = Number(this.options.wheelZoomRatio) || 0.1;\n      var delta = 1;\n\n      if (this.disabled) {\n        return;\n      }\n\n      event.preventDefault(); // Limit wheel speed to prevent zoom too fast (#21)\n\n      if (this.wheeling) {\n        return;\n      }\n\n      this.wheeling = true;\n      setTimeout(function () {\n        _this.wheeling = false;\n      }, 50);\n\n      if (event.deltaY) {\n        delta = event.deltaY > 0 ? 1 : -1;\n      } else if (event.wheelDelta) {\n        delta = -event.wheelDelta / 120;\n      } else if (event.detail) {\n        delta = event.detail > 0 ? 1 : -1;\n      }\n\n      this.zoom(-delta * ratio, event);\n    },\n    cropStart: function cropStart(event) {\n      var buttons = event.buttons,\n          button = event.button;\n\n      if (this.disabled // No primary button (Usually the left button)\n      // Note that touch events have no `buttons` or `button` property\n      || isNumber(buttons) && buttons !== 1 || isNumber(button) && button !== 0 // Open context menu\n      || event.ctrlKey) {\n        return;\n      }\n\n      var options = this.options,\n          pointers = this.pointers;\n      var action;\n\n      if (event.changedTouches) {\n        // Handle touch event\n        forEach(event.changedTouches, function (touch) {\n          pointers[touch.identifier] = getPointer(touch);\n        });\n      } else {\n        // Handle mouse event and pointer event\n        pointers[event.pointerId || 0] = getPointer(event);\n      }\n\n      if (Object.keys(pointers).length > 1 && options.zoomable && options.zoomOnTouch) {\n        action = ACTION_ZOOM;\n      } else {\n        action = getData(event.target, DATA_ACTION);\n      }\n\n      if (!REGEXP_ACTIONS.test(action)) {\n        return;\n      }\n\n      if (dispatchEvent(this.element, EVENT_CROP_START, {\n        originalEvent: event,\n        action: action\n      }) === false) {\n        return;\n      } // This line is required for preventing page zooming in iOS browsers\n\n\n      event.preventDefault();\n      this.action = action;\n      this.cropping = false;\n\n      if (action === ACTION_CROP) {\n        this.cropping = true;\n        addClass(this.dragBox, CLASS_MODAL);\n      }\n    },\n    cropMove: function cropMove(event) {\n      var action = this.action;\n\n      if (this.disabled || !action) {\n        return;\n      }\n\n      var pointers = this.pointers;\n      event.preventDefault();\n\n      if (dispatchEvent(this.element, EVENT_CROP_MOVE, {\n        originalEvent: event,\n        action: action\n      }) === false) {\n        return;\n      }\n\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          // The first parameter should not be undefined (#432)\n          assign(pointers[touch.identifier] || {}, getPointer(touch, true));\n        });\n      } else {\n        assign(pointers[event.pointerId || 0] || {}, getPointer(event, true));\n      }\n\n      this.change(event);\n    },\n    cropEnd: function cropEnd(event) {\n      if (this.disabled) {\n        return;\n      }\n\n      var action = this.action,\n          pointers = this.pointers;\n\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          delete pointers[touch.identifier];\n        });\n      } else {\n        delete pointers[event.pointerId || 0];\n      }\n\n      if (!action) {\n        return;\n      }\n\n      event.preventDefault();\n\n      if (!Object.keys(pointers).length) {\n        this.action = '';\n      }\n\n      if (this.cropping) {\n        this.cropping = false;\n        toggleClass(this.dragBox, CLASS_MODAL, this.cropped && this.options.modal);\n      }\n\n      dispatchEvent(this.element, EVENT_CROP_END, {\n        originalEvent: event,\n        action: action\n      });\n    }\n  };\n\n  var change = {\n    change: function change(event) {\n      var options = this.options,\n          canvasData = this.canvasData,\n          containerData = this.containerData,\n          cropBoxData = this.cropBoxData,\n          pointers = this.pointers;\n      var action = this.action;\n      var aspectRatio = options.aspectRatio;\n      var left = cropBoxData.left,\n          top = cropBoxData.top,\n          width = cropBoxData.width,\n          height = cropBoxData.height;\n      var right = left + width;\n      var bottom = top + height;\n      var minLeft = 0;\n      var minTop = 0;\n      var maxWidth = containerData.width;\n      var maxHeight = containerData.height;\n      var renderable = true;\n      var offset; // Locking aspect ratio in \"free mode\" by holding shift key\n\n      if (!aspectRatio && event.shiftKey) {\n        aspectRatio = width && height ? width / height : 1;\n      }\n\n      if (this.limited) {\n        minLeft = cropBoxData.minLeft;\n        minTop = cropBoxData.minTop;\n        maxWidth = minLeft + Math.min(containerData.width, canvasData.width, canvasData.left + canvasData.width);\n        maxHeight = minTop + Math.min(containerData.height, canvasData.height, canvasData.top + canvasData.height);\n      }\n\n      var pointer = pointers[Object.keys(pointers)[0]];\n      var range = {\n        x: pointer.endX - pointer.startX,\n        y: pointer.endY - pointer.startY\n      };\n\n      var check = function check(side) {\n        switch (side) {\n          case ACTION_EAST:\n            if (right + range.x > maxWidth) {\n              range.x = maxWidth - right;\n            }\n\n            break;\n\n          case ACTION_WEST:\n            if (left + range.x < minLeft) {\n              range.x = minLeft - left;\n            }\n\n            break;\n\n          case ACTION_NORTH:\n            if (top + range.y < minTop) {\n              range.y = minTop - top;\n            }\n\n            break;\n\n          case ACTION_SOUTH:\n            if (bottom + range.y > maxHeight) {\n              range.y = maxHeight - bottom;\n            }\n\n            break;\n\n          default:\n        }\n      };\n\n      switch (action) {\n        // Move crop box\n        case ACTION_ALL:\n          left += range.x;\n          top += range.y;\n          break;\n        // Resize crop box\n\n        case ACTION_EAST:\n          if (range.x >= 0 && (right >= maxWidth || aspectRatio && (top <= minTop || bottom >= maxHeight))) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_EAST);\n          width += range.x;\n\n          if (width < 0) {\n            action = ACTION_WEST;\n            width = -width;\n            left -= width;\n          }\n\n          if (aspectRatio) {\n            height = width / aspectRatio;\n            top += (cropBoxData.height - height) / 2;\n          }\n\n          break;\n\n        case ACTION_NORTH:\n          if (range.y <= 0 && (top <= minTop || aspectRatio && (left <= minLeft || right >= maxWidth))) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_NORTH);\n          height -= range.y;\n          top += range.y;\n\n          if (height < 0) {\n            action = ACTION_SOUTH;\n            height = -height;\n            top -= height;\n          }\n\n          if (aspectRatio) {\n            width = height * aspectRatio;\n            left += (cropBoxData.width - width) / 2;\n          }\n\n          break;\n\n        case ACTION_WEST:\n          if (range.x <= 0 && (left <= minLeft || aspectRatio && (top <= minTop || bottom >= maxHeight))) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_WEST);\n          width -= range.x;\n          left += range.x;\n\n          if (width < 0) {\n            action = ACTION_EAST;\n            width = -width;\n            left -= width;\n          }\n\n          if (aspectRatio) {\n            height = width / aspectRatio;\n            top += (cropBoxData.height - height) / 2;\n          }\n\n          break;\n\n        case ACTION_SOUTH:\n          if (range.y >= 0 && (bottom >= maxHeight || aspectRatio && (left <= minLeft || right >= maxWidth))) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_SOUTH);\n          height += range.y;\n\n          if (height < 0) {\n            action = ACTION_NORTH;\n            height = -height;\n            top -= height;\n          }\n\n          if (aspectRatio) {\n            width = height * aspectRatio;\n            left += (cropBoxData.width - width) / 2;\n          }\n\n          break;\n\n        case ACTION_NORTH_EAST:\n          if (aspectRatio) {\n            if (range.y <= 0 && (top <= minTop || right >= maxWidth)) {\n              renderable = false;\n              break;\n            }\n\n            check(ACTION_NORTH);\n            height -= range.y;\n            top += range.y;\n            width = height * aspectRatio;\n          } else {\n            check(ACTION_NORTH);\n            check(ACTION_EAST);\n\n            if (range.x >= 0) {\n              if (right < maxWidth) {\n                width += range.x;\n              } else if (range.y <= 0 && top <= minTop) {\n                renderable = false;\n              }\n            } else {\n              width += range.x;\n            }\n\n            if (range.y <= 0) {\n              if (top > minTop) {\n                height -= range.y;\n                top += range.y;\n              }\n            } else {\n              height -= range.y;\n              top += range.y;\n            }\n          }\n\n          if (width < 0 && height < 0) {\n            action = ACTION_SOUTH_WEST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_NORTH_WEST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_SOUTH_EAST;\n            height = -height;\n            top -= height;\n          }\n\n          break;\n\n        case ACTION_NORTH_WEST:\n          if (aspectRatio) {\n            if (range.y <= 0 && (top <= minTop || left <= minLeft)) {\n              renderable = false;\n              break;\n            }\n\n            check(ACTION_NORTH);\n            height -= range.y;\n            top += range.y;\n            width = height * aspectRatio;\n            left += cropBoxData.width - width;\n          } else {\n            check(ACTION_NORTH);\n            check(ACTION_WEST);\n\n            if (range.x <= 0) {\n              if (left > minLeft) {\n                width -= range.x;\n                left += range.x;\n              } else if (range.y <= 0 && top <= minTop) {\n                renderable = false;\n              }\n            } else {\n              width -= range.x;\n              left += range.x;\n            }\n\n            if (range.y <= 0) {\n              if (top > minTop) {\n                height -= range.y;\n                top += range.y;\n              }\n            } else {\n              height -= range.y;\n              top += range.y;\n            }\n          }\n\n          if (width < 0 && height < 0) {\n            action = ACTION_SOUTH_EAST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_NORTH_EAST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_SOUTH_WEST;\n            height = -height;\n            top -= height;\n          }\n\n          break;\n\n        case ACTION_SOUTH_WEST:\n          if (aspectRatio) {\n            if (range.x <= 0 && (left <= minLeft || bottom >= maxHeight)) {\n              renderable = false;\n              break;\n            }\n\n            check(ACTION_WEST);\n            width -= range.x;\n            left += range.x;\n            height = width / aspectRatio;\n          } else {\n            check(ACTION_SOUTH);\n            check(ACTION_WEST);\n\n            if (range.x <= 0) {\n              if (left > minLeft) {\n                width -= range.x;\n                left += range.x;\n              } else if (range.y >= 0 && bottom >= maxHeight) {\n                renderable = false;\n              }\n            } else {\n              width -= range.x;\n              left += range.x;\n            }\n\n            if (range.y >= 0) {\n              if (bottom < maxHeight) {\n                height += range.y;\n              }\n            } else {\n              height += range.y;\n            }\n          }\n\n          if (width < 0 && height < 0) {\n            action = ACTION_NORTH_EAST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_SOUTH_EAST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_NORTH_WEST;\n            height = -height;\n            top -= height;\n          }\n\n          break;\n\n        case ACTION_SOUTH_EAST:\n          if (aspectRatio) {\n            if (range.x >= 0 && (right >= maxWidth || bottom >= maxHeight)) {\n              renderable = false;\n              break;\n            }\n\n            check(ACTION_EAST);\n            width += range.x;\n            height = width / aspectRatio;\n          } else {\n            check(ACTION_SOUTH);\n            check(ACTION_EAST);\n\n            if (range.x >= 0) {\n              if (right < maxWidth) {\n                width += range.x;\n              } else if (range.y >= 0 && bottom >= maxHeight) {\n                renderable = false;\n              }\n            } else {\n              width += range.x;\n            }\n\n            if (range.y >= 0) {\n              if (bottom < maxHeight) {\n                height += range.y;\n              }\n            } else {\n              height += range.y;\n            }\n          }\n\n          if (width < 0 && height < 0) {\n            action = ACTION_NORTH_WEST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_SOUTH_WEST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_NORTH_EAST;\n            height = -height;\n            top -= height;\n          }\n\n          break;\n        // Move canvas\n\n        case ACTION_MOVE:\n          this.move(range.x, range.y);\n          renderable = false;\n          break;\n        // Zoom canvas\n\n        case ACTION_ZOOM:\n          this.zoom(getMaxZoomRatio(pointers), event);\n          renderable = false;\n          break;\n        // Create crop box\n\n        case ACTION_CROP:\n          if (!range.x || !range.y) {\n            renderable = false;\n            break;\n          }\n\n          offset = getOffset(this.cropper);\n          left = pointer.startX - offset.left;\n          top = pointer.startY - offset.top;\n          width = cropBoxData.minWidth;\n          height = cropBoxData.minHeight;\n\n          if (range.x > 0) {\n            action = range.y > 0 ? ACTION_SOUTH_EAST : ACTION_NORTH_EAST;\n          } else if (range.x < 0) {\n            left -= width;\n            action = range.y > 0 ? ACTION_SOUTH_WEST : ACTION_NORTH_WEST;\n          }\n\n          if (range.y < 0) {\n            top -= height;\n          } // Show the crop box if is hidden\n\n\n          if (!this.cropped) {\n            removeClass(this.cropBox, CLASS_HIDDEN);\n            this.cropped = true;\n\n            if (this.limited) {\n              this.limitCropBox(true, true);\n            }\n          }\n\n          break;\n\n        default:\n      }\n\n      if (renderable) {\n        cropBoxData.width = width;\n        cropBoxData.height = height;\n        cropBoxData.left = left;\n        cropBoxData.top = top;\n        this.action = action;\n        this.renderCropBox();\n      } // Override\n\n\n      forEach(pointers, function (p) {\n        p.startX = p.endX;\n        p.startY = p.endY;\n      });\n    }\n  };\n\n  var methods = {\n    // Show the crop box manually\n    crop: function crop() {\n      if (this.ready && !this.cropped && !this.disabled) {\n        this.cropped = true;\n        this.limitCropBox(true, true);\n\n        if (this.options.modal) {\n          addClass(this.dragBox, CLASS_MODAL);\n        }\n\n        removeClass(this.cropBox, CLASS_HIDDEN);\n        this.setCropBoxData(this.initialCropBoxData);\n      }\n\n      return this;\n    },\n    // Reset the image and crop box to their initial states\n    reset: function reset() {\n      if (this.ready && !this.disabled) {\n        this.imageData = assign({}, this.initialImageData);\n        this.canvasData = assign({}, this.initialCanvasData);\n        this.cropBoxData = assign({}, this.initialCropBoxData);\n        this.renderCanvas();\n\n        if (this.cropped) {\n          this.renderCropBox();\n        }\n      }\n\n      return this;\n    },\n    // Clear the crop box\n    clear: function clear() {\n      if (this.cropped && !this.disabled) {\n        assign(this.cropBoxData, {\n          left: 0,\n          top: 0,\n          width: 0,\n          height: 0\n        });\n        this.cropped = false;\n        this.renderCropBox();\n        this.limitCanvas(true, true); // Render canvas after crop box rendered\n\n        this.renderCanvas();\n        removeClass(this.dragBox, CLASS_MODAL);\n        addClass(this.cropBox, CLASS_HIDDEN);\n      }\n\n      return this;\n    },\n\n    /**\n     * Replace the image's src and rebuild the cropper\n     * @param {string} url - The new URL.\n     * @param {boolean} [hasSameSize] - Indicate if the new image has the same size as the old one.\n     * @returns {Cropper} this\n     */\n    replace: function replace(url) {\n      var hasSameSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (!this.disabled && url) {\n        if (this.isImg) {\n          this.element.src = url;\n        }\n\n        if (hasSameSize) {\n          this.url = url;\n          this.image.src = url;\n\n          if (this.ready) {\n            this.viewBoxImage.src = url;\n            forEach(this.previews, function (element) {\n              element.getElementsByTagName('img')[0].src = url;\n            });\n          }\n        } else {\n          if (this.isImg) {\n            this.replaced = true;\n          }\n\n          this.options.data = null;\n          this.uncreate();\n          this.load(url);\n        }\n      }\n\n      return this;\n    },\n    // Enable (unfreeze) the cropper\n    enable: function enable() {\n      if (this.ready && this.disabled) {\n        this.disabled = false;\n        removeClass(this.cropper, CLASS_DISABLED);\n      }\n\n      return this;\n    },\n    // Disable (freeze) the cropper\n    disable: function disable() {\n      if (this.ready && !this.disabled) {\n        this.disabled = true;\n        addClass(this.cropper, CLASS_DISABLED);\n      }\n\n      return this;\n    },\n\n    /**\n     * Destroy the cropper and remove the instance from the image\n     * @returns {Cropper} this\n     */\n    destroy: function destroy() {\n      var element = this.element;\n\n      if (!element[NAMESPACE]) {\n        return this;\n      }\n\n      element[NAMESPACE] = undefined;\n\n      if (this.isImg && this.replaced) {\n        element.src = this.originalUrl;\n      }\n\n      this.uncreate();\n      return this;\n    },\n\n    /**\n     * Move the canvas with relative offsets\n     * @param {number} offsetX - The relative offset distance on the x-axis.\n     * @param {number} [offsetY=offsetX] - The relative offset distance on the y-axis.\n     * @returns {Cropper} this\n     */\n    move: function move(offsetX) {\n      var offsetY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : offsetX;\n      var _this$canvasData = this.canvasData,\n          left = _this$canvasData.left,\n          top = _this$canvasData.top;\n      return this.moveTo(isUndefined(offsetX) ? offsetX : left + Number(offsetX), isUndefined(offsetY) ? offsetY : top + Number(offsetY));\n    },\n\n    /**\n     * Move the canvas to an absolute point\n     * @param {number} x - The x-axis coordinate.\n     * @param {number} [y=x] - The y-axis coordinate.\n     * @returns {Cropper} this\n     */\n    moveTo: function moveTo(x) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x;\n      var canvasData = this.canvasData;\n      var changed = false;\n      x = Number(x);\n      y = Number(y);\n\n      if (this.ready && !this.disabled && this.options.movable) {\n        if (isNumber(x)) {\n          canvasData.left = x;\n          changed = true;\n        }\n\n        if (isNumber(y)) {\n          canvasData.top = y;\n          changed = true;\n        }\n\n        if (changed) {\n          this.renderCanvas(true);\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Zoom the canvas with a relative ratio\n     * @param {number} ratio - The target ratio.\n     * @param {Event} _originalEvent - The original event if any.\n     * @returns {Cropper} this\n     */\n    zoom: function zoom(ratio, _originalEvent) {\n      var canvasData = this.canvasData;\n      ratio = Number(ratio);\n\n      if (ratio < 0) {\n        ratio = 1 / (1 - ratio);\n      } else {\n        ratio = 1 + ratio;\n      }\n\n      return this.zoomTo(canvasData.width * ratio / canvasData.naturalWidth, null, _originalEvent);\n    },\n\n    /**\n     * Zoom the canvas to an absolute ratio\n     * @param {number} ratio - The target ratio.\n     * @param {Object} pivot - The zoom pivot point coordinate.\n     * @param {Event} _originalEvent - The original event if any.\n     * @returns {Cropper} this\n     */\n    zoomTo: function zoomTo(ratio, pivot, _originalEvent) {\n      var options = this.options,\n          canvasData = this.canvasData;\n      var width = canvasData.width,\n          height = canvasData.height,\n          naturalWidth = canvasData.naturalWidth,\n          naturalHeight = canvasData.naturalHeight;\n      ratio = Number(ratio);\n\n      if (ratio >= 0 && this.ready && !this.disabled && options.zoomable) {\n        var newWidth = naturalWidth * ratio;\n        var newHeight = naturalHeight * ratio;\n\n        if (dispatchEvent(this.element, EVENT_ZOOM, {\n          ratio: ratio,\n          oldRatio: width / naturalWidth,\n          originalEvent: _originalEvent\n        }) === false) {\n          return this;\n        }\n\n        if (_originalEvent) {\n          var pointers = this.pointers;\n          var offset = getOffset(this.cropper);\n          var center = pointers && Object.keys(pointers).length ? getPointersCenter(pointers) : {\n            pageX: _originalEvent.pageX,\n            pageY: _originalEvent.pageY\n          }; // Zoom from the triggering point of the event\n\n          canvasData.left -= (newWidth - width) * ((center.pageX - offset.left - canvasData.left) / width);\n          canvasData.top -= (newHeight - height) * ((center.pageY - offset.top - canvasData.top) / height);\n        } else if (isPlainObject(pivot) && isNumber(pivot.x) && isNumber(pivot.y)) {\n          canvasData.left -= (newWidth - width) * ((pivot.x - canvasData.left) / width);\n          canvasData.top -= (newHeight - height) * ((pivot.y - canvasData.top) / height);\n        } else {\n          // Zoom from the center of the canvas\n          canvasData.left -= (newWidth - width) / 2;\n          canvasData.top -= (newHeight - height) / 2;\n        }\n\n        canvasData.width = newWidth;\n        canvasData.height = newHeight;\n        this.renderCanvas(true);\n      }\n\n      return this;\n    },\n\n    /**\n     * Rotate the canvas with a relative degree\n     * @param {number} degree - The rotate degree.\n     * @returns {Cropper} this\n     */\n    rotate: function rotate(degree) {\n      return this.rotateTo((this.imageData.rotate || 0) + Number(degree));\n    },\n\n    /**\n     * Rotate the canvas to an absolute degree\n     * @param {number} degree - The rotate degree.\n     * @returns {Cropper} this\n     */\n    rotateTo: function rotateTo(degree) {\n      degree = Number(degree);\n\n      if (isNumber(degree) && this.ready && !this.disabled && this.options.rotatable) {\n        this.imageData.rotate = degree % 360;\n        this.renderCanvas(true, true);\n      }\n\n      return this;\n    },\n\n    /**\n     * Scale the image on the x-axis.\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @returns {Cropper} this\n     */\n    scaleX: function scaleX(_scaleX) {\n      var scaleY = this.imageData.scaleY;\n      return this.scale(_scaleX, isNumber(scaleY) ? scaleY : 1);\n    },\n\n    /**\n     * Scale the image on the y-axis.\n     * @param {number} scaleY - The scale ratio on the y-axis.\n     * @returns {Cropper} this\n     */\n    scaleY: function scaleY(_scaleY) {\n      var scaleX = this.imageData.scaleX;\n      return this.scale(isNumber(scaleX) ? scaleX : 1, _scaleY);\n    },\n\n    /**\n     * Scale the image\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @param {number} [scaleY=scaleX] - The scale ratio on the y-axis.\n     * @returns {Cropper} this\n     */\n    scale: function scale(scaleX) {\n      var scaleY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : scaleX;\n      var imageData = this.imageData;\n      var transformed = false;\n      scaleX = Number(scaleX);\n      scaleY = Number(scaleY);\n\n      if (this.ready && !this.disabled && this.options.scalable) {\n        if (isNumber(scaleX)) {\n          imageData.scaleX = scaleX;\n          transformed = true;\n        }\n\n        if (isNumber(scaleY)) {\n          imageData.scaleY = scaleY;\n          transformed = true;\n        }\n\n        if (transformed) {\n          this.renderCanvas(true, true);\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Get the cropped area position and size data (base on the original image)\n     * @param {boolean} [rounded=false] - Indicate if round the data values or not.\n     * @returns {Object} The result cropped data.\n     */\n    getData: function getData() {\n      var rounded = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var options = this.options,\n          imageData = this.imageData,\n          canvasData = this.canvasData,\n          cropBoxData = this.cropBoxData;\n      var data;\n\n      if (this.ready && this.cropped) {\n        data = {\n          x: cropBoxData.left - canvasData.left,\n          y: cropBoxData.top - canvasData.top,\n          width: cropBoxData.width,\n          height: cropBoxData.height\n        };\n        var ratio = imageData.width / imageData.naturalWidth;\n        forEach(data, function (n, i) {\n          data[i] = n / ratio;\n        });\n\n        if (rounded) {\n          // In case rounding off leads to extra 1px in right or bottom border\n          // we should round the top-left corner and the dimension (#343).\n          var bottom = Math.round(data.y + data.height);\n          var right = Math.round(data.x + data.width);\n          data.x = Math.round(data.x);\n          data.y = Math.round(data.y);\n          data.width = right - data.x;\n          data.height = bottom - data.y;\n        }\n      } else {\n        data = {\n          x: 0,\n          y: 0,\n          width: 0,\n          height: 0\n        };\n      }\n\n      if (options.rotatable) {\n        data.rotate = imageData.rotate || 0;\n      }\n\n      if (options.scalable) {\n        data.scaleX = imageData.scaleX || 1;\n        data.scaleY = imageData.scaleY || 1;\n      }\n\n      return data;\n    },\n\n    /**\n     * Set the cropped area position and size with new data\n     * @param {Object} data - The new data.\n     * @returns {Cropper} this\n     */\n    setData: function setData(data) {\n      var options = this.options,\n          imageData = this.imageData,\n          canvasData = this.canvasData;\n      var cropBoxData = {};\n\n      if (this.ready && !this.disabled && isPlainObject(data)) {\n        var transformed = false;\n\n        if (options.rotatable) {\n          if (isNumber(data.rotate) && data.rotate !== imageData.rotate) {\n            imageData.rotate = data.rotate;\n            transformed = true;\n          }\n        }\n\n        if (options.scalable) {\n          if (isNumber(data.scaleX) && data.scaleX !== imageData.scaleX) {\n            imageData.scaleX = data.scaleX;\n            transformed = true;\n          }\n\n          if (isNumber(data.scaleY) && data.scaleY !== imageData.scaleY) {\n            imageData.scaleY = data.scaleY;\n            transformed = true;\n          }\n        }\n\n        if (transformed) {\n          this.renderCanvas(true, true);\n        }\n\n        var ratio = imageData.width / imageData.naturalWidth;\n\n        if (isNumber(data.x)) {\n          cropBoxData.left = data.x * ratio + canvasData.left;\n        }\n\n        if (isNumber(data.y)) {\n          cropBoxData.top = data.y * ratio + canvasData.top;\n        }\n\n        if (isNumber(data.width)) {\n          cropBoxData.width = data.width * ratio;\n        }\n\n        if (isNumber(data.height)) {\n          cropBoxData.height = data.height * ratio;\n        }\n\n        this.setCropBoxData(cropBoxData);\n      }\n\n      return this;\n    },\n\n    /**\n     * Get the container size data.\n     * @returns {Object} The result container data.\n     */\n    getContainerData: function getContainerData() {\n      return this.ready ? assign({}, this.containerData) : {};\n    },\n\n    /**\n     * Get the image position and size data.\n     * @returns {Object} The result image data.\n     */\n    getImageData: function getImageData() {\n      return this.sized ? assign({}, this.imageData) : {};\n    },\n\n    /**\n     * Get the canvas position and size data.\n     * @returns {Object} The result canvas data.\n     */\n    getCanvasData: function getCanvasData() {\n      var canvasData = this.canvasData;\n      var data = {};\n\n      if (this.ready) {\n        forEach(['left', 'top', 'width', 'height', 'naturalWidth', 'naturalHeight'], function (n) {\n          data[n] = canvasData[n];\n        });\n      }\n\n      return data;\n    },\n\n    /**\n     * Set the canvas position and size with new data.\n     * @param {Object} data - The new canvas data.\n     * @returns {Cropper} this\n     */\n    setCanvasData: function setCanvasData(data) {\n      var canvasData = this.canvasData;\n      var aspectRatio = canvasData.aspectRatio;\n\n      if (this.ready && !this.disabled && isPlainObject(data)) {\n        if (isNumber(data.left)) {\n          canvasData.left = data.left;\n        }\n\n        if (isNumber(data.top)) {\n          canvasData.top = data.top;\n        }\n\n        if (isNumber(data.width)) {\n          canvasData.width = data.width;\n          canvasData.height = data.width / aspectRatio;\n        } else if (isNumber(data.height)) {\n          canvasData.height = data.height;\n          canvasData.width = data.height * aspectRatio;\n        }\n\n        this.renderCanvas(true);\n      }\n\n      return this;\n    },\n\n    /**\n     * Get the crop box position and size data.\n     * @returns {Object} The result crop box data.\n     */\n    getCropBoxData: function getCropBoxData() {\n      var cropBoxData = this.cropBoxData;\n      var data;\n\n      if (this.ready && this.cropped) {\n        data = {\n          left: cropBoxData.left,\n          top: cropBoxData.top,\n          width: cropBoxData.width,\n          height: cropBoxData.height\n        };\n      }\n\n      return data || {};\n    },\n\n    /**\n     * Set the crop box position and size with new data.\n     * @param {Object} data - The new crop box data.\n     * @returns {Cropper} this\n     */\n    setCropBoxData: function setCropBoxData(data) {\n      var cropBoxData = this.cropBoxData;\n      var aspectRatio = this.options.aspectRatio;\n      var widthChanged;\n      var heightChanged;\n\n      if (this.ready && this.cropped && !this.disabled && isPlainObject(data)) {\n        if (isNumber(data.left)) {\n          cropBoxData.left = data.left;\n        }\n\n        if (isNumber(data.top)) {\n          cropBoxData.top = data.top;\n        }\n\n        if (isNumber(data.width) && data.width !== cropBoxData.width) {\n          widthChanged = true;\n          cropBoxData.width = data.width;\n        }\n\n        if (isNumber(data.height) && data.height !== cropBoxData.height) {\n          heightChanged = true;\n          cropBoxData.height = data.height;\n        }\n\n        if (aspectRatio) {\n          if (widthChanged) {\n            cropBoxData.height = cropBoxData.width / aspectRatio;\n          } else if (heightChanged) {\n            cropBoxData.width = cropBoxData.height * aspectRatio;\n          }\n        }\n\n        this.renderCropBox();\n      }\n\n      return this;\n    },\n\n    /**\n     * Get a canvas drawn the cropped image.\n     * @param {Object} [options={}] - The config options.\n     * @returns {HTMLCanvasElement} - The result canvas.\n     */\n    getCroppedCanvas: function getCroppedCanvas() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (!this.ready || !window.HTMLCanvasElement) {\n        return null;\n      }\n\n      var canvasData = this.canvasData;\n      var source = getSourceCanvas(this.image, this.imageData, canvasData, options); // Returns the source canvas if it is not cropped.\n\n      if (!this.cropped) {\n        return source;\n      }\n\n      var _this$getData = this.getData(),\n          initialX = _this$getData.x,\n          initialY = _this$getData.y,\n          initialWidth = _this$getData.width,\n          initialHeight = _this$getData.height;\n\n      var ratio = source.width / Math.floor(canvasData.naturalWidth);\n\n      if (ratio !== 1) {\n        initialX *= ratio;\n        initialY *= ratio;\n        initialWidth *= ratio;\n        initialHeight *= ratio;\n      }\n\n      var aspectRatio = initialWidth / initialHeight;\n      var maxSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: options.maxWidth || Infinity,\n        height: options.maxHeight || Infinity\n      });\n      var minSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: options.minWidth || 0,\n        height: options.minHeight || 0\n      }, 'cover');\n\n      var _getAdjustedSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: options.width || (ratio !== 1 ? source.width : initialWidth),\n        height: options.height || (ratio !== 1 ? source.height : initialHeight)\n      }),\n          width = _getAdjustedSizes.width,\n          height = _getAdjustedSizes.height;\n\n      width = Math.min(maxSizes.width, Math.max(minSizes.width, width));\n      height = Math.min(maxSizes.height, Math.max(minSizes.height, height));\n      var canvas = document.createElement('canvas');\n      var context = canvas.getContext('2d');\n      canvas.width = normalizeDecimalNumber(width);\n      canvas.height = normalizeDecimalNumber(height);\n      context.fillStyle = options.fillColor || 'transparent';\n      context.fillRect(0, 0, width, height);\n      var _options$imageSmoothi = options.imageSmoothingEnabled,\n          imageSmoothingEnabled = _options$imageSmoothi === void 0 ? true : _options$imageSmoothi,\n          imageSmoothingQuality = options.imageSmoothingQuality;\n      context.imageSmoothingEnabled = imageSmoothingEnabled;\n\n      if (imageSmoothingQuality) {\n        context.imageSmoothingQuality = imageSmoothingQuality;\n      } // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D.drawImage\n\n\n      var sourceWidth = source.width;\n      var sourceHeight = source.height; // Source canvas parameters\n\n      var srcX = initialX;\n      var srcY = initialY;\n      var srcWidth;\n      var srcHeight; // Destination canvas parameters\n\n      var dstX;\n      var dstY;\n      var dstWidth;\n      var dstHeight;\n\n      if (srcX <= -initialWidth || srcX > sourceWidth) {\n        srcX = 0;\n        srcWidth = 0;\n        dstX = 0;\n        dstWidth = 0;\n      } else if (srcX <= 0) {\n        dstX = -srcX;\n        srcX = 0;\n        srcWidth = Math.min(sourceWidth, initialWidth + srcX);\n        dstWidth = srcWidth;\n      } else if (srcX <= sourceWidth) {\n        dstX = 0;\n        srcWidth = Math.min(initialWidth, sourceWidth - srcX);\n        dstWidth = srcWidth;\n      }\n\n      if (srcWidth <= 0 || srcY <= -initialHeight || srcY > sourceHeight) {\n        srcY = 0;\n        srcHeight = 0;\n        dstY = 0;\n        dstHeight = 0;\n      } else if (srcY <= 0) {\n        dstY = -srcY;\n        srcY = 0;\n        srcHeight = Math.min(sourceHeight, initialHeight + srcY);\n        dstHeight = srcHeight;\n      } else if (srcY <= sourceHeight) {\n        dstY = 0;\n        srcHeight = Math.min(initialHeight, sourceHeight - srcY);\n        dstHeight = srcHeight;\n      }\n\n      var params = [srcX, srcY, srcWidth, srcHeight]; // Avoid \"IndexSizeError\"\n\n      if (dstWidth > 0 && dstHeight > 0) {\n        var scale = width / initialWidth;\n        params.push(dstX * scale, dstY * scale, dstWidth * scale, dstHeight * scale);\n      } // All the numerical parameters should be integer for `drawImage`\n      // https://github.com/fengyuanchen/cropper/issues/476\n\n\n      context.drawImage.apply(context, [source].concat(_toConsumableArray(params.map(function (param) {\n        return Math.floor(normalizeDecimalNumber(param));\n      }))));\n      return canvas;\n    },\n\n    /**\n     * Change the aspect ratio of the crop box.\n     * @param {number} aspectRatio - The new aspect ratio.\n     * @returns {Cropper} this\n     */\n    setAspectRatio: function setAspectRatio(aspectRatio) {\n      var options = this.options;\n\n      if (!this.disabled && !isUndefined(aspectRatio)) {\n        // 0 -> NaN\n        options.aspectRatio = Math.max(0, aspectRatio) || NaN;\n\n        if (this.ready) {\n          this.initCropBox();\n\n          if (this.cropped) {\n            this.renderCropBox();\n          }\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Change the drag mode.\n     * @param {string} mode - The new drag mode.\n     * @returns {Cropper} this\n     */\n    setDragMode: function setDragMode(mode) {\n      var options = this.options,\n          dragBox = this.dragBox,\n          face = this.face;\n\n      if (this.ready && !this.disabled) {\n        var croppable = mode === DRAG_MODE_CROP;\n        var movable = options.movable && mode === DRAG_MODE_MOVE;\n        mode = croppable || movable ? mode : DRAG_MODE_NONE;\n        options.dragMode = mode;\n        setData(dragBox, DATA_ACTION, mode);\n        toggleClass(dragBox, CLASS_CROP, croppable);\n        toggleClass(dragBox, CLASS_MOVE, movable);\n\n        if (!options.cropBoxMovable) {\n          // Sync drag mode to crop box when it is not movable\n          setData(face, DATA_ACTION, mode);\n          toggleClass(face, CLASS_CROP, croppable);\n          toggleClass(face, CLASS_MOVE, movable);\n        }\n      }\n\n      return this;\n    }\n  };\n\n  var AnotherCropper = WINDOW.Cropper;\n\n  var Cropper =\n  /*#__PURE__*/\n  function () {\n    /**\n     * Create a new Cropper.\n     * @param {Element} element - The target element for cropping.\n     * @param {Object} [options={}] - The configuration options.\n     */\n    function Cropper(element) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      _classCallCheck(this, Cropper);\n\n      if (!element || !REGEXP_TAG_NAME.test(element.tagName)) {\n        throw new Error('The first argument is required and must be an <img> or <canvas> element.');\n      }\n\n      this.element = element;\n      this.options = assign({}, DEFAULTS, isPlainObject(options) && options);\n      this.cropped = false;\n      this.disabled = false;\n      this.pointers = {};\n      this.ready = false;\n      this.reloading = false;\n      this.replaced = false;\n      this.sized = false;\n      this.sizing = false;\n      this.init();\n    }\n\n    _createClass(Cropper, [{\n      key: \"init\",\n      value: function init() {\n        var element = this.element;\n        var tagName = element.tagName.toLowerCase();\n        var url;\n\n        if (element[NAMESPACE]) {\n          return;\n        }\n\n        element[NAMESPACE] = this;\n\n        if (tagName === 'img') {\n          this.isImg = true; // e.g.: \"img/picture.jpg\"\n\n          url = element.getAttribute('src') || '';\n          this.originalUrl = url; // Stop when it's a blank image\n\n          if (!url) {\n            return;\n          } // e.g.: \"http://example.com/img/picture.jpg\"\n\n\n          url = element.src;\n        } else if (tagName === 'canvas' && window.HTMLCanvasElement) {\n          url = element.toDataURL();\n        }\n\n        this.load(url);\n      }\n    }, {\n      key: \"load\",\n      value: function load(url) {\n        var _this = this;\n\n        if (!url) {\n          return;\n        }\n\n        this.url = url;\n        this.imageData = {};\n        var element = this.element,\n            options = this.options;\n\n        if (!options.rotatable && !options.scalable) {\n          options.checkOrientation = false;\n        } // Only IE10+ supports Typed Arrays\n\n\n        if (!options.checkOrientation || !window.ArrayBuffer) {\n          this.clone();\n          return;\n        } // Detect the mime type of the image directly if it is a Data URL\n\n\n        if (REGEXP_DATA_URL.test(url)) {\n          // Read ArrayBuffer from Data URL of JPEG images directly for better performance\n          if (REGEXP_DATA_URL_JPEG.test(url)) {\n            this.read(dataURLToArrayBuffer(url));\n          } else {\n            // Only a JPEG image may contains Exif Orientation information,\n            // the rest types of Data URLs are not necessary to check orientation at all.\n            this.clone();\n          }\n\n          return;\n        } // 1. Detect the mime type of the image by a XMLHttpRequest.\n        // 2. Load the image as ArrayBuffer for reading orientation if its a JPEG image.\n\n\n        var xhr = new XMLHttpRequest();\n        var clone = this.clone.bind(this);\n        this.reloading = true;\n        this.xhr = xhr; // 1. Cross origin requests are only supported for protocol schemes:\n        // http, https, data, chrome, chrome-extension.\n        // 2. Access to XMLHttpRequest from a Data URL will be blocked by CORS policy\n        // in some browsers as IE11 and Safari.\n\n        xhr.onabort = clone;\n        xhr.onerror = clone;\n        xhr.ontimeout = clone;\n\n        xhr.onprogress = function () {\n          // Abort the request directly if it not a JPEG image for better performance\n          if (xhr.getResponseHeader('content-type') !== MIME_TYPE_JPEG) {\n            xhr.abort();\n          }\n        };\n\n        xhr.onload = function () {\n          _this.read(xhr.response);\n        };\n\n        xhr.onloadend = function () {\n          _this.reloading = false;\n          _this.xhr = null;\n        }; // Bust cache when there is a \"crossOrigin\" property to avoid browser cache error\n\n\n        if (options.checkCrossOrigin && isCrossOriginURL(url) && element.crossOrigin) {\n          url = addTimestamp(url);\n        }\n\n        xhr.open('GET', url);\n        xhr.responseType = 'arraybuffer';\n        xhr.withCredentials = element.crossOrigin === 'use-credentials';\n        xhr.send();\n      }\n    }, {\n      key: \"read\",\n      value: function read(arrayBuffer) {\n        var options = this.options,\n            imageData = this.imageData; // Reset the orientation value to its default value 1\n        // as some iOS browsers will render image with its orientation\n\n        var orientation = resetAndGetOrientation(arrayBuffer);\n        var rotate = 0;\n        var scaleX = 1;\n        var scaleY = 1;\n\n        if (orientation > 1) {\n          // Generate a new URL which has the default orientation value\n          this.url = arrayBufferToDataURL(arrayBuffer, MIME_TYPE_JPEG);\n\n          var _parseOrientation = parseOrientation(orientation);\n\n          rotate = _parseOrientation.rotate;\n          scaleX = _parseOrientation.scaleX;\n          scaleY = _parseOrientation.scaleY;\n        }\n\n        if (options.rotatable) {\n          imageData.rotate = rotate;\n        }\n\n        if (options.scalable) {\n          imageData.scaleX = scaleX;\n          imageData.scaleY = scaleY;\n        }\n\n        this.clone();\n      }\n    }, {\n      key: \"clone\",\n      value: function clone() {\n        var element = this.element,\n            url = this.url;\n        var crossOrigin = element.crossOrigin;\n        var crossOriginUrl = url;\n\n        if (this.options.checkCrossOrigin && isCrossOriginURL(url)) {\n          if (!crossOrigin) {\n            crossOrigin = 'anonymous';\n          } // Bust cache when there is not a \"crossOrigin\" property (#519)\n\n\n          crossOriginUrl = addTimestamp(url);\n        }\n\n        this.crossOrigin = crossOrigin;\n        this.crossOriginUrl = crossOriginUrl;\n        var image = document.createElement('img');\n\n        if (crossOrigin) {\n          image.crossOrigin = crossOrigin;\n        }\n\n        image.src = crossOriginUrl || url;\n        image.alt = element.alt || 'The image to crop';\n        this.image = image;\n        image.onload = this.start.bind(this);\n        image.onerror = this.stop.bind(this);\n        addClass(image, CLASS_HIDE);\n        element.parentNode.insertBefore(image, element.nextSibling);\n      }\n    }, {\n      key: \"start\",\n      value: function start() {\n        var _this2 = this;\n\n        var image = this.image;\n        image.onload = null;\n        image.onerror = null;\n        this.sizing = true; // Match all browsers that use WebKit as the layout engine in iOS devices,\n        // such as Safari for iOS, Chrome for iOS, and in-app browsers.\n\n        var isIOSWebKit = WINDOW.navigator && /(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(WINDOW.navigator.userAgent);\n\n        var done = function done(naturalWidth, naturalHeight) {\n          assign(_this2.imageData, {\n            naturalWidth: naturalWidth,\n            naturalHeight: naturalHeight,\n            aspectRatio: naturalWidth / naturalHeight\n          });\n          _this2.sizing = false;\n          _this2.sized = true;\n\n          _this2.build();\n        }; // Most modern browsers (excepts iOS WebKit)\n\n\n        if (image.naturalWidth && !isIOSWebKit) {\n          done(image.naturalWidth, image.naturalHeight);\n          return;\n        }\n\n        var sizingImage = document.createElement('img');\n        var body = document.body || document.documentElement;\n        this.sizingImage = sizingImage;\n\n        sizingImage.onload = function () {\n          done(sizingImage.width, sizingImage.height);\n\n          if (!isIOSWebKit) {\n            body.removeChild(sizingImage);\n          }\n        };\n\n        sizingImage.src = image.src; // iOS WebKit will convert the image automatically\n        // with its orientation once append it into DOM (#279)\n\n        if (!isIOSWebKit) {\n          sizingImage.style.cssText = 'left:0;' + 'max-height:none!important;' + 'max-width:none!important;' + 'min-height:0!important;' + 'min-width:0!important;' + 'opacity:0;' + 'position:absolute;' + 'top:0;' + 'z-index:-1;';\n          body.appendChild(sizingImage);\n        }\n      }\n    }, {\n      key: \"stop\",\n      value: function stop() {\n        var image = this.image;\n        image.onload = null;\n        image.onerror = null;\n        image.parentNode.removeChild(image);\n        this.image = null;\n      }\n    }, {\n      key: \"build\",\n      value: function build() {\n        if (!this.sized || this.ready) {\n          return;\n        }\n\n        var element = this.element,\n            options = this.options,\n            image = this.image; // Create cropper elements\n\n        var container = element.parentNode;\n        var template = document.createElement('div');\n        template.innerHTML = TEMPLATE;\n        var cropper = template.querySelector(\".\".concat(NAMESPACE, \"-container\"));\n        var canvas = cropper.querySelector(\".\".concat(NAMESPACE, \"-canvas\"));\n        var dragBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-drag-box\"));\n        var cropBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-crop-box\"));\n        var face = cropBox.querySelector(\".\".concat(NAMESPACE, \"-face\"));\n        this.container = container;\n        this.cropper = cropper;\n        this.canvas = canvas;\n        this.dragBox = dragBox;\n        this.cropBox = cropBox;\n        this.viewBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-view-box\"));\n        this.face = face;\n        canvas.appendChild(image); // Hide the original image\n\n        addClass(element, CLASS_HIDDEN); // Inserts the cropper after to the current image\n\n        container.insertBefore(cropper, element.nextSibling); // Show the image if is hidden\n\n        if (!this.isImg) {\n          removeClass(image, CLASS_HIDE);\n        }\n\n        this.initPreview();\n        this.bind();\n        options.initialAspectRatio = Math.max(0, options.initialAspectRatio) || NaN;\n        options.aspectRatio = Math.max(0, options.aspectRatio) || NaN;\n        options.viewMode = Math.max(0, Math.min(3, Math.round(options.viewMode))) || 0;\n        addClass(cropBox, CLASS_HIDDEN);\n\n        if (!options.guides) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-dashed\")), CLASS_HIDDEN);\n        }\n\n        if (!options.center) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-center\")), CLASS_HIDDEN);\n        }\n\n        if (options.background) {\n          addClass(cropper, \"\".concat(NAMESPACE, \"-bg\"));\n        }\n\n        if (!options.highlight) {\n          addClass(face, CLASS_INVISIBLE);\n        }\n\n        if (options.cropBoxMovable) {\n          addClass(face, CLASS_MOVE);\n          setData(face, DATA_ACTION, ACTION_ALL);\n        }\n\n        if (!options.cropBoxResizable) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-line\")), CLASS_HIDDEN);\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-point\")), CLASS_HIDDEN);\n        }\n\n        this.render();\n        this.ready = true;\n        this.setDragMode(options.dragMode);\n\n        if (options.autoCrop) {\n          this.crop();\n        }\n\n        this.setData(options.data);\n\n        if (isFunction(options.ready)) {\n          addListener(element, EVENT_READY, options.ready, {\n            once: true\n          });\n        }\n\n        dispatchEvent(element, EVENT_READY);\n      }\n    }, {\n      key: \"unbuild\",\n      value: function unbuild() {\n        if (!this.ready) {\n          return;\n        }\n\n        this.ready = false;\n        this.unbind();\n        this.resetPreview();\n        this.cropper.parentNode.removeChild(this.cropper);\n        removeClass(this.element, CLASS_HIDDEN);\n      }\n    }, {\n      key: \"uncreate\",\n      value: function uncreate() {\n        if (this.ready) {\n          this.unbuild();\n          this.ready = false;\n          this.cropped = false;\n        } else if (this.sizing) {\n          this.sizingImage.onload = null;\n          this.sizing = false;\n          this.sized = false;\n        } else if (this.reloading) {\n          this.xhr.onabort = null;\n          this.xhr.abort();\n        } else if (this.image) {\n          this.stop();\n        }\n      }\n      /**\n       * Get the no conflict cropper class.\n       * @returns {Cropper} The cropper class.\n       */\n\n    }], [{\n      key: \"noConflict\",\n      value: function noConflict() {\n        window.Cropper = AnotherCropper;\n        return Cropper;\n      }\n      /**\n       * Change the default options.\n       * @param {Object} options - The new default options.\n       */\n\n    }, {\n      key: \"setDefaults\",\n      value: function setDefaults(options) {\n        assign(DEFAULTS, isPlainObject(options) && options);\n      }\n    }]);\n\n    return Cropper;\n  }();\n\n  assign(Cropper.prototype, render, preview, events, handlers, change, methods);\n\n  return Cropper;\n\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/cropperjs/dist/cropper.js\n// module id = 9\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../css-loader/index.js!./cropper.min.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../vue-style-loader/lib/addStylesClient.js\")(\"354ec51f\", content, true, {});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/cropperjs/dist/cropper.min.css\n// module id = 10\n// module chunks = 0","exports = module.exports = require(\"../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*!\\n * Cropper.js v1.5.4\\n * https://fengyuanchen.github.io/cropperjs\\n *\\n * Copyright 2015-present Chen Fengyuan\\n * Released under the MIT license\\n *\\n * Date: 2019-08-03T08:38:38.177Z\\n */.cropper-container{direction:ltr;font-size:0;line-height:0;position:relative;-ms-touch-action:none;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.cropper-container img{display:block;height:100%;image-orientation:0deg;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;width:100%}.cropper-canvas,.cropper-crop-box,.cropper-drag-box,.cropper-modal,.cropper-wrap-box{bottom:0;left:0;position:absolute;right:0;top:0}.cropper-canvas,.cropper-wrap-box{overflow:hidden}.cropper-drag-box{background-color:#fff;opacity:0}.cropper-modal{background-color:#000;opacity:.5}.cropper-view-box{display:block;height:100%;outline:1px solid #39f;outline-color:rgba(51,153,255,.75);overflow:hidden;width:100%}.cropper-dashed{border:0 dashed #eee;display:block;opacity:.5;position:absolute}.cropper-dashed.dashed-h{border-bottom-width:1px;border-top-width:1px;height:33.33333%;left:0;top:33.33333%;width:100%}.cropper-dashed.dashed-v{border-left-width:1px;border-right-width:1px;height:100%;left:33.33333%;top:0;width:33.33333%}.cropper-center{display:block;height:0;left:50%;opacity:.75;position:absolute;top:50%;width:0}.cropper-center:after,.cropper-center:before{background-color:#eee;content:\\\" \\\";display:block;position:absolute}.cropper-center:before{height:1px;left:-3px;top:0;width:7px}.cropper-center:after{height:7px;left:0;top:-3px;width:1px}.cropper-face,.cropper-line,.cropper-point{display:block;height:100%;opacity:.1;position:absolute;width:100%}.cropper-face{background-color:#fff;left:0;top:0}.cropper-line{background-color:#39f}.cropper-line.line-e{cursor:ew-resize;right:-3px;top:0;width:5px}.cropper-line.line-n{cursor:ns-resize;height:5px;left:0;top:-3px}.cropper-line.line-w{cursor:ew-resize;left:-3px;top:0;width:5px}.cropper-line.line-s{bottom:-3px;cursor:ns-resize;height:5px;left:0}.cropper-point{background-color:#39f;height:5px;opacity:.75;width:5px}.cropper-point.point-e{cursor:ew-resize;margin-top:-3px;right:-3px;top:50%}.cropper-point.point-n{cursor:ns-resize;left:50%;margin-left:-3px;top:-3px}.cropper-point.point-w{cursor:ew-resize;left:-3px;margin-top:-3px;top:50%}.cropper-point.point-s{bottom:-3px;cursor:s-resize;left:50%;margin-left:-3px}.cropper-point.point-ne{cursor:nesw-resize;right:-3px;top:-3px}.cropper-point.point-nw{cursor:nwse-resize;left:-3px;top:-3px}.cropper-point.point-sw{bottom:-3px;cursor:nesw-resize;left:-3px}.cropper-point.point-se{bottom:-3px;cursor:nwse-resize;height:20px;opacity:1;right:-3px;width:20px}@media (min-width:768px){.cropper-point.point-se{height:15px;width:15px}}@media (min-width:992px){.cropper-point.point-se{height:10px;width:10px}}@media (min-width:1200px){.cropper-point.point-se{height:5px;opacity:.75;width:5px}}.cropper-point.point-se:before{background-color:#39f;bottom:-50%;content:\\\" \\\";display:block;height:200%;opacity:0;position:absolute;right:-50%;width:200%}.cropper-invisible{opacity:0}.cropper-bg{background-image:url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC\\\")}.cropper-hide{display:block;height:0;position:absolute;width:0}.cropper-hidden{display:none!important}.cropper-move{cursor:move}.cropper-crop{cursor:crosshair}.cropper-disabled .cropper-drag-box,.cropper-disabled .cropper-face,.cropper-disabled .cropper-line,.cropper-disabled .cropper-point{cursor:not-allowed}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./node_modules/cropperjs/dist/cropper.min.css\n// module id = 11\n// module chunks = 0","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"copper-box\"},[_c('img',{ref:\"img\",staticClass:\"copper-img\",attrs:{\"src\":_vm.src}})])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-fe98b570\",\"hasScoped\":true,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/crop/index.vue\n// module id = 12\n// module chunks = 0"],"sourceRoot":""}